webpackJsonp([1],{"2v/C":function(t,e){},"6Bgf":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADsAAAA8CAYAAADYIMILAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQ1IDc5LjE2MzQ5OSwgMjAxOC8wOC8xMy0xNjo0MDoyMiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTkgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkQ0RTdDRDZCQzdBQjExRTk5N0I1ODYxNEZDNDhBRjdCIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkQ0RTdDRDZDQzdBQjExRTk5N0I1ODYxNEZDNDhBRjdCIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6RDRFN0NENjlDN0FCMTFFOTk3QjU4NjE0RkM0OEFGN0IiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6RDRFN0NENkFDN0FCMTFFOTk3QjU4NjE0RkM0OEFGN0IiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz4NAM7BAAAHhElEQVR42uybB1RTZxTHyU4ISQgjoiCJWERUKlZw0zpQFAd1gNra2mM5oFRx1FHnsVQtHu2pVKHHVRGtWour7oGKUkfFBVSCIAQwMiSEDDJI8tL7hQQRZXiq0cS8cwLvJe/jvd+79/v/7/0AXFRUlN7uPdmI6MvWrVsDrB00Ojo6E2/3Hm02WBusDdYGa4N9Z3zWnJs0/xhbln+cR6CwVAR7F4Vjt8/KSCxunVXCkujt1VJ+6mydWtITHVdcXobhiNRyApV9j+LUJdN14MrLDrxhUqtIY1qHPgpuxKlYiGyW6R70WlUHrbwstLYkfZVg//Az/F/c4svOx3a3ijlr7zGg1jP8eCyezMh68VM9WVtbESzK3Lybn8DZUHXzp44WL1D0jkFybsRJBJzT3DlaxdMh5ZcWHyhM6R+hxzQ4i1ZjI/DsxsB4sgPf0W96NIHmdL0+0BhFIbyxOC+Ru7ZOXEC2aOtpBPwAQPM8x6fGeIxJvu07TzTHgRe8Aocj1BqiLC8b8WhXQJKy/I69RfusETgGQGc5eIU0KDFv6vkz7Yasn4Yn0fPRMSi4v2Df0ASNpJhssbAm4Magps2l77elvCnnIk3qDcC9CvcMXG61FVSDepPsC9CxRiYcXbT343FWWy6iyLcbHL8A5rAMHSseX1tQk53Csdra2DlgzhM6d/AGg0jrdQ4V6ctmWnUjwJt64RSB6phpTOcxr1J0WGTXw/AO2266/+o7iVPeaiNQfSepQ03O3v6YRsEEUZGyfCffcA6cKzR9XpkR5yXNOxzUeAyOSFHR3Hrnug2Oz8FTmFhLPx/5sDTvUC5WJ/fVSEpCIcKbSAx3jdlh87d1m6kW8WfArGrIGoXwOgYPIMU7Om+L4bj0ahdV5f05Tccqn/xjV5OVXMz0Df/RY8zuzJauQ+X4H1Y8zlgOc5dRdmFeoOf4P6+ZNY0F+4ND1aLcSLRPcfbZxfAet5Di7PsbxM1OXf3wq+KDocNetJWB6+zd+62H83biiTQBplVya7L3bCk5Ej6gRbEKjE1HOoX2VeV3+pk9jZUVd0ei72THTge9o/iJxrcv8xPa8bSKyqHKintD4Tit8RivLzIOm/Z1StG2/B1+q6E0HCV7eDSutvTqp8hyXnYtVtfwaiGRVgQPxwsahh5mFyi3IRvWtA/eFOYxds+vz12Ewnxi2MG0tJbGE2jOOigZ4+1weIUe0zpWXFoyssWbpzrmGWwIssHskWX3nFHZ9D2IjoNWJhxkiDi78422VEsEqtNtnbIqqK6mMBDeSm123rp0v6bSYyRDo1BbQSTS22nNrsayghOOwlOR30F7RtKpxH4QJSe4kXO8yWdT2zKeQGGUAawdqLlby557/jR8O/1WrUcjf0JFqw0NtoIjKKiuPTJas5RnPkRQ1feyOso7v+DG8pn4VK9RhmF1MrKs8Ky/QnhtvlyQFlf0+xB8p88vnWhtvF6nZhiY8SSF2WFzNzlvxlSS7ngKI893vnhWq2kIQmMqIlwHrigq2OnvCL76jbI8E1U7rcLqVDUfGFctis0OiyNQJGDeTEwt82npvIIdfjP0ujo6q9uUk5yg7wsbLmLvWl4fMY1Ta9dC1RVkhGFlkeLqd/11wrbJeoj2nAJjp8EU3Upwb3auSksHQfEwXZy167l6VVX176D6SNGLWroOKuqrbqyPR6ei3hXKwotmjyytfe8sSEPDvoSf2gdS9MhLbcPzk92y/L82AvSE3J/ZHeEh5UIx0Q3SMgDyA2N0Hp3cdAxaI673ShVHp5ZCRPUEyKRKyIzFrVnJG4ksJygu29Q0q0UPhjV3HnfSsXRG51FL4WbLADAQovwlAsURqUKG99hFHmNTbjUdg1QbvXRqyYc4HF5JYnEPeYzbM82l78KS1y2cbYos6iiIDm7pqH/UKav7oHnFGbSq8KXAEacu6DFNWtXNjZ514kI2me0lRjcOytrwhyps/8hbRDon5tkjJ+nILK7YOSC2GInbm2oN22w90EMegs5lDLo18f0dUwF2bbOCBmCu/ZciJX2pmkLLJ0Ivc/fBba6NO4QkZptW+DTSx+Mq0pd7W1rT/0qNALPrpM1G2ydU305ciqmleKuFdQ/dcZfo0P6cwfhBUB4lB8ZYLWw98M71MCefGpQZPFWwf/goq4UFa5Gwe0UtAhlCvy3HQc27WnAgZIRVwhrEasSWHEbnkStRoYDmr7zo3BpDqdjk14qyR6dZJYcmfGzRsEY/TQPgZcYI41VPc2L4CZxE0zouAi09GpEkfXh0o+DAiBCLhjUVEOyeX8fg8MRqY7fSp/ziooN5SbwlCBSrk/ugVUZ50YUf3oVU/9/W4R66/Z5H2L4p0NlcMdoSSSMpDq8HbehQAfj8GsEfo4ZbNKxppa/r3MoFTJ+Jc/FEWjOdDQAXnl1bfDA02KJhTZvnhNS/u86rmsz0DltAoLlkwHzWNgWWPTqz7m0Bv/ZlGehDMc9JR1FKX0EiVX17c4BaxP9IpxJ7YRqlpx2mpQPw2pLDk1TwcDIsGrapJ8MLLYqnWbwaW3UjYIO1wdpgbbA22Dfps+i/md4H2P8EGACbuzme40VKeAAAAABJRU5ErkJggg=="},"6WPV":function(t,e){},PlOi:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADsAAAA8CAYAAADYIMILAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQ1IDc5LjE2MzQ5OSwgMjAxOC8wOC8xMy0xNjo0MDoyMiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTkgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkQ0RTdDRDY3QzdBQjExRTk5N0I1ODYxNEZDNDhBRjdCIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkQ0RTdDRDY4QzdBQjExRTk5N0I1ODYxNEZDNDhBRjdCIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6RDRFN0NENjVDN0FCMTFFOTk3QjU4NjE0RkM0OEFGN0IiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6RDRFN0NENjZDN0FCMTFFOTk3QjU4NjE0RkM0OEFGN0IiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5bBV/FAAAHT0lEQVR42uybeVQTVxSHISshJGwhBJB9FREVEaEiqD1HWnGlYpWq4FLgYI+VulSPHqlUK2JdqiLFXbBUEVyK4lIVBFuVUgVl3xcJu4QkhASSTN/LoikiDRWBxLw/mJmXN5P55t537+++CerBwcGI2gfSMPBPXFycq7KDhoSE5KDUPqCmglXBqmBVsCrYEZNnh7I13Al3RPhdGLSGLpdg4t5Ctp3XrrSwvNYCU3bVne/V1BCRV6mro1koDe0irJZxDtnBP4Pqub1SadzYYvHtW0Qz70iAKYTHCCIgCbpeunFb8sOasyKSCveREqoSZ/gKutrQSjFnLb9Iv0Y09dwJWXt/Juxmj+6sSd9RcsT017oriz2UIkBZLs38TdPEI6ovYBE0v8uqo+jC4ZIYs63A9TUUPhpbLf8zhWA0ad8rYHUUl2zvF47TtTkHDnpgVw+zbkHFmcmn2vNOURU+9VgHZZ8n0CYegKA6TkvXmfmlZNmFlh009IoMQGE1K0RW7um0o98KO936eJ+pwudZ6xU5icY+Mf6jZp/NkfYZTNlWBR5EIEbLKE0UyAQ8w6b7W2PfxcIjRlToTQht6N2Hp4zh2q+picDpWCZJgGkNd9ZF97DqsUqpoNRRWMQ2pGQvhmj4uzhas5yqznmtVVq5CIEtA+7ukM7hbkbl5/Rba8YqrTaGLq3nErZdIkZQjPyE9UpdCNBm7C3B6VgkS915oKJD4aoeqtfOU9IczK6+6z+shYCwh4Oi3wxx5bUW2sLpBtyvxMT3ZA6cd9IxlfEfLQTjiK/nJFqAIdLoFI/N2UTTqez+rq8zJqC1KX3TbRCRoX72ZJZe1iPbLXg55LCMgkQKAN0P9K2jtK+r8Ykas/RKAQAO13bwfynpC4JppPf5rMqbHA3quBPWQY8TZB9O70a0+DiV8TzeF1ZOQGhMA7CXhtSNYZUiBQVp4h7Z/rOvSTazN2E0DTLB/BpDvxG8840nrWV0U3PUlB8A4GE0gZKphggJ3Kana8viHPoNPrTp0bmgNGRLIrPrkLvxi2tB3hAUhSMV2H9V963UMuAh3C8+bHJVwGW4QblHmby+TnoOTtsi12rZg1dWqUnyncGqSNsDABbXXlr40Mwv+Y8+b5poyEcT9J7wOS1eAm6705AHKFCZiJ4wXs/ulqwLogn6AhSOWCsek2/Q3zXMF12/h9GkpsP9ztr0Jf2NBZ5QJlJVfC5NXkU1aLAYLeNyLNn0kqbp1Nze7i3ksazEudKp5b/z6egHovO4DBchj/nW+yMYTfwbWPgOnDJdjTlaQ+rGsu4o26p+mbYCEfZQgHs/k3XhtzWstjldtIMIceyauzpvi7Sj5iRkg032iFiDglapOOsWymsrWQmCSSdl0rpd8klDHF+6D+YkbsQvuHUUXdCn3wzdBVzRVR2NbwQWDad6RVbI9ZC6WYRXAYxszhly2II9uDTgVhpYHctUUFgf6G9sfdrqCSAHRgHX1QdpJwO4W6SWlQ9T3hvqZlRYiiwMUstAzhs0WHU0lg0UD1XQ1erQ3zioVTuKL/6ohiAYgrFbtHXg46SBuj6vrXiWKNoSqQ8G2+PkisYovHaZZOXPCsrBvsYwy67qMouTd8HAQrLx3TJQUJg+yk+N3wC+wwFqX92xgfGDDSuXZXHa5nl8doMPIuTrNqZvcjSeeSS/95jmzIj5CCIgA/djcpvz3EtizNzf0LVOy5MMvXeWS4+5Lc/nFx+iuSJCgYaQxxgDrw9LOKKpZ5ThtN2lwwILpN8jTv0j0X5n9T0vsMnvwzLOoowBgHuYdX59Co+24kywKX8djNgOYktKhAJe+wnZYWGsyawTT99H4JQLljJ5Q21zVkQ5cGGb7vbyuQDsOJZk0vPvMd8cFHBaj/V3HZLd/DqxhZdtQ/gcnIwaAsHok3qS9acd77M8lDv14A2cLnfRszdCgfAiddlMy4B712U/N/DYUiPvtUxmHc8djlpYbrlo7BObCucj3OfUPwwZrFX6EQlLoLlwgHXjJeLbuPaS/0qlhYUNlFyJKAyhVhJsAuvTvhyvtLA4XZtuHeeg78QrfAia8fzM3nd9JTFiYcVz9+gzUF4dFBcmfN2m+1uPKgrw/6pnrYP+SpR5JWHUlLH5ZH3aKpc35OPVJe6sihvaCg0LG3wlAWrPFImF9drzTseWHXMEJV0xXrTEkjzPu6PwwoG6K4tiOmszSAoNC5de7MOqd2tQxx2SzmFeW9Hq8pPjUyA0qyw1CvRhoUKquTg3prMuS0thYaXNZlVuvO64lSGgbqVL3JoGoSGoTI3qWHtxziEgSjQVGlasiE48BdD+eP3RJ4Dw6LPgFvA6nKvPz/xpOMXIoC244fUdeLbBhT+bL7o+G7h2jDQf9wKeUJngOWzAg/6uB64uACufdtzI8aO4bwwg0Cbuh+9WUTitUnUUpkPA7XCuPOcV/T5++jNsC26w0aZHw5q0VG2ENNUPNVWwKlgVrApWBTsceRb+N9OHAPuPAAMANPcpfc4aNzQAAAAASUVORK5CYII="},QcbH:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={data:function(){return{webSocket:null,warningWebsocket:null,platformData:{},perceptionData:{},sideData:{},v2xData:{},isFirstCon:!0,fusionData:{platVeh:0,perVeh:0,nonMotor:0,person:0}}},props:{currentExtent:{type:Array,default:function(){return[]}},spatCount:{type:Number,default:0},signCount:{type:Number,default:0},perceptionData:{type:Object,default:function(){return{}}},warningCount:{type:Number,default:0},vehData:{type:Object,default:function(){return{}}}},computed:{},watch:{vehData:{handler:function(t,e){var i=0;this.vehData.cbox&&(this.platformData=this.vehData.cbox,i+=this.vehData.cbox.veh),this.vehData.obu&&(this.v2xData=this.vehData.obu,i+=this.vehData.obu.veh),this.fusionData.platVeh=i},deep:!0},perceptionData:{handler:function(t,e){var i=0,n=0,r=0;this.perceptionData.vehPer&&(this.perceptionData=this.perceptionData.vehPer,i+=this.perceptionData.vehPer.veh,n+=this.perceptionData.vehPer.noMotor,r+=this.perceptionData.vehPer.person),this.perceptionData.rcu&&(this.sideData=this.perceptionData.rcu,i+=this.perceptionData.rcu.veh,n+=this.perceptionData.rcu.noMotor,r+=this.perceptionData.rcu.person),this.fusionData.perVeh=i,this.fusionData.nonMotor=n,this.fusionData.person=r},deep:!0}},methods:{},mounted:function(){},destroyed:function(){this.warningWebsocket&&this.warningWebsocket.close()}},r={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"fusion-left-style"},[i("div",{staticClass:"fusion-left-main left-style"},[i("p",{staticClass:"c-title",staticStyle:{"margin-top":"0px"}},[t._v("融合结果")]),t._v(" "),i("ul",{staticClass:"perception-style"},[i("li",[i("span",{staticClass:"overview-sign fusion-sign"}),t._v(" "),i("span",[t._v("融合后感知车辆："+t._s(t.fusionData.platVeh+t.fusionData.perVeh||0))])]),t._v(" "),i("li",[i("span",{staticClass:"overview-sign fusion-sign"}),t._v(" "),i("span",[t._v("融合非机动车："+t._s(t.fusionData.nonMotor||0))])]),t._v(" "),i("li",[i("span",{staticClass:"overview-sign fusion-sign"}),t._v(" "),i("span",[t._v("融合后行人："+t._s(t.fusionData.person||0))])])]),t._v(" "),i("p",{staticClass:"c-title"},[t._v("感知数据")]),t._v(" "),i("ul",{staticClass:"perception-style"},[i("li",[i("span",{staticClass:"overview-sign perception-sign"}),t._v(" "),i("span",[t._v("平台直连：车辆 "+t._s(t.platformData.veh||0))])]),t._v(" "),i("li",[i("span",{staticClass:"overview-sign perception-sign"}),t._v(" "),i("span",{staticClass:"fusion-font"},[t._v("路侧识别：车辆 "+t._s(t.sideData.veh||0)+"，行人 "+t._s(t.sideData.person||0)+"，"),i("br"),t._v("    非机动车 "+t._s(t.sideData.noMotor||0))])]),t._v(" "),i("li",[i("span",{staticClass:"overview-sign perception-sign"}),t._v(" "),i("span",[t._v("V2X通讯：车辆 "+t._s(t.v2xData.veh||0))])]),t._v(" "),i("li",[i("span",{staticClass:"overview-sign perception-sign"}),t._v(" "),i("span",{staticClass:"fusion-font"},[t._v("车辆感知：车辆 "+t._s(t.perceptionData.veh||0)+"，行人 "+t._s(t.perceptionData.person||0)+"，"),i("br"),t._v("    非机动车 "+t._s(t.perceptionData.noMotor||0))])])]),t._v(" "),i("p",{staticClass:"c-title"},[t._v("交通数据")]),t._v(" "),i("ul",{staticClass:"perception-style"},[i("li",[i("span",{staticClass:"overview-sign traffic-sign"}),t._v(" "),i("span",[t._v("下发预警信息："+t._s(t.warningCount||0))])]),t._v(" "),i("li",[i("span",{staticClass:"overview-sign traffic-sign"}),t._v(" "),i("span",[t._v("接入红绿灯："+t._s(t.spatCount||0))])]),t._v(" "),i("li",[i("span",{staticClass:"overview-sign traffic-sign"}),t._v(" "),i("span",[t._v("接入交通标志牌："+t._s(t.signCount||0))])])])])])},staticRenderFns:[]};var o=i("VU/8")(n,r,!1,function(t){i("2v/C")},"data-v-736a9769",null).exports,s=i("mvHQ"),a=i.n(s),l=i("M4fF"),u=i.n(l),h=(i("ktr9"),"function"==typeof Object.assign?Object.assign:function(t,e){var i=arguments;if(void 0===t||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(t),r=1,o=arguments.length;r<o;++r){var s=i[r];if(void 0!==s&&null!==s)for(var a in s)s.hasOwnProperty(a)&&(n[a]=s[a])}return n});function c(t){for(var e in t)delete t[e]}function p(t){var e=[];for(var i in t)e.push(t[i]);return e}function f(t){var e;for(e in t)return!1;return!e}function d(t,e,i,n){for(var r,o=0,s=t.length;o<s;++o)if((r=t[o]).listener===e&&r.bindTo===i)return n&&(r.deleteIndex=o),r}function v(t,e){var i=g(t);return i?i[e]:void 0}function g(t,e){var i=t.ol_lm;return!i&&e&&(i=t.ol_lm={}),i}function m(t,e){var i=v(t,e);if(i){for(var n=0,r=i.length;n<r;++n)t.removeEventListener(e,i[n].boundListener),c(i[n]);i.length=0;var o=g(t);o&&(delete o[e],0===Object.keys(o).length&&function(t){delete t.ol_lm}(t))}}function y(t,e,i,n,r){var o=g(t,!0),s=o[e];s||(s=o[e]=[]);var a=d(s,i,n,!1);return a?r||(a.callOnce=!1):(a={bindTo:n,callOnce:!!r,listener:i,target:t,type:e},t.addEventListener(e,function(t){var e=function(e){var i=t.listener,n=t.bindTo||t.target;return t.callOnce&&b(t),i.call(n,e)};return t.boundListener=e,e}(a)),s.push(a)),a}function _(t,e,i,n){return y(t,e,i,n,!0)}function x(t,e,i,n){var r=v(t,e);if(r){var o=d(r,i,n,!0);o&&b(o)}}function b(t){if(t&&t.target){t.target.removeEventListener(t.type,t.boundListener);var e=v(t.target,t.type);if(e){var i="deleteIndex"in t?t.deleteIndex:e.indexOf(t);-1!==i&&e.splice(i,1),0===e.length&&m(t.target,t.type)}c(t)}}var E=function(){this.disposed_=!1};E.prototype.dispose=function(){this.disposed_||(this.disposed_=!0,this.disposeInternal())},E.prototype.disposeInternal=function(){};var w=E;function j(){return!0}function C(){return!1}function S(){}var T=function(t){this.propagationStopped,this.type=t,this.target=null};function R(t){t.stopPropagation()}T.prototype.preventDefault=function(){this.propagationStopped=!0},T.prototype.stopPropagation=function(){this.propagationStopped=!0};var I=T,O=function(t){function e(){t.call(this),this.pendingRemovals_={},this.dispatching_={},this.listeners_={}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.addEventListener=function(t,e){var i=this.listeners_[t];i||(i=this.listeners_[t]=[]),-1===i.indexOf(e)&&i.push(e)},e.prototype.dispatchEvent=function(t){var e="string"==typeof t?new I(t):t,i=e.type;e.target=this;var n,r=this.listeners_[i];if(r){i in this.dispatching_||(this.dispatching_[i]=0,this.pendingRemovals_[i]=0),++this.dispatching_[i];for(var o=0,s=r.length;o<s;++o)if(!1===r[o].call(this,e)||e.propagationStopped){n=!1;break}if(--this.dispatching_[i],0===this.dispatching_[i]){var a=this.pendingRemovals_[i];for(delete this.pendingRemovals_[i];a--;)this.removeEventListener(i,S);delete this.dispatching_[i]}return n}},e.prototype.disposeInternal=function(){!function(t){var e=g(t);if(e)for(var i in e)m(t,i)}(this)},e.prototype.getListeners=function(t){return this.listeners_[t]},e.prototype.hasListener=function(t){return t?t in this.listeners_:Object.keys(this.listeners_).length>0},e.prototype.removeEventListener=function(t,e){var i=this.listeners_[t];if(i){var n=i.indexOf(e);t in this.pendingRemovals_?(i[n]=S,++this.pendingRemovals_[t]):(i.splice(n,1),0===i.length&&delete this.listeners_[t])}},e}(w),A={CHANGE:"change",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",ERROR:"error",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",MOUSEDOWN:"mousedown",MOUSEMOVE:"mousemove",MOUSEOUT:"mouseout",MOUSEUP:"mouseup",MOUSEWHEEL:"mousewheel",MSPOINTERDOWN:"MSPointerDown",RESIZE:"resize",TOUCHSTART:"touchstart",TOUCHMOVE:"touchmove",TOUCHEND:"touchend",WHEEL:"wheel"};var L=function(t){function e(){t.call(this),this.revision_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.changed=function(){++this.revision_,this.dispatchEvent(A.CHANGE)},e.prototype.getRevision=function(){return this.revision_},e.prototype.on=function(t,e){if(Array.isArray(t)){for(var i=t.length,n=new Array(i),r=0;r<i;++r)n[r]=y(this,t[r],e);return n}return y(this,t,e)},e.prototype.once=function(t,e){if(Array.isArray(t)){for(var i=t.length,n=new Array(i),r=0;r<i;++r)n[r]=_(this,t[r],e);return n}return _(this,t,e)},e.prototype.un=function(t,e){if(Array.isArray(t))for(var i=0,n=t.length;i<n;++i)x(this,t[i],e);else x(this,t,e)},e}(O);function M(){return function(){throw new Error("Unimplemented abstract method.")}()}var k=0;function P(t){return t.ol_uid||(t.ol_uid=String(++k))}var D="5.3.3",F=function(t){function e(e){var i="Assertion failed. See https://openlayers.org/en/"+("latest"===D?D:"v"+D.split("-")[0])+"/doc/errors/#"+e+" for details.";t.call(this,i),this.code=e,this.name="AssertionError",this.message=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error),N={ADD:"add",REMOVE:"remove"},G="propertychange",W=function(t){function e(e,i,n){t.call(this,e),this.key=i,this.oldValue=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(I),z={};function B(t){return z.hasOwnProperty(t)?z[t]:z[t]="change:"+t}var Y=function(t){function e(e){t.call(this),P(this),this.values_={},void 0!==e&&this.setProperties(e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t){var e;return this.values_.hasOwnProperty(t)&&(e=this.values_[t]),e},e.prototype.getKeys=function(){return Object.keys(this.values_)},e.prototype.getProperties=function(){return h({},this.values_)},e.prototype.notify=function(t,e){var i;i=B(t),this.dispatchEvent(new W(i,t,e)),i=G,this.dispatchEvent(new W(i,t,e))},e.prototype.set=function(t,e,i){if(i)this.values_[t]=e;else{var n=this.values_[t];this.values_[t]=e,n!==e&&this.notify(t,n)}},e.prototype.setProperties=function(t,e){for(var i in t)this.set(i,t[i],e)},e.prototype.unset=function(t,e){if(t in this.values_){var i=this.values_[t];delete this.values_[t],e||this.notify(t,i)}},e}(L),U="length",V=function(t){function e(e,i){t.call(this,e),this.element=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(I),X=function(t){function e(e,i){t.call(this);var n=i||{};if(this.unique_=!!n.unique,this.array_=e||[],this.unique_)for(var r=0,o=this.array_.length;r<o;++r)this.assertUnique_(this.array_[r],r);this.updateLength_()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clear=function(){for(;this.getLength()>0;)this.pop()},e.prototype.extend=function(t){for(var e=0,i=t.length;e<i;++e)this.push(t[e]);return this},e.prototype.forEach=function(t){for(var e=this.array_,i=0,n=e.length;i<n;++i)t(e[i],i,e)},e.prototype.getArray=function(){return this.array_},e.prototype.item=function(t){return this.array_[t]},e.prototype.getLength=function(){return this.get(U)},e.prototype.insertAt=function(t,e){this.unique_&&this.assertUnique_(e),this.array_.splice(t,0,e),this.updateLength_(),this.dispatchEvent(new V(N.ADD,e))},e.prototype.pop=function(){return this.removeAt(this.getLength()-1)},e.prototype.push=function(t){this.unique_&&this.assertUnique_(t);var e=this.getLength();return this.insertAt(e,t),this.getLength()},e.prototype.remove=function(t){for(var e=this.array_,i=0,n=e.length;i<n;++i)if(e[i]===t)return this.removeAt(i)},e.prototype.removeAt=function(t){var e=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new V(N.REMOVE,e)),e},e.prototype.setAt=function(t,e){var i=this.getLength();if(t<i){this.unique_&&this.assertUnique_(e,t);var n=this.array_[t];this.array_[t]=e,this.dispatchEvent(new V(N.REMOVE,n)),this.dispatchEvent(new V(N.ADD,e))}else{for(var r=i;r<t;++r)this.insertAt(r,void 0);this.insertAt(t,e)}},e.prototype.updateLength_=function(){this.set(U,this.array_.length)},e.prototype.assertUnique_=function(t,e){for(var i=0,n=this.array_.length;i<n;++i)if(this.array_[i]===t&&i!==e)throw new F(58)},e}(Y),H=function(t){function e(e,i,n){t.call(this,e),this.map=i,this.frameState=void 0!==n?n:null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(I),Z=function(t){function e(e,i,n,r,o){t.call(this,e,i,o),this.originalEvent=n,this.pixel=i.getEventPixel(n),this.coordinate=i.getCoordinateFromPixel(this.pixel),this.dragging=void 0!==r&&r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.preventDefault=function(){t.prototype.preventDefault.call(this),this.originalEvent.preventDefault()},e.prototype.stopPropagation=function(){t.prototype.stopPropagation.call(this),this.originalEvent.stopPropagation()},e}(H),K=["experimental-webgl","webgl","webkit-3d","moz-webgl"];var J;if("undefined"!=typeof window&&"WebGLRenderingContext"in window)try{var q=function(t,e){for(var i=K.length,n=0;n<i;++n)try{var r=t.getContext(K[n],e);if(r)return r}catch(t){}return null}(document.createElement("canvas"),{failIfMajorPerformanceCaveat:!0});q&&(!0,J=q.getParameter(q.MAX_TEXTURE_SIZE),q.getSupportedExtensions())}catch(t){}var Q="undefined"!=typeof navigator?navigator.userAgent.toLowerCase():"",$=-1!==Q.indexOf("firefox"),tt=-1!==Q.indexOf("safari")&&-1==Q.indexOf("chrom"),et=-1!==Q.indexOf("webkit")&&-1==Q.indexOf("edge"),it=-1!==Q.indexOf("macintosh"),nt=window.devicePixelRatio||1,rt=function(){var t=!1;try{t=!!document.createElement("canvas").getContext("2d").setLineDash}catch(t){}return t}(),ot=(navigator,"ontouchstart"in window),st="PointerEvent"in window,at=!!navigator.msPointerEnabled,lt={SINGLECLICK:"singleclick",CLICK:A.CLICK,DBLCLICK:A.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},ut=function(t){function e(e,i,n,r,o){t.call(this,e,i,n.originalEvent,r,o),this.pointerEvent=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Z),ht={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},ct=function(t,e){this.dispatcher=t,this.mapping_=e};ct.prototype.getEvents=function(){return Object.keys(this.mapping_)},ct.prototype.getHandlerForEvent=function(t){return this.mapping_[t]};var pt=ct,ft=1,dt="mouse";function vt(t){if(!this.isEventSimulatedFromTouch_(t)){ft.toString()in this.pointerMap&&this.cancel(t);var e=xt(t,this.dispatcher);this.pointerMap[ft.toString()]=t,this.dispatcher.down(e,t)}}function gt(t){if(!this.isEventSimulatedFromTouch_(t)){var e=xt(t,this.dispatcher);this.dispatcher.move(e,t)}}function mt(t){if(!this.isEventSimulatedFromTouch_(t)){var e=this.pointerMap[ft.toString()];if(e&&e.button===t.button){var i=xt(t,this.dispatcher);this.dispatcher.up(i,t),this.cleanupMouse()}}}function yt(t){if(!this.isEventSimulatedFromTouch_(t)){var e=xt(t,this.dispatcher);this.dispatcher.enterOver(e,t)}}function _t(t){if(!this.isEventSimulatedFromTouch_(t)){var e=xt(t,this.dispatcher);this.dispatcher.leaveOut(e,t)}}function xt(t,e){var i=e.cloneEvent(t,t),n=i.preventDefault;return i.preventDefault=function(){t.preventDefault(),n()},i.pointerId=ft,i.isPrimary=!0,i.pointerType=dt,i}var bt=function(t){function e(e){var i={mousedown:vt,mousemove:gt,mouseup:mt,mouseover:yt,mouseout:_t};t.call(this,e,i),this.pointerMap=e.pointerMap,this.lastTouches=[]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isEventSimulatedFromTouch_=function(t){for(var e=this.lastTouches,i=t.clientX,n=t.clientY,r=0,o=e.length,s=void 0;r<o&&(s=e[r]);r++){var a=Math.abs(i-s[0]),l=Math.abs(n-s[1]);if(a<=25&&l<=25)return!0}return!1},e.prototype.cancel=function(t){var e=xt(t,this.dispatcher);this.dispatcher.cancel(e,t),this.cleanupMouse()},e.prototype.cleanupMouse=function(){delete this.pointerMap[ft.toString()]},e}(pt),Et=["","unavailable","touch","pen","mouse"];function wt(t){this.pointerMap[t.pointerId.toString()]=t;var e=this.prepareEvent_(t);this.dispatcher.down(e,t)}function jt(t){var e=this.prepareEvent_(t);this.dispatcher.move(e,t)}function Ct(t){var e=this.prepareEvent_(t);this.dispatcher.up(e,t),this.cleanup(t.pointerId)}function St(t){var e=this.prepareEvent_(t);this.dispatcher.leaveOut(e,t)}function Tt(t){var e=this.prepareEvent_(t);this.dispatcher.enterOver(e,t)}function Rt(t){var e=this.prepareEvent_(t);this.dispatcher.cancel(e,t),this.cleanup(t.pointerId)}function It(t){var e=this.dispatcher.makeEvent("lostpointercapture",t,t);this.dispatcher.dispatchEvent(e)}function Ot(t){var e=this.dispatcher.makeEvent("gotpointercapture",t,t);this.dispatcher.dispatchEvent(e)}var At=function(t){function e(e){var i={MSPointerDown:wt,MSPointerMove:jt,MSPointerUp:Ct,MSPointerOut:St,MSPointerOver:Tt,MSPointerCancel:Rt,MSGotPointerCapture:Ot,MSLostPointerCapture:It};t.call(this,e,i),this.pointerMap=e.pointerMap}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.prepareEvent_=function(t){var e=t;return"number"==typeof t.pointerType&&((e=this.dispatcher.cloneEvent(t,t)).pointerType=Et[t.pointerType]),e},e.prototype.cleanup=function(t){delete this.pointerMap[t.toString()]},e}(pt);function Lt(t){this.dispatcher.fireNativeEvent(t)}function Mt(t){this.dispatcher.fireNativeEvent(t)}function kt(t){this.dispatcher.fireNativeEvent(t)}function Pt(t){this.dispatcher.fireNativeEvent(t)}function Dt(t){this.dispatcher.fireNativeEvent(t)}function Ft(t){this.dispatcher.fireNativeEvent(t)}function Nt(t){this.dispatcher.fireNativeEvent(t)}function Gt(t){this.dispatcher.fireNativeEvent(t)}var Wt=function(t){function e(e){var i={pointerdown:Lt,pointermove:Mt,pointerup:kt,pointerout:Pt,pointerover:Dt,pointercancel:Ft,gotpointercapture:Gt,lostpointercapture:Nt};t.call(this,e,i)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(pt),zt=!1,Bt=function(t){function e(e,i,n){t.call(this,e),this.originalEvent=i;var r=n||{};this.buttons=function(t){var e;if(t.buttons||zt)e=t.buttons;else switch(t.which){case 1:e=1;break;case 2:e=4;break;case 3:e=2;break;default:e=0}return e}(r),this.pressure=function(t,e){var i=0;i=t.pressure?t.pressure:e?.5:0;return i}(r,this.buttons),this.bubbles="bubbles"in r&&r.bubbles,this.cancelable="cancelable"in r&&r.cancelable,this.view="view"in r?r.view:null,this.detail="detail"in r?r.detail:null,this.screenX="screenX"in r?r.screenX:0,this.screenY="screenY"in r?r.screenY:0,this.clientX="clientX"in r?r.clientX:0,this.clientY="clientY"in r?r.clientY:0,this.ctrlKey="ctrlKey"in r&&r.ctrlKey,this.altKey="altKey"in r&&r.altKey,this.shiftKey="shiftKey"in r&&r.shiftKey,this.metaKey="metaKey"in r&&r.metaKey,this.button="button"in r?r.button:0,this.relatedTarget="relatedTarget"in r?r.relatedTarget:null,this.pointerId="pointerId"in r?r.pointerId:0,this.width="width"in r?r.width:0,this.height="height"in r?r.height:0,this.tiltX="tiltX"in r?r.tiltX:0,this.tiltY="tiltY"in r?r.tiltY:0,this.pointerType="pointerType"in r?r.pointerType:"",this.hwTimestamp="hwTimestamp"in r?r.hwTimestamp:0,this.isPrimary="isPrimary"in r&&r.isPrimary,i.preventDefault&&(this.preventDefault=function(){i.preventDefault()})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(I);!function(){try{var t=new MouseEvent("click",{buttons:1});zt=1===t.buttons}catch(t){}}();var Yt=Bt;function Ut(t,e){return t>e?1:t<e?-1:0}function Vt(t,e){return t.indexOf(e)>=0}function Xt(t,e,i){var n,r=t.length;if(t[0]<=e)return 0;if(e<=t[r-1])return r-1;if(i>0){for(n=1;n<r;++n)if(t[n]<e)return n-1}else if(i<0){for(n=1;n<r;++n)if(t[n]<=e)return n}else for(n=1;n<r;++n){if(t[n]==e)return n;if(t[n]<e)return t[n-1]-e<e-t[n]?n-1:n}return r-1}function Ht(t,e,i){for(;e<i;){var n=t[e];t[e]=t[i],t[i]=n,++e,--i}}function Zt(t,e){for(var i=Array.isArray(e)?e:[e],n=i.length,r=0;r<n;r++)t[t.length]=i[r]}function Kt(t,e){var i=t.length;if(i!==e.length)return!1;for(var n=0;n<i;n++)if(t[n]!==e[n])return!1;return!0}function Jt(t){this.vacuumTouches_(t),this.setPrimaryTouch_(t.changedTouches[0]),this.dedupSynthMouse_(t),this.clickCount_++,this.processTouches_(t,this.overDown_)}function qt(t){this.processTouches_(t,this.moveOverOut_)}function Qt(t){this.dedupSynthMouse_(t),this.processTouches_(t,this.upOut_)}function $t(t){this.processTouches_(t,this.cancelOut_)}var te=function(t){function e(e,i){var n={touchstart:Jt,touchmove:qt,touchend:Qt,touchcancel:$t};t.call(this,e,n),this.pointerMap=e.pointerMap,this.mouseSource=i,this.firstTouchId_=void 0,this.clickCount_=0,this.resetId_,this.dedupTimeout_=2500}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isPrimaryTouch_=function(t){return this.firstTouchId_===t.identifier},e.prototype.setPrimaryTouch_=function(t){var e=Object.keys(this.pointerMap).length;(0===e||1===e&&ft.toString()in this.pointerMap)&&(this.firstTouchId_=t.identifier,this.cancelResetClickCount_())},e.prototype.removePrimaryPointer_=function(t){t.isPrimary&&(this.firstTouchId_=void 0,this.resetClickCount_())},e.prototype.resetClickCount_=function(){this.resetId_=setTimeout(this.resetClickCountHandler_.bind(this),200)},e.prototype.resetClickCountHandler_=function(){this.clickCount_=0,this.resetId_=void 0},e.prototype.cancelResetClickCount_=function(){void 0!==this.resetId_&&clearTimeout(this.resetId_)},e.prototype.touchToPointer_=function(t,e){var i=this.dispatcher.cloneEvent(t,e);return i.pointerId=e.identifier+2,i.bubbles=!0,i.cancelable=!0,i.detail=this.clickCount_,i.button=0,i.buttons=1,i.width=e.radiusX||0,i.height=e.radiusY||0,i.pressure=e.force||.5,i.isPrimary=this.isPrimaryTouch_(e),i.pointerType="touch",i.clientX=e.clientX,i.clientY=e.clientY,i.screenX=e.screenX,i.screenY=e.screenY,i},e.prototype.processTouches_=function(t,e){var i=Array.prototype.slice.call(t.changedTouches),n=i.length;function r(){t.preventDefault()}for(var o=0;o<n;++o){var s=this.touchToPointer_(t,i[o]);s.preventDefault=r,e.call(this,t,s)}},e.prototype.findTouch_=function(t,e){for(var i=t.length,n=0;n<i;n++){if(t[n].identifier===e)return!0}return!1},e.prototype.vacuumTouches_=function(t){var e=t.touches,i=Object.keys(this.pointerMap),n=i.length;if(n>=e.length){for(var r=[],o=0;o<n;++o){var s=Number(i[o]),a=this.pointerMap[s];s==ft||this.findTouch_(e,s-2)||r.push(a.out)}for(var l=0;l<r.length;++l)this.cancelOut_(t,r[l])}},e.prototype.overDown_=function(t,e){this.pointerMap[e.pointerId]={target:e.target,out:e,outTarget:e.target},this.dispatcher.over(e,t),this.dispatcher.enter(e,t),this.dispatcher.down(e,t)},e.prototype.moveOverOut_=function(t,e){var i=e,n=this.pointerMap[i.pointerId];if(n){var r=n.out,o=n.outTarget;this.dispatcher.move(i,t),r&&o!==i.target&&(r.relatedTarget=i.target,i.relatedTarget=o,r.target=o,i.target?(this.dispatcher.leaveOut(r,t),this.dispatcher.enterOver(i,t)):(i.target=o,i.relatedTarget=null,this.cancelOut_(t,i))),n.out=i,n.outTarget=i.target}},e.prototype.upOut_=function(t,e){this.dispatcher.up(e,t),this.dispatcher.out(e,t),this.dispatcher.leave(e,t),this.cleanUpPointer_(e)},e.prototype.cancelOut_=function(t,e){this.dispatcher.cancel(e,t),this.dispatcher.out(e,t),this.dispatcher.leave(e,t),this.cleanUpPointer_(e)},e.prototype.cleanUpPointer_=function(t){delete this.pointerMap[t.pointerId],this.removePrimaryPointer_(t)},e.prototype.dedupSynthMouse_=function(t){var e=this.mouseSource.lastTouches,i=t.changedTouches[0];if(this.isPrimaryTouch_(i)){var n=[i.clientX,i.clientY];e.push(n),setTimeout(function(){var t,i,r;i=n,r=(t=e).indexOf(i),r>-1&&t.splice(r,1)},this.dedupTimeout_)}},e}(pt),ee=[["bubbles",!1],["cancelable",!1],["view",null],["detail",null],["screenX",0],["screenY",0],["clientX",0],["clientY",0],["ctrlKey",!1],["altKey",!1],["shiftKey",!1],["metaKey",!1],["button",0],["relatedTarget",null],["buttons",0],["pointerId",0],["width",0],["height",0],["pressure",0],["tiltX",0],["tiltY",0],["pointerType",""],["hwTimestamp",0],["isPrimary",!1],["type",""],["target",null],["currentTarget",null],["which",0]],ie=function(t){function e(e){t.call(this),this.element_=e,this.pointerMap={},this.eventMap_={},this.eventSourceList_=[],this.registerSources()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.registerSources=function(){if(st)this.registerSource("native",new Wt(this));else if(at)this.registerSource("ms",new At(this));else{var t=new bt(this);this.registerSource("mouse",t),ot&&this.registerSource("touch",new te(this,t))}this.register_()},e.prototype.registerSource=function(t,e){var i=e,n=i.getEvents();n&&(n.forEach(function(t){var e=i.getHandlerForEvent(t);e&&(this.eventMap_[t]=e.bind(i))}.bind(this)),this.eventSourceList_.push(i))},e.prototype.register_=function(){for(var t=this.eventSourceList_.length,e=0;e<t;e++){var i=this.eventSourceList_[e];this.addEvents_(i.getEvents())}},e.prototype.unregister_=function(){for(var t=this.eventSourceList_.length,e=0;e<t;e++){var i=this.eventSourceList_[e];this.removeEvents_(i.getEvents())}},e.prototype.eventHandler_=function(t){var e=t.type,i=this.eventMap_[e];i&&i(t)},e.prototype.addEvents_=function(t){t.forEach(function(t){y(this.element_,t,this.eventHandler_,this)}.bind(this))},e.prototype.removeEvents_=function(t){t.forEach(function(t){x(this.element_,t,this.eventHandler_,this)}.bind(this))},e.prototype.cloneEvent=function(t,e){for(var i={},n=0,r=ee.length;n<r;n++){var o=ee[n][0];i[o]=t[o]||e[o]||ee[n][1]}return i},e.prototype.down=function(t,e){this.fireEvent(ht.POINTERDOWN,t,e)},e.prototype.move=function(t,e){this.fireEvent(ht.POINTERMOVE,t,e)},e.prototype.up=function(t,e){this.fireEvent(ht.POINTERUP,t,e)},e.prototype.enter=function(t,e){t.bubbles=!1,this.fireEvent(ht.POINTERENTER,t,e)},e.prototype.leave=function(t,e){t.bubbles=!1,this.fireEvent(ht.POINTERLEAVE,t,e)},e.prototype.over=function(t,e){t.bubbles=!0,this.fireEvent(ht.POINTEROVER,t,e)},e.prototype.out=function(t,e){t.bubbles=!0,this.fireEvent(ht.POINTEROUT,t,e)},e.prototype.cancel=function(t,e){this.fireEvent(ht.POINTERCANCEL,t,e)},e.prototype.leaveOut=function(t,e){this.out(t,e),this.contains_(t.target,t.relatedTarget)||this.leave(t,e)},e.prototype.enterOver=function(t,e){this.over(t,e),this.contains_(t.target,t.relatedTarget)||this.enter(t,e)},e.prototype.contains_=function(t,e){return!(!t||!e)&&t.contains(e)},e.prototype.makeEvent=function(t,e,i){return new Yt(t,i,e)},e.prototype.fireEvent=function(t,e,i){var n=this.makeEvent(t,e,i);this.dispatchEvent(n)},e.prototype.fireNativeEvent=function(t){var e=this.makeEvent(t.type,t,t);this.dispatchEvent(e)},e.prototype.wrapMouseEvent=function(t,e){return this.makeEvent(t,xt(e,this),e)},e.prototype.disposeInternal=function(){this.unregister_(),t.prototype.disposeInternal.call(this)},e}(O),ne=function(t){function e(e,i){t.call(this),this.map_=e,this.clickTimeoutId_,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=i?i*nt:nt,this.down_=null;var n=this.map_.getViewport();this.activePointers_=0,this.trackedTouches_={},this.pointerEventHandler_=new ie(n),this.documentPointerEventHandler_=null,this.pointerdownListenerKey_=y(this.pointerEventHandler_,ht.POINTERDOWN,this.handlePointerDown_,this),this.relayedListenerKey_=y(this.pointerEventHandler_,ht.POINTERMOVE,this.relayEvent_,this)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.emulateClick_=function(t){var e=new ut(lt.CLICK,this.map_,t);this.dispatchEvent(e),void 0!==this.clickTimeoutId_?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,e=new ut(lt.DBLCLICK,this.map_,t),this.dispatchEvent(e)):this.clickTimeoutId_=setTimeout(function(){this.clickTimeoutId_=void 0;var e=new ut(lt.SINGLECLICK,this.map_,t);this.dispatchEvent(e)}.bind(this),250)},e.prototype.updateActivePointers_=function(t){var e=t;e.type==lt.POINTERUP||e.type==lt.POINTERCANCEL?delete this.trackedTouches_[e.pointerId]:e.type==lt.POINTERDOWN&&(this.trackedTouches_[e.pointerId]=!0),this.activePointers_=Object.keys(this.trackedTouches_).length},e.prototype.handlePointerUp_=function(t){this.updateActivePointers_(t);var e=new ut(lt.POINTERUP,this.map_,t);this.dispatchEvent(e),e.propagationStopped||this.dragging_||!this.isMouseActionButton_(t)||this.emulateClick_(this.down_),0===this.activePointers_&&(this.dragListenerKeys_.forEach(b),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null,this.documentPointerEventHandler_.dispose(),this.documentPointerEventHandler_=null)},e.prototype.isMouseActionButton_=function(t){return 0===t.button},e.prototype.handlePointerDown_=function(t){this.updateActivePointers_(t);var e=new ut(lt.POINTERDOWN,this.map_,t);this.dispatchEvent(e),this.down_=t,0===this.dragListenerKeys_.length&&(this.documentPointerEventHandler_=new ie(document),this.dragListenerKeys_.push(y(this.documentPointerEventHandler_,lt.POINTERMOVE,this.handlePointerMove_,this),y(this.documentPointerEventHandler_,lt.POINTERUP,this.handlePointerUp_,this),y(this.pointerEventHandler_,lt.POINTERCANCEL,this.handlePointerUp_,this)))},e.prototype.handlePointerMove_=function(t){if(this.isMoving_(t)){this.dragging_=!0;var e=new ut(lt.POINTERDRAG,this.map_,t,this.dragging_);this.dispatchEvent(e)}t.preventDefault()},e.prototype.relayEvent_=function(t){var e=!(!this.down_||!this.isMoving_(t));this.dispatchEvent(new ut(t.type,this.map_,t,e))},e.prototype.isMoving_=function(t){return this.dragging_||Math.abs(t.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(t.clientY-this.down_.clientY)>this.moveTolerance_},e.prototype.disposeInternal=function(){this.relayedListenerKey_&&(b(this.relayedListenerKey_),this.relayedListenerKey_=null),this.pointerdownListenerKey_&&(b(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(b),this.dragListenerKeys_.length=0,this.documentPointerEventHandler_&&(this.documentPointerEventHandler_.dispose(),this.documentPointerEventHandler_=null),this.pointerEventHandler_&&(this.pointerEventHandler_.dispose(),this.pointerEventHandler_=null),t.prototype.disposeInternal.call(this)},e}(O),re="postrender",oe="movestart",se="moveend",ae={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"},le={POSTCOMPOSE:"postcompose",PRECOMPOSE:"precompose",RENDER:"render",RENDERCOMPLETE:"rendercomplete"},ue={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4,ABORT:5};function he(t,e){if(!t)throw new F(e)}var ce=function(t,e){this.priorityFunction_=t,this.keyFunction_=e,this.elements_=[],this.priorities_=[],this.queuedElements_={}};ce.prototype.clear=function(){this.elements_.length=0,this.priorities_.length=0,c(this.queuedElements_)},ce.prototype.dequeue=function(){var t=this.elements_,e=this.priorities_,i=t[0];1==t.length?(t.length=0,e.length=0):(t[0]=t.pop(),e[0]=e.pop(),this.siftUp_(0));var n=this.keyFunction_(i);return delete this.queuedElements_[n],i},ce.prototype.enqueue=function(t){he(!(this.keyFunction_(t)in this.queuedElements_),31);var e=this.priorityFunction_(t);return e!=1/0&&(this.elements_.push(t),this.priorities_.push(e),this.queuedElements_[this.keyFunction_(t)]=!0,this.siftDown_(0,this.elements_.length-1),!0)},ce.prototype.getCount=function(){return this.elements_.length},ce.prototype.getLeftChildIndex_=function(t){return 2*t+1},ce.prototype.getRightChildIndex_=function(t){return 2*t+2},ce.prototype.getParentIndex_=function(t){return t-1>>1},ce.prototype.heapify_=function(){var t;for(t=(this.elements_.length>>1)-1;t>=0;t--)this.siftUp_(t)},ce.prototype.isEmpty=function(){return 0===this.elements_.length},ce.prototype.isKeyQueued=function(t){return t in this.queuedElements_},ce.prototype.isQueued=function(t){return this.isKeyQueued(this.keyFunction_(t))},ce.prototype.siftUp_=function(t){for(var e=this.elements_,i=this.priorities_,n=e.length,r=e[t],o=i[t],s=t;t<n>>1;){var a=this.getLeftChildIndex_(t),l=this.getRightChildIndex_(t),u=l<n&&i[l]<i[a]?l:a;e[t]=e[u],i[t]=i[u],t=u}e[t]=r,i[t]=o,this.siftDown_(s,t)},ce.prototype.siftDown_=function(t,e){for(var i=this.elements_,n=this.priorities_,r=i[e],o=n[e];e>t;){var s=this.getParentIndex_(e);if(!(n[s]>o))break;i[e]=i[s],n[e]=n[s],e=s}i[e]=r,n[e]=o},ce.prototype.reprioritize=function(){var t,e,i,n=this.priorityFunction_,r=this.elements_,o=this.priorities_,s=0,a=r.length;for(e=0;e<a;++e)(i=n(t=r[e]))==1/0?delete this.queuedElements_[this.keyFunction_(t)]:(o[s]=i,r[s++]=t);r.length=s,o.length=s,this.heapify_()};var pe=function(t){function e(e,i){t.call(this,function(t){return e.apply(null,t)},function(t){return t[0].getKey()}),this.tileChangeCallback_=i,this.tilesLoading_=0,this.tilesLoadingKeys_={}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.enqueue=function(e){var i=t.prototype.enqueue.call(this,e);i&&y(e[0],A.CHANGE,this.handleTileChange,this);return i},e.prototype.getTilesLoading=function(){return this.tilesLoading_},e.prototype.handleTileChange=function(t){var e=t.target,i=e.getState();if(i===ue.LOADED||i===ue.ERROR||i===ue.EMPTY||i===ue.ABORT){x(e,A.CHANGE,this.handleTileChange,this);var n=e.getKey();n in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[n],--this.tilesLoading_),this.tileChangeCallback_()}},e.prototype.loadMoreTiles=function(t,e){for(var i,n,r,o=0,s=!1;this.tilesLoading_<t&&o<e&&this.getCount()>0;)r=(n=this.dequeue()[0]).getKey(),(i=n.getState())===ue.ABORT?s=!0:i!==ue.IDLE||r in this.tilesLoadingKeys_||(this.tilesLoadingKeys_[r]=!0,++this.tilesLoading_,++o,n.load());0===o&&s&&this.tileChangeCallback_()},e}(ce),fe=256;function de(t,e,i){return Math.min(Math.max(t,e),i)}var ve="cosh"in Math?Math.cosh:function(t){var e=Math.exp(t);return(e+1/e)/2};function ge(t,e,i,n,r,o){var s=r-i,a=o-n;if(0!==s||0!==a){var l=((t-i)*s+(e-n)*a)/(s*s+a*a);l>1?(i=r,n=o):l>0&&(i+=s*l,n+=a*l)}return me(t,e,i,n)}function me(t,e,i,n){var r=i-t,o=n-e;return r*r+o*o}function ye(t){return t*Math.PI/180}function _e(t,e){var i=t%e;return i*e<0?i+e:i}function xe(t,e,i){return t+i*(e-t)}function be(t){return t}function Ee(t,e){return void 0!==t?0:void 0}function we(t,e){return void 0!==t?t+e:void 0}var je=0,Ce=1,Se="center",Te="resolution",Re="rotation";function Ie(t,e){return t[0]+=e[0],t[1]+=e[1],t}function Oe(t,e){for(var i=!0,n=t.length-1;n>=0;--n)if(t[n]!=e[n]){i=!1;break}return i}function Ae(t,e){var i=Math.cos(e),n=Math.sin(e),r=t[0]*i-t[1]*n,o=t[1]*i+t[0]*n;return t[0]=r,t[1]=o,t}function Le(t,e){return t[0]*=e,t[1]*=e,t}function Me(t){return Math.pow(t,3)}function ke(t){return 1-Me(1-t)}function Pe(t){return 3*t*t-2*t*t*t}function De(t){return t}var Fe={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function Ne(t){for(var e=Xe(),i=0,n=t.length;i<n;++i)$e(e,t[i]);return e}function Ge(t,e,i){return i?(i[0]=t[0]-e,i[1]=t[1]-e,i[2]=t[2]+e,i[3]=t[3]+e,i):[t[0]-e,t[1]-e,t[2]+e,t[3]+e]}function We(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t.slice()}function ze(t,e,i){var n,r;return(n=e<t[0]?t[0]-e:t[2]<e?e-t[2]:0)*n+(r=i<t[1]?t[1]-i:t[3]<i?i-t[3]:0)*r}function Be(t,e){return Ue(t,e[0],e[1])}function Ye(t,e){return t[0]<=e[0]&&e[2]<=t[2]&&t[1]<=e[1]&&e[3]<=t[3]}function Ue(t,e,i){return t[0]<=e&&e<=t[2]&&t[1]<=i&&i<=t[3]}function Ve(t,e){var i=t[0],n=t[1],r=t[2],o=t[3],s=e[0],a=e[1],l=Fe.UNKNOWN;return s<i?l|=Fe.LEFT:s>r&&(l|=Fe.RIGHT),a<n?l|=Fe.BELOW:a>o&&(l|=Fe.ABOVE),l===Fe.UNKNOWN&&(l=Fe.INTERSECTING),l}function Xe(){return[1/0,1/0,-1/0,-1/0]}function He(t,e,i,n,r){return r?(r[0]=t,r[1]=e,r[2]=i,r[3]=n,r):[t,e,i,n]}function Ze(t){return He(1/0,1/0,-1/0,-1/0,t)}function Ke(t,e){var i=t[0],n=t[1];return He(i,n,i,n,e)}function Je(t,e,i,n,r){return ei(Ze(r),t,e,i,n)}function qe(t,e){return t[0]==e[0]&&t[2]==e[2]&&t[1]==e[1]&&t[3]==e[3]}function Qe(t,e){return e[0]<t[0]&&(t[0]=e[0]),e[2]>t[2]&&(t[2]=e[2]),e[1]<t[1]&&(t[1]=e[1]),e[3]>t[3]&&(t[3]=e[3]),t}function $e(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function ti(t,e){for(var i=0,n=e.length;i<n;++i)$e(t,e[i]);return t}function ei(t,e,i,n,r){for(;i<n;i+=r)ii(t,e[i],e[i+1]);return t}function ii(t,e,i){t[0]=Math.min(t[0],e),t[1]=Math.min(t[1],i),t[2]=Math.max(t[2],e),t[3]=Math.max(t[3],i)}function ni(t,e,i){var n;return(n=e.call(i,ri(t)))?n:(n=e.call(i,oi(t)))?n:(n=e.call(i,ci(t)))?n:(n=e.call(i,hi(t)))||!1}function ri(t){return[t[0],t[1]]}function oi(t){return[t[2],t[1]]}function si(t){return[(t[0]+t[2])/2,(t[1]+t[3])/2]}function ai(t,e,i,n,r){var o=e*n[0]/2,s=e*n[1]/2,a=Math.cos(i),l=Math.sin(i),u=o*a,h=o*l,c=s*a,p=s*l,f=t[0],d=t[1],v=f-u+p,g=f-u-p,m=f+u-p,y=f+u+p,_=d-h-c,x=d-h+c,b=d+h+c,E=d+h-c;return He(Math.min(v,g,m,y),Math.min(_,x,b,E),Math.max(v,g,m,y),Math.max(_,x,b,E),r)}function li(t){return t[3]-t[1]}function ui(t,e,i){var n=i||[1/0,1/0,-1/0,-1/0];return fi(t,e)?(t[0]>e[0]?n[0]=t[0]:n[0]=e[0],t[1]>e[1]?n[1]=t[1]:n[1]=e[1],t[2]<e[2]?n[2]=t[2]:n[2]=e[2],t[3]<e[3]?n[3]=t[3]:n[3]=e[3]):Ze(n),n}function hi(t){return[t[0],t[3]]}function ci(t){return[t[2],t[3]]}function pi(t){return t[2]-t[0]}function fi(t,e){return t[0]<=e[2]&&t[2]>=e[0]&&t[1]<=e[3]&&t[3]>=e[1]}function di(t){return t[2]<t[0]||t[3]<t[1]}function vi(t,e){var i=(t[2]-t[0])/2*(e-1),n=(t[3]-t[1])/2*(e-1);t[0]-=i,t[2]+=i,t[1]-=n,t[3]+=n}function gi(t,e,i){var n=[t[0],t[1],t[0],t[3],t[2],t[1],t[2],t[3]];return e(n,n,2),function(t,e,i){return He(Math.min.apply(null,t),Math.min.apply(null,e),Math.max.apply(null,t),Math.max.apply(null,e),i)}([n[0],n[2],n[4],n[6]],[n[1],n[3],n[5],n[7]],i)}var mi={POINT:"Point",LINE_STRING:"LineString",LINEAR_RING:"LinearRing",POLYGON:"Polygon",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon",GEOMETRY_COLLECTION:"GeometryCollection",CIRCLE:"Circle"},yi={XY:"XY",XYZ:"XYZ",XYM:"XYM",XYZM:"XYZM"};function _i(t,e,i,n,r,o){for(var s=o||[],a=0,l=e;l<i;l+=n){var u=t[l],h=t[l+1];s[a++]=r[0]*u+r[2]*h+r[4],s[a++]=r[1]*u+r[3]*h+r[5]}return o&&s.length!=a&&(s.length=a),s}
/**
 * @license
 * Latitude/longitude spherical geodesy formulae taken from
 * http://www.movable-type.co.uk/scripts/latlong.html
 * Licensed under CC-BY-3.0.
 */
var xi=6371008.8;function bi(t,e,i){var n=i||xi,r=ye(t[1]),o=ye(e[1]),s=(o-r)/2,a=ye(e[0]-t[0])/2,l=Math.sin(s)*Math.sin(s)+Math.sin(a)*Math.sin(a)*Math.cos(r)*Math.cos(o);return 2*n*Math.atan2(Math.sqrt(l),Math.sqrt(1-l))}var Ei={DEGREES:"degrees",FEET:"ft",METERS:"m",PIXELS:"pixels",TILE_PIXELS:"tile-pixels",USFEET:"us-ft"},wi={};wi[Ei.DEGREES]=2*Math.PI*6370997/360,wi[Ei.FEET]=.3048,wi[Ei.METERS]=1,wi[Ei.USFEET]=1200/3937;var ji=Ei,Ci=function(t){this.code_=t.code,this.units_=t.units,this.extent_=void 0!==t.extent?t.extent:null,this.worldExtent_=void 0!==t.worldExtent?t.worldExtent:null,this.axisOrientation_=void 0!==t.axisOrientation?t.axisOrientation:"enu",this.global_=void 0!==t.global&&t.global,this.canWrapX_=!(!this.global_||!this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit};Ci.prototype.canWrapX=function(){return this.canWrapX_},Ci.prototype.getCode=function(){return this.code_},Ci.prototype.getExtent=function(){return this.extent_},Ci.prototype.getUnits=function(){return this.units_},Ci.prototype.getMetersPerUnit=function(){return this.metersPerUnit_||wi[this.units_]},Ci.prototype.getWorldExtent=function(){return this.worldExtent_},Ci.prototype.getAxisOrientation=function(){return this.axisOrientation_},Ci.prototype.isGlobal=function(){return this.global_},Ci.prototype.setGlobal=function(t){this.global_=t,this.canWrapX_=!(!t||!this.extent_)},Ci.prototype.getDefaultTileGrid=function(){return this.defaultTileGrid_},Ci.prototype.setDefaultTileGrid=function(t){this.defaultTileGrid_=t},Ci.prototype.setExtent=function(t){this.extent_=t,this.canWrapX_=!(!this.global_||!t)},Ci.prototype.setWorldExtent=function(t){this.worldExtent_=t},Ci.prototype.setGetPointResolution=function(t){this.getPointResolutionFunc_=t},Ci.prototype.getPointResolutionFunc=function(){return this.getPointResolutionFunc_};var Si=Ci,Ti=6378137,Ri=Math.PI*Ti,Ii=[-Ri,-Ri,Ri,Ri],Oi=[-180,-85,180,85],Ai=function(t){function e(e){t.call(this,{code:e,units:ji.METERS,extent:Ii,global:!0,worldExtent:Oi,getPointResolution:function(t,e){return t/ve(e[1]/Ti)}})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Si),Li=[new Ai("EPSG:3857"),new Ai("EPSG:102100"),new Ai("EPSG:102113"),new Ai("EPSG:900913"),new Ai("urn:ogc:def:crs:EPSG:6.18:3:3857"),new Ai("urn:ogc:def:crs:EPSG::3857"),new Ai("http://www.opengis.net/gml/srs/epsg.xml#3857")];function Mi(t,e,i){var n=t.length,r=i>1?i:2,o=e;void 0===o&&(o=r>2?t.slice():new Array(n));for(var s=Ri,a=0;a<n;a+=r){o[a]=s*t[a]/180;var l=Ti*Math.log(Math.tan(Math.PI*(t[a+1]+90)/360));l>s?l=s:l<-s&&(l=-s),o[a+1]=l}return o}function ki(t,e,i){var n=t.length,r=i>1?i:2,o=e;void 0===o&&(o=r>2?t.slice():new Array(n));for(var s=0;s<n;s+=r)o[s]=180*t[s]/Ri,o[s+1]=360*Math.atan(Math.exp(t[s+1]/Ti))/Math.PI-90;return o}var Pi=[-180,-90,180,90],Di=6378137*Math.PI/180,Fi=function(t){function e(e,i){t.call(this,{code:e,units:ji.DEGREES,extent:Pi,axisOrientation:i,global:!0,metersPerUnit:Di,worldExtent:Pi})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Si),Ni=[new Fi("CRS:84"),new Fi("EPSG:4326","neu"),new Fi("urn:ogc:def:crs:EPSG::4326","neu"),new Fi("urn:ogc:def:crs:EPSG:6.6:4326","neu"),new Fi("urn:ogc:def:crs:OGC:1.3:CRS84"),new Fi("urn:ogc:def:crs:OGC:2:84"),new Fi("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new Fi("urn:x-ogc:def:crs:EPSG:4326","neu")],Gi={};var Wi,zi,Bi,Yi={};function Ui(t,e,i){var n=t.getCode(),r=e.getCode();n in Yi||(Yi[n]={}),Yi[n][r]=i}function Vi(t,e,i){var n;if(void 0!==e){for(var r=0,o=t.length;r<o;++r)e[r]=t[r];n=e}else n=t.slice();return n}function Xi(t,e,i){if(void 0!==e&&t!==e){for(var n=0,r=t.length;n<r;++n)e[n]=t[n];t=e}return t}function Hi(t){!function(t,e){Gi[t]=e}(t.getCode(),t),Ui(t,t,Vi)}function Zi(t){return"string"==typeof t?Gi[t]||null:t||null}function Ki(t,e,i,n){var r,o=(t=Zi(t)).getPointResolutionFunc();if(o)r=o(e,i);else if(t.getUnits()==ji.DEGREES&&!n||n==ji.DEGREES)r=e;else{var s=$i(t,Zi("EPSG:4326")),a=[i[0]-e/2,i[1],i[0]+e/2,i[1],i[0],i[1]-e/2,i[0],i[1]+e/2];r=(bi((a=s(a,a,2)).slice(0,2),a.slice(2,4))+bi(a.slice(4,6),a.slice(6,8)))/2;var l=n?wi[n]:t.getMetersPerUnit();void 0!==l&&(r/=l)}return r}function Ji(t){!function(t){t.forEach(Hi)}(t),t.forEach(function(e){t.forEach(function(t){e!==t&&Ui(e,t,Vi)})})}function qi(t,e){return t?"string"==typeof t?Zi(t):t:Zi(e)}function Qi(t,e){if(t===e)return!0;var i=t.getUnits()===e.getUnits();return t.getCode()===e.getCode()?i:$i(t,e)===Vi&&i}function $i(t,e){var i=function(t,e){var i;return t in Yi&&e in Yi[t]&&(i=Yi[t][e]),i}(t.getCode(),e.getCode());return i||(i=Xi),i}function tn(t,e){return $i(Zi(t),Zi(e))}function en(t,e,i){return tn(e,i)(t,void 0,t.length)}Ji(Li),Ji(Ni),Wi=Li,zi=Mi,Bi=ki,Ni.forEach(function(t){Wi.forEach(function(e){Ui(t,e,zi),Ui(e,t,Bi)})});var nn=new Array(6);function rn(t){return sn(t,1,0,0,1,0,0)}function on(t,e){var i=t[0],n=t[1],r=t[2],o=t[3],s=t[4],a=t[5],l=e[0],u=e[1],h=e[2],c=e[3],p=e[4],f=e[5];return t[0]=i*l+r*u,t[1]=n*l+o*u,t[2]=i*h+r*c,t[3]=n*h+o*c,t[4]=i*p+r*f+s,t[5]=n*p+o*f+a,t}function sn(t,e,i,n,r,o,s){return t[0]=e,t[1]=i,t[2]=n,t[3]=r,t[4]=o,t[5]=s,t}function an(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function ln(t,e){var i=e[0],n=e[1];return e[0]=t[0]*i+t[2]*n+t[4],e[1]=t[1]*i+t[3]*n+t[5],e}function un(t,e,i){return on(t,sn(nn,e,0,0,i,0,0))}function hn(t,e,i){return on(t,sn(nn,1,0,0,1,e,i))}function cn(t,e,i,n,r,o,s,a){var l=Math.sin(o),u=Math.cos(o);return t[0]=n*u,t[1]=r*l,t[2]=-n*l,t[3]=r*u,t[4]=s*n*u-a*n*l+e,t[5]=s*r*l+a*r*u+i,t}var pn=[1,0,0,1,0,0],fn=function(t){function e(){t.call(this),this.extent_=[1/0,1/0,-1/0,-1/0],this.extentRevision_=-1,this.simplifiedGeometryCache={},this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){return M()},e.prototype.closestPointXY=function(t,e,i,n){return M()},e.prototype.containsXY=function(t,e){return!1},e.prototype.getClosestPoint=function(t,e){var i=e||[NaN,NaN];return this.closestPointXY(t[0],t[1],i,1/0),i},e.prototype.intersectsCoordinate=function(t){return this.containsXY(t[0],t[1])},e.prototype.computeExtent=function(t){return M()},e.prototype.getExtent=function(t){return this.extentRevision_!=this.getRevision()&&(this.extent_=this.computeExtent(this.extent_),this.extentRevision_=this.getRevision()),function(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t}(this.extent_,t)},e.prototype.rotate=function(t,e){M()},e.prototype.scale=function(t,e,i){M()},e.prototype.simplify=function(t){return this.getSimplifiedGeometry(t*t)},e.prototype.getSimplifiedGeometry=function(t){return M()},e.prototype.getType=function(){return M()},e.prototype.applyTransform=function(t){M()},e.prototype.intersectsExtent=function(t){return M()},e.prototype.translate=function(t,e){M()},e.prototype.transform=function(t,e){var i=Zi(t),n=i.getUnits()==ji.TILE_PIXELS?function(t,n,r){var o=i.getExtent(),s=i.getWorldExtent(),a=li(s)/li(o);return cn(pn,s[0],s[3],a,-a,0,0,0),_i(t,0,t.length,r,pn,n),tn(i,e)(t,n,r)}:tn(i,e);return this.applyTransform(n),this},e}(Y);function dn(t){var e;return t==yi.XY?e=2:t==yi.XYZ||t==yi.XYM?e=3:t==yi.XYZM&&(e=4),e}var vn=function(t){function e(){t.call(this),this.layout=yi.XY,this.stride=2,this.flatCoordinates=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.computeExtent=function(t){return Je(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},e.prototype.getCoordinates=function(){return M()},e.prototype.getFirstCoordinate=function(){return this.flatCoordinates.slice(0,this.stride)},e.prototype.getFlatCoordinates=function(){return this.flatCoordinates},e.prototype.getLastCoordinate=function(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)},e.prototype.getLayout=function(){return this.layout},e.prototype.getSimplifiedGeometry=function(t){if(this.simplifiedGeometryRevision!=this.getRevision()&&(c(this.simplifiedGeometryCache),this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;var e=t.toString();if(this.simplifiedGeometryCache.hasOwnProperty(e))return this.simplifiedGeometryCache[e];var i=this.getSimplifiedGeometryInternal(t);return i.getFlatCoordinates().length<this.flatCoordinates.length?(this.simplifiedGeometryCache[e]=i,i):(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)},e.prototype.getSimplifiedGeometryInternal=function(t){return this},e.prototype.getStride=function(){return this.stride},e.prototype.setFlatCoordinates=function(t,e){this.stride=dn(t),this.layout=t,this.flatCoordinates=e},e.prototype.setCoordinates=function(t,e){M()},e.prototype.setLayout=function(t,e,i){var n;if(t)n=dn(t);else{for(var r=0;r<i;++r){if(0===e.length)return this.layout=yi.XY,void(this.stride=2);e=e[0]}t=function(t){var e;2==t?e=yi.XY:3==t?e=yi.XYZ:4==t&&(e=yi.XYZM);return e}(n=e.length)}this.layout=t,this.stride=n},e.prototype.applyTransform=function(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())},e.prototype.rotate=function(t,e){var i=this.getFlatCoordinates();if(i){var n=this.getStride();!function(t,e,i,n,r,o,s){for(var a=s||[],l=Math.cos(r),u=Math.sin(r),h=o[0],c=o[1],p=0,f=e;f<i;f+=n){var d=t[f]-h,v=t[f+1]-c;a[p++]=h+d*l-v*u,a[p++]=c+d*u+v*l;for(var g=f+2;g<f+n;++g)a[p++]=t[g]}s&&a.length!=p&&(a.length=p)}(i,0,i.length,n,t,e,i),this.changed()}},e.prototype.scale=function(t,e,i){var n=e;void 0===n&&(n=t);var r=i;r||(r=si(this.getExtent()));var o=this.getFlatCoordinates();if(o){var s=this.getStride();!function(t,e,i,n,r,o,s,a){for(var l=a||[],u=s[0],h=s[1],c=0,p=e;p<i;p+=n){var f=t[p]-u,d=t[p+1]-h;l[c++]=u+r*f,l[c++]=h+o*d;for(var v=p+2;v<p+n;++v)l[c++]=t[v]}a&&l.length!=c&&(l.length=c)}(o,0,o.length,s,t,n,r,o),this.changed()}},e.prototype.translate=function(t,e){var i=this.getFlatCoordinates();if(i){var n=this.getStride();!function(t,e,i,n,r,o,s){for(var a=s||[],l=0,u=e;u<i;u+=n){a[l++]=t[u]+r,a[l++]=t[u+1]+o;for(var h=u+2;h<u+n;++h)a[l++]=t[h]}s&&a.length!=l&&(a.length=l)}(i,0,i.length,n,t,e,i),this.changed()}},e}(fn);function gn(t,e,i,n){for(var r=0,o=t[i-n],s=t[i-n+1];e<i;e+=n){var a=t[e],l=t[e+1];r+=s*a-o*l,o=a,s=l}return r/2}function mn(t,e,i,n){for(var r=0,o=0,s=i.length;o<s;++o){var a=i[o];r+=gn(t,e,a,n),e=a}return r}function yn(t,e,i,n,r,o,s){var a,l=t[e],u=t[e+1],h=t[i]-l,c=t[i+1]-u;if(0===h&&0===c)a=e;else{var p=((r-l)*h+(o-u)*c)/(h*h+c*c);if(p>1)a=i;else{if(p>0){for(var f=0;f<n;++f)s[f]=xe(t[e+f],t[i+f],p);return void(s.length=n)}a=e}}for(var d=0;d<n;++d)s[d]=t[a+d];s.length=n}function _n(t,e,i,n,r){var o=t[e],s=t[e+1];for(e+=n;e<i;e+=n){var a=t[e],l=t[e+1],u=me(o,s,a,l);u>r&&(r=u),o=a,s=l}return r}function xn(t,e,i,n,r){for(var o=0,s=i.length;o<s;++o){var a=i[o];r=_n(t,e,a,n,r),e=a}return r}function bn(t,e,i,n,r,o,s,a,l,u,h){if(e==i)return u;var c,p;if(0===r){if((p=me(s,a,t[e],t[e+1]))<u){for(c=0;c<n;++c)l[c]=t[e+c];return l.length=n,p}return u}for(var f=h||[NaN,NaN],d=e+n;d<i;)if(yn(t,d-n,d,n,s,a,f),(p=me(s,a,f[0],f[1]))<u){for(u=p,c=0;c<n;++c)l[c]=f[c];l.length=n,d+=n}else d+=n*Math.max((Math.sqrt(p)-Math.sqrt(u))/r|0,1);if(o&&(yn(t,i-n,e,n,s,a,f),(p=me(s,a,f[0],f[1]))<u)){for(u=p,c=0;c<n;++c)l[c]=f[c];l.length=n}return u}function En(t,e,i,n,r,o,s,a,l,u,h){for(var c=h||[NaN,NaN],p=0,f=i.length;p<f;++p){var d=i[p];u=bn(t,e,d,n,r,o,s,a,l,u,c),e=d}return u}function wn(t,e,i,n){for(var r=0,o=i.length;r<o;++r)t[e++]=i[r];return e}function jn(t,e,i,n){for(var r=0,o=i.length;r<o;++r)for(var s=i[r],a=0;a<n;++a)t[e++]=s[a];return e}function Cn(t,e,i,n,r){for(var o=r||[],s=0,a=0,l=i.length;a<l;++a){var u=jn(t,e,i[a],n);o[s++]=u,e=u}return o.length=s,o}function Sn(t,e,i,n,r){for(var o=void 0!==r?r:[],s=0,a=e;a<i;a+=n)o[s++]=t.slice(a,a+n);return o.length=s,o}function Tn(t,e,i,n,r){for(var o=void 0!==r?r:[],s=0,a=0,l=i.length;a<l;++a){var u=i[a];o[s++]=Sn(t,e,u,n,o[s]),e=u}return o.length=s,o}function Rn(t,e,i,n,r){for(var o=void 0!==r?r:[],s=0,a=0,l=i.length;a<l;++a){var u=i[a];o[s++]=Tn(t,e,u,n,o[s]),e=u[u.length-1]}return o.length=s,o}function In(t,e,i,n,r,o,s){var a=(i-e)/n;if(a<3){for(;e<i;e+=n)o[s++]=t[e],o[s++]=t[e+1];return s}var l=new Array(a);l[0]=1,l[a-1]=1;for(var u=[e,i-n],h=0;u.length>0;){for(var c=u.pop(),p=u.pop(),f=0,d=t[p],v=t[p+1],g=t[c],m=t[c+1],y=p+n;y<c;y+=n){var _=ge(t[y],t[y+1],d,v,g,m);_>f&&(h=y,f=_)}f>r&&(l[(h-e)/n]=1,p+n<h&&u.push(p,h),h+n<c&&u.push(h,c))}for(var x=0;x<a;++x)l[x]&&(o[s++]=t[e+x*n],o[s++]=t[e+x*n+1]);return s}function On(t,e,i,n,r,o,s,a){for(var l=0,u=i.length;l<u;++l){var h=i[l];s=In(t,e,h,n,r,o,s),a.push(s),e=h}return s}function An(t,e){return e*Math.round(t/e)}function Ln(t,e,i,n,r,o,s){if(e==i)return s;var a,l,u=An(t[e],r),h=An(t[e+1],r);e+=n,o[s++]=u,o[s++]=h;do{if(a=An(t[e],r),l=An(t[e+1],r),(e+=n)==i)return o[s++]=a,o[s++]=l,s}while(a==u&&l==h);for(;e<i;){var c=An(t[e],r),p=An(t[e+1],r);if(e+=n,c!=a||p!=l){var f=a-u,d=l-h,v=c-u,g=p-h;f*g==d*v&&(f<0&&v<f||f==v||f>0&&v>f)&&(d<0&&g<d||d==g||d>0&&g>d)?(a=c,l=p):(o[s++]=a,o[s++]=l,u=a,h=l,a=c,l=p)}}return o[s++]=a,o[s++]=l,s}function Mn(t,e,i,n,r,o,s,a){for(var l=0,u=i.length;l<u;++l){var h=i[l];s=Ln(t,e,h,n,r,o,s),a.push(s),e=h}return s}var kn=function(t){function e(e,i){t.call(this),this.maxDelta_=-1,this.maxDeltaRevision_=-1,void 0===i||Array.isArray(e[0])?this.setCoordinates(e,i):this.setFlatCoordinates(i,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout)},e.prototype.closestPointXY=function(t,e,i,n){return n<ze(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(_n(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),bn(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,e,i,n))},e.prototype.getArea=function(){return gn(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getCoordinates=function(){return Sn(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getSimplifiedGeometryInternal=function(t){var i=[];return i.length=In(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,i,0),new e(i,yi.XY)},e.prototype.getType=function(){return mi.LINEAR_RING},e.prototype.intersectsExtent=function(t){return!1},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=jn(this.flatCoordinates,0,t,this.stride),this.changed()},e}(vn),Pn=function(t){function e(e,i){t.call(this),this.setCoordinates(e,i)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout)},e.prototype.closestPointXY=function(t,e,i,n){var r=this.flatCoordinates,o=me(t,e,r[0],r[1]);if(o<n){for(var s=this.stride,a=0;a<s;++a)i[a]=r[a];return i.length=s,o}return n},e.prototype.getCoordinates=function(){return this.flatCoordinates?this.flatCoordinates.slice():[]},e.prototype.computeExtent=function(t){return Ke(this.flatCoordinates,t)},e.prototype.getType=function(){return mi.POINT},e.prototype.intersectsExtent=function(t){return Ue(t,this.flatCoordinates[0],this.flatCoordinates[1])},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=wn(this.flatCoordinates,0,t,this.stride),this.changed()},e}(vn);function Dn(t,e,i,n,r){return!ni(r,function(r){return!Fn(t,e,i,n,r[0],r[1])})}function Fn(t,e,i,n,r,o){for(var s=0,a=t[i-n],l=t[i-n+1];e<i;e+=n){var u=t[e],h=t[e+1];l<=o?h>o&&(u-a)*(o-l)-(r-a)*(h-l)>0&&s++:h<=o&&(u-a)*(o-l)-(r-a)*(h-l)<0&&s--,a=u,l=h}return 0!==s}function Nn(t,e,i,n,r,o){if(0===i.length)return!1;if(!Fn(t,e,i[0],n,r,o))return!1;for(var s=1,a=i.length;s<a;++s)if(Fn(t,i[s-1],i[s],n,r,o))return!1;return!0}function Gn(t,e,i,n,r,o,s){for(var a,l,u,h,c,p,f,d=r[o+1],v=[],g=0,m=i.length;g<m;++g){var y=i[g];for(h=t[y-n],p=t[y-n+1],a=e;a<y;a+=n)c=t[a],f=t[a+1],(d<=p&&f<=d||p<=d&&d<=f)&&(u=(d-p)/(f-p)*(c-h)+h,v.push(u)),h=c,p=f}var _=NaN,x=-1/0;for(v.sort(Ut),h=v[0],a=1,l=v.length;a<l;++a){c=v[a];var b=Math.abs(c-h);b>x&&Nn(t,e,i,n,u=(h+c)/2,d)&&(_=u,x=b),h=c}return isNaN(_)&&(_=r[o]),s?(s.push(_,d,x),s):[_,d,x]}function Wn(t,e,i,n,r,o){for(var s,a=[t[e],t[e+1]],l=[];e+n<i;e+=n){if(l[0]=t[e+n],l[1]=t[e+n+1],s=r.call(o,a,l))return s;a[0]=l[0],a[1]=l[1]}return!1}function zn(t,e,i,n,r){var o=ei([1/0,1/0,-1/0,-1/0],t,e,i,n);return!!fi(r,o)&&(!!Ye(r,o)||(o[0]>=r[0]&&o[2]<=r[2]||(o[1]>=r[1]&&o[3]<=r[3]||Wn(t,e,i,n,function(t,e){return function(t,e,i){var n=!1,r=Ve(t,e),o=Ve(t,i);if(r===Fe.INTERSECTING||o===Fe.INTERSECTING)n=!0;else{var s,a,l=t[0],u=t[1],h=t[2],c=t[3],p=e[0],f=e[1],d=i[0],v=i[1],g=(v-f)/(d-p);o&Fe.ABOVE&&!(r&Fe.ABOVE)&&(n=(s=d-(v-c)/g)>=l&&s<=h),n||!(o&Fe.RIGHT)||r&Fe.RIGHT||(n=(a=v-(d-h)*g)>=u&&a<=c),n||!(o&Fe.BELOW)||r&Fe.BELOW||(n=(s=d-(v-u)/g)>=l&&s<=h),n||!(o&Fe.LEFT)||r&Fe.LEFT||(n=(a=v-(d-l)*g)>=u&&a<=c)}return n}(r,t,e)}))))}function Bn(t,e,i,n,r){if(!function(t,e,i,n,r){return!!(zn(t,e,i,n,r)||Fn(t,e,i,n,r[0],r[1])||Fn(t,e,i,n,r[0],r[3])||Fn(t,e,i,n,r[2],r[1])||Fn(t,e,i,n,r[2],r[3]))}(t,e,i[0],n,r))return!1;if(1===i.length)return!0;for(var o=1,s=i.length;o<s;++o)if(Dn(t,i[o-1],i[o],n,r)&&!zn(t,i[o-1],i[o],n,r))return!1;return!0}function Yn(t,e,i,n){for(;e<i-n;){for(var r=0;r<n;++r){var o=t[e+r];t[e+r]=t[i-n+r],t[i-n+r]=o}e+=n,i-=n}}function Un(t,e,i,n){for(var r=0,o=t[i-n],s=t[i-n+1];e<i;e+=n){var a=t[e],l=t[e+1];r+=(a-o)*(l+s),o=a,s=l}return r>0}function Vn(t,e,i,n,r){for(var o=void 0!==r&&r,s=0,a=i.length;s<a;++s){var l=i[s],u=Un(t,e,l,n);if(0===s){if(o&&u||!o&&!u)return!1}else if(o&&!u||!o&&u)return!1;e=l}return!0}function Xn(t,e,i,n,r){for(var o=void 0!==r&&r,s=0,a=i.length;s<a;++s){var l=i[s],u=Un(t,e,l,n);(0===s?o&&u||!o&&!u:o&&!u||!o&&u)&&Yn(t,e,l,n),e=l}return e}function Hn(t,e,i,n,r){for(var o=0,s=i.length;o<s;++o)e=Xn(t,e,i[o],n,r);return e}var Zn=function(t){function e(e,i,n){t.call(this),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,void 0!==i&&n?(this.setFlatCoordinates(i,e),this.ends_=n):this.setCoordinates(e,i)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.appendLinearRing=function(t){this.flatCoordinates?Zt(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout,this.ends_.slice())},e.prototype.closestPointXY=function(t,e,i,n){return n<ze(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(xn(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),En(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,e,i,n))},e.prototype.containsXY=function(t,e){return Nn(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,e)},e.prototype.getArea=function(){return mn(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)},e.prototype.getCoordinates=function(t){var e;return void 0!==t?Xn(e=this.getOrientedFlatCoordinates().slice(),0,this.ends_,this.stride,t):e=this.flatCoordinates,Tn(e,0,this.ends_,this.stride)},e.prototype.getEnds=function(){return this.ends_},e.prototype.getFlatInteriorPoint=function(){if(this.flatInteriorPointRevision_!=this.getRevision()){var t=si(this.getExtent());this.flatInteriorPoint_=Gn(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_},e.prototype.getInteriorPoint=function(){return new Pn(this.getFlatInteriorPoint(),yi.XYM)},e.prototype.getLinearRingCount=function(){return this.ends_.length},e.prototype.getLinearRing=function(t){return t<0||this.ends_.length<=t?null:new kn(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)},e.prototype.getLinearRings=function(){for(var t=this.layout,e=this.flatCoordinates,i=this.ends_,n=[],r=0,o=0,s=i.length;o<s;++o){var a=i[o],l=new kn(e.slice(r,a),t);n.push(l),r=a}return n},e.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var t=this.flatCoordinates;Vn(t,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=Xn(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},e.prototype.getSimplifiedGeometryInternal=function(t){var i=[],n=[];return i.length=Mn(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),i,0,n),new e(i,yi.XY,n)},e.prototype.getType=function(){return mi.POLYGON},e.prototype.intersectsExtent=function(t){return Bn(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var i=Cn(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===i.length?0:i[i.length-1],this.changed()},e}(vn),Kn=Zn;function Jn(t){var e=t[0],i=t[1],n=t[2],r=t[3],o=[e,i,e,r,n,r,n,i,e,i];return new Zn(o,yi.XY,[o.length])}var qn=0;function Qn(t,e){setTimeout(function(){t(e)},0)}function $n(t){return!(t.sourceCenter&&t.targetCenter&&!Oe(t.sourceCenter,t.targetCenter))&&(t.sourceResolution===t.targetResolution&&t.sourceRotation===t.targetRotation)}var tr=function(t){function e(e){t.call(this);var i=h({},e);this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.updateAnimations_=this.updateAnimations_.bind(this),this.projection_=qi(i.projection,"EPSG:3857"),this.applyOptions_(i)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.applyOptions_=function(t){var e={};e[Se]=void 0!==t.center?t.center:null;var i=function(t){var e,i,n,r=void 0!==t.minZoom?t.minZoom:qn,o=void 0!==t.maxZoom?t.maxZoom:28,s=void 0!==t.zoomFactor?t.zoomFactor:2;if(void 0!==t.resolutions){var a=t.resolutions;i=a[r],n=void 0!==a[o]?a[o]:a[a.length-1],e=function(t){return function(e,i,n){if(void 0!==e){var r=Xt(t,e,n);r=de(r+i,0,t.length-1);var o=Math.floor(r);if(r!=o&&o<t.length-1){var s=t[o]/t[o+1];return t[o]/Math.pow(s,r-o)}return t[o]}}}(a)}else{var l=qi(t.projection,"EPSG:3857"),u=l.getExtent(),h=u?Math.max(pi(u),li(u)):360*wi[ji.DEGREES]/l.getMetersPerUnit(),c=h/fe/Math.pow(2,qn),p=c/Math.pow(2,28-qn);void 0!==(i=t.maxResolution)?r=0:i=c/Math.pow(s,r),void 0===(n=t.minResolution)&&(n=void 0!==t.maxZoom?void 0!==t.maxResolution?i/Math.pow(s,o):c/Math.pow(s,o):p),o=r+Math.floor(Math.log(i/n)/Math.log(s)),n=i/Math.pow(s,o-r),e=function(t,e,i){return function(n,r,o){if(void 0!==n){var s=-o/2+.5,a=Math.floor(Math.log(e/n)/Math.log(t)+s),l=Math.max(a+r,0);return void 0!==i&&(l=Math.min(l,i)),e/Math.pow(t,l)}}}(s,i,o-r)}return{constraint:e,maxResolution:i,minResolution:n,minZoom:r,zoomFactor:s}}(t);this.maxResolution_=i.maxResolution,this.minResolution_=i.minResolution,this.zoomFactor_=i.zoomFactor,this.resolutions_=t.resolutions,this.minZoom_=i.minZoom;var n=function(t){return void 0!==t.extent?(e=t.extent,function(t){return t?[de(t[0],e[0],e[2]),de(t[1],e[1],e[3])]:void 0}):be;var e}(t),r=i.constraint,o=function(t){if(void 0===t.enableRotation||t.enableRotation){var e=t.constrainRotation;return void 0===e||!0===e?(o=r||ye(5),function(t,e){return void 0!==t?Math.abs(t+e)<=o?0:t+e:void 0}):!1===e?we:"number"==typeof e?(i=e,n=2*Math.PI/i,function(t,e){return void 0!==t?t=Math.floor((t+e)/n+.5)*n:void 0}):we}return Ee;var i,n;var r,o}(t);this.constraints_={center:n,resolution:r,rotation:o},void 0!==t.resolution?e[Te]=t.resolution:void 0!==t.zoom&&(e[Te]=this.constrainResolution(this.maxResolution_,t.zoom-this.minZoom_),this.resolutions_&&(e[Te]=de(Number(this.getResolution()||e[Te]),this.minResolution_,this.maxResolution_))),e[Re]=void 0!==t.rotation?t.rotation:0,this.setProperties(e),this.options_=t},e.prototype.getUpdatedOptions_=function(t){var e=h({},this.options_);return void 0!==e.resolution?e.resolution=this.getResolution():e.zoom=this.getZoom(),e.center=this.getCenter(),e.rotation=this.getRotation(),h({},e,t)},e.prototype.animate=function(t){var e,i=arguments,n=arguments.length;if(n>1&&"function"==typeof arguments[n-1]&&(e=arguments[n-1],--n),!this.isDef()){var r=arguments[n-1];return r.center&&this.setCenter(r.center),void 0!==r.zoom&&this.setZoom(r.zoom),void 0!==r.rotation&&this.setRotation(r.rotation),void(e&&Qn(e,!0))}for(var o=Date.now(),s=this.getCenter().slice(),a=this.getResolution(),l=this.getRotation(),u=[],h=0;h<n;++h){var c=i[h],p={start:o,complete:!1,anchor:c.anchor,duration:void 0!==c.duration?c.duration:1e3,easing:c.easing||Pe};if(c.center&&(p.sourceCenter=s,p.targetCenter=c.center,s=p.targetCenter),void 0!==c.zoom?(p.sourceResolution=a,p.targetResolution=this.constrainResolution(this.maxResolution_,c.zoom-this.minZoom_,0),a=p.targetResolution):c.resolution&&(p.sourceResolution=a,p.targetResolution=c.resolution,a=p.targetResolution),void 0!==c.rotation){p.sourceRotation=l;var f=_e(c.rotation-l+Math.PI,2*Math.PI)-Math.PI;p.targetRotation=l+f,l=p.targetRotation}p.callback=e,$n(p)?p.complete=!0:o+=p.duration,u.push(p)}this.animations_.push(u),this.setHint(je,1),this.updateAnimations_()},e.prototype.getAnimating=function(){return this.hints_[je]>0},e.prototype.getInteracting=function(){return this.hints_[Ce]>0},e.prototype.cancelAnimations=function(){this.setHint(je,-this.hints_[je]);for(var t=0,e=this.animations_.length;t<e;++t){var i=this.animations_[t];i[0].callback&&Qn(i[0].callback,!1)}this.animations_.length=0},e.prototype.updateAnimations_=function(){if(void 0!==this.updateAnimationKey_&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),this.getAnimating()){for(var t=Date.now(),e=!1,i=this.animations_.length-1;i>=0;--i){for(var n=this.animations_[i],r=!0,o=0,s=n.length;o<s;++o){var a=n[o];if(!a.complete){var l=t-a.start,u=a.duration>0?l/a.duration:1;u>=1?(a.complete=!0,u=1):r=!1;var h=a.easing(u);if(a.sourceCenter){var c=a.sourceCenter[0],p=a.sourceCenter[1],f=c+h*(a.targetCenter[0]-c),d=p+h*(a.targetCenter[1]-p);this.set(Se,[f,d])}if(a.sourceResolution&&a.targetResolution){var v=1===h?a.targetResolution:a.sourceResolution+h*(a.targetResolution-a.sourceResolution);a.anchor&&this.set(Se,this.calculateCenterZoom(v,a.anchor)),this.set(Te,v)}if(void 0!==a.sourceRotation&&void 0!==a.targetRotation){var g=1===h?_e(a.targetRotation+Math.PI,2*Math.PI)-Math.PI:a.sourceRotation+h*(a.targetRotation-a.sourceRotation);a.anchor&&this.set(Se,this.calculateCenterRotate(g,a.anchor)),this.set(Re,g)}if(e=!0,!a.complete)break}}if(r){this.animations_[i]=null,this.setHint(je,-1);var m=n[0].callback;m&&Qn(m,!0)}}this.animations_=this.animations_.filter(Boolean),e&&void 0===this.updateAnimationKey_&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_))}},e.prototype.calculateCenterRotate=function(t,e){var i,n=this.getCenter();return void 0!==n&&(Ae(i=[n[0]-e[0],n[1]-e[1]],t-this.getRotation()),Ie(i,e)),i},e.prototype.calculateCenterZoom=function(t,e){var i,n=this.getCenter(),r=this.getResolution();void 0!==n&&void 0!==r&&(i=[e[0]-t*(e[0]-n[0])/r,e[1]-t*(e[1]-n[1])/r]);return i},e.prototype.getSizeFromViewport_=function(){var t=[100,100],e='.ol-viewport[data-view="'+P(this)+'"]',i=document.querySelector(e);if(i){var n=getComputedStyle(i);t[0]=parseInt(n.width,10),t[1]=parseInt(n.height,10)}return t},e.prototype.constrainCenter=function(t){return this.constraints_.center(t)},e.prototype.constrainResolution=function(t,e,i){var n=e||0,r=i||0;return this.constraints_.resolution(t,n,r)},e.prototype.constrainRotation=function(t,e){var i=e||0;return this.constraints_.rotation(t,i)},e.prototype.getCenter=function(){return this.get(Se)},e.prototype.getConstraints=function(){return this.constraints_},e.prototype.getHints=function(t){return void 0!==t?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()},e.prototype.calculateExtent=function(t){var e=t||this.getSizeFromViewport_(),i=this.getCenter();he(i,1);var n=this.getResolution();he(void 0!==n,2);var r=this.getRotation();return he(void 0!==r,3),ai(i,n,r,e)},e.prototype.getMaxResolution=function(){return this.maxResolution_},e.prototype.getMinResolution=function(){return this.minResolution_},e.prototype.getMaxZoom=function(){return this.getZoomForResolution(this.minResolution_)},e.prototype.setMaxZoom=function(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))},e.prototype.getMinZoom=function(){return this.getZoomForResolution(this.maxResolution_)},e.prototype.setMinZoom=function(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))},e.prototype.getProjection=function(){return this.projection_},e.prototype.getResolution=function(){return this.get(Te)},e.prototype.getResolutions=function(){return this.resolutions_},e.prototype.getResolutionForExtent=function(t,e){var i=e||this.getSizeFromViewport_(),n=pi(t)/i[0],r=li(t)/i[1];return Math.max(n,r)},e.prototype.getResolutionForValueFunction=function(t){var e=t||2,i=this.maxResolution_,n=this.minResolution_,r=Math.log(i/n)/Math.log(e);return function(t){return i/Math.pow(e,t*r)}},e.prototype.getRotation=function(){return this.get(Re)},e.prototype.getValueForResolutionFunction=function(t){var e=t||2,i=this.maxResolution_,n=this.minResolution_,r=Math.log(i/n)/Math.log(e);return function(t){return Math.log(i/t)/Math.log(e)/r}},e.prototype.getState=function(t){var e=this.getCenter(),i=this.getProjection(),n=this.getResolution(),r=n/t,o=this.getRotation();return{center:[Math.round(e[0]/r)*r,Math.round(e[1]/r)*r],projection:void 0!==i?i:null,resolution:n,rotation:o,zoom:this.getZoom()}},e.prototype.getZoom=function(){var t,e=this.getResolution();return void 0!==e&&(t=this.getZoomForResolution(e)),t},e.prototype.getZoomForResolution=function(t){var e,i,n=this.minZoom_||0;if(this.resolutions_){var r=Xt(this.resolutions_,t,1);n=r,e=this.resolutions_[r],i=r==this.resolutions_.length-1?2:e/this.resolutions_[r+1]}else e=this.maxResolution_,i=this.zoomFactor_;return n+Math.log(e/t)/Math.log(i)},e.prototype.getResolutionForZoom=function(t){return this.constrainResolution(this.maxResolution_,t-this.minZoom_,0)},e.prototype.fit=function(t,e){var i,n=e||{},r=n.size;r||(r=this.getSizeFromViewport_()),he(Array.isArray(t)||"function"==typeof t.getSimplifiedGeometry,24),Array.isArray(t)?(he(!di(t),25),i=Jn(t)):t.getType()===mi.CIRCLE?(i=Jn(t=t.getExtent())).rotate(this.getRotation(),si(t)):i=t;var o,s=void 0!==n.padding?n.padding:[0,0,0,0],a=void 0===n.constrainResolution||n.constrainResolution,l=void 0!==n.nearest&&n.nearest;o=void 0!==n.minResolution?n.minResolution:void 0!==n.maxZoom?this.constrainResolution(this.maxResolution_,n.maxZoom-this.minZoom_,0):0;for(var u=i.getFlatCoordinates(),h=this.getRotation(),c=Math.cos(-h),p=Math.sin(-h),f=1/0,d=1/0,v=-1/0,g=-1/0,m=i.getStride(),y=0,_=u.length;y<_;y+=m){var x=u[y]*c-u[y+1]*p,b=u[y]*p+u[y+1]*c;f=Math.min(f,x),d=Math.min(d,b),v=Math.max(v,x),g=Math.max(g,b)}var E=this.getResolutionForExtent([f,d,v,g],[r[0]-s[1]-s[3],r[1]-s[0]-s[2]]);if(E=isNaN(E)?o:Math.max(E,o),a){var w=this.constrainResolution(E,0,0);!l&&w<E&&(w=this.constrainResolution(w,-1,0)),E=w}p=-p;var j=(f+v)/2,C=(d+g)/2,T=[(j+=(s[1]-s[3])/2*E)*c-(C+=(s[0]-s[2])/2*E)*p,C*c+j*p],R=n.callback?n.callback:S;void 0!==n.duration?this.animate({resolution:E,center:T,duration:n.duration,easing:n.easing},R):(this.setResolution(E),this.setCenter(T),Qn(R,!0))},e.prototype.centerOn=function(t,e,i){var n=this.getRotation(),r=Math.cos(-n),o=Math.sin(-n),s=t[0]*r-t[1]*o,a=t[1]*r+t[0]*o,l=this.getResolution(),u=(s+=(e[0]/2-i[0])*l)*r-(a+=(i[1]-e[1]/2)*l)*(o=-o),h=a*r+s*o;this.setCenter([u,h])},e.prototype.isDef=function(){return!!this.getCenter()&&void 0!==this.getResolution()},e.prototype.rotate=function(t,e){if(void 0!==e){var i=this.calculateCenterRotate(t,e);this.setCenter(i)}this.setRotation(t)},e.prototype.setCenter=function(t){this.set(Se,t),this.getAnimating()&&this.cancelAnimations()},e.prototype.setHint=function(t,e){return this.hints_[t]+=e,this.changed(),this.hints_[t]},e.prototype.setResolution=function(t){this.set(Te,t),this.getAnimating()&&this.cancelAnimations()},e.prototype.setRotation=function(t){this.set(Re,t),this.getAnimating()&&this.cancelAnimations()},e.prototype.setZoom=function(t){this.setResolution(this.getResolutionForZoom(t))},e}(Y);function er(t,e){var i=document.createElement("canvas");return t&&(i.width=t),e&&(i.height=e),i.getContext("2d")}function ir(t,e){var i=e.parentNode;i&&i.replaceChild(t,e)}function nr(t){return t&&t.parentNode?t.parentNode.removeChild(t):null}function rr(t){for(;t.lastChild;)t.removeChild(t.lastChild)}var or={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",SOURCE:"source"},sr=function(t){function e(e){t.call(this);var i=h({},e);i[or.OPACITY]=void 0!==e.opacity?e.opacity:1,i[or.VISIBLE]=void 0===e.visible||e.visible,i[or.Z_INDEX]=e.zIndex,i[or.MAX_RESOLUTION]=void 0!==e.maxResolution?e.maxResolution:1/0,i[or.MIN_RESOLUTION]=void 0!==e.minResolution?e.minResolution:0,this.setProperties(i),this.state_=null,this.type}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getType=function(){return this.type},e.prototype.getLayerState=function(){var t=this.state_||{layer:this,managed:!0};return t.opacity=de(this.getOpacity(),0,1),t.sourceState=this.getSourceState(),t.visible=this.getVisible(),t.extent=this.getExtent(),t.zIndex=this.getZIndex()||0,t.maxResolution=this.getMaxResolution(),t.minResolution=Math.max(this.getMinResolution(),0),this.state_=t,t},e.prototype.getLayersArray=function(t){return M()},e.prototype.getLayerStatesArray=function(t){return M()},e.prototype.getExtent=function(){return this.get(or.EXTENT)},e.prototype.getMaxResolution=function(){return this.get(or.MAX_RESOLUTION)},e.prototype.getMinResolution=function(){return this.get(or.MIN_RESOLUTION)},e.prototype.getOpacity=function(){return this.get(or.OPACITY)},e.prototype.getSourceState=function(){return M()},e.prototype.getVisible=function(){return this.get(or.VISIBLE)},e.prototype.getZIndex=function(){return this.get(or.Z_INDEX)},e.prototype.setExtent=function(t){this.set(or.EXTENT,t)},e.prototype.setMaxResolution=function(t){this.set(or.MAX_RESOLUTION,t)},e.prototype.setMinResolution=function(t){this.set(or.MIN_RESOLUTION,t)},e.prototype.setOpacity=function(t){this.set(or.OPACITY,t)},e.prototype.setVisible=function(t){this.set(or.VISIBLE,t)},e.prototype.setZIndex=function(t){this.set(or.Z_INDEX,t)},e}(Y),ar={UNDEFINED:"undefined",LOADING:"loading",READY:"ready",ERROR:"error"},lr={LAYERS:"layers"},ur=function(t){function e(e){var i=e||{},n=h({},i);delete n.layers;var r=i.layers;t.call(this,n),this.layersListenerKeys_=[],this.listenerKeys_={},y(this,B(lr.LAYERS),this.handleLayersChanged_,this),r?Array.isArray(r)?r=new X(r.slice(),{unique:!0}):he("function"==typeof r.getArray,43):r=new X(void 0,{unique:!0}),this.setLayers(r)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.handleLayerChange_=function(){this.changed()},e.prototype.handleLayersChanged_=function(){this.layersListenerKeys_.forEach(b),this.layersListenerKeys_.length=0;var t=this.getLayers();for(var e in this.layersListenerKeys_.push(y(t,N.ADD,this.handleLayersAdd_,this),y(t,N.REMOVE,this.handleLayersRemove_,this)),this.listenerKeys_)this.listenerKeys_[e].forEach(b);c(this.listenerKeys_);for(var i=t.getArray(),n=0,r=i.length;n<r;n++){var o=i[n];this.listenerKeys_[P(o)]=[y(o,G,this.handleLayerChange_,this),y(o,A.CHANGE,this.handleLayerChange_,this)]}this.changed()},e.prototype.handleLayersAdd_=function(t){var e=t.element;this.listenerKeys_[P(e)]=[y(e,G,this.handleLayerChange_,this),y(e,A.CHANGE,this.handleLayerChange_,this)],this.changed()},e.prototype.handleLayersRemove_=function(t){var e=P(t.element);this.listenerKeys_[e].forEach(b),delete this.listenerKeys_[e],this.changed()},e.prototype.getLayers=function(){return this.get(lr.LAYERS)},e.prototype.setLayers=function(t){this.set(lr.LAYERS,t)},e.prototype.getLayersArray=function(t){var e=void 0!==t?t:[];return this.getLayers().forEach(function(t){t.getLayersArray(e)}),e},e.prototype.getLayerStatesArray=function(t){var e=void 0!==t?t:[],i=e.length;this.getLayers().forEach(function(t){t.getLayerStatesArray(e)});for(var n=this.getLayerState(),r=i,o=e.length;r<o;r++){var s=e[r];s.opacity*=n.opacity,s.visible=s.visible&&n.visible,s.maxResolution=Math.min(s.maxResolution,n.maxResolution),s.minResolution=Math.max(s.minResolution,n.minResolution),void 0!==n.extent&&(void 0!==s.extent?s.extent=ui(s.extent,n.extent):s.extent=n.extent)}return e},e.prototype.getSourceState=function(){return ar.READY},e}(sr);function hr(t,e){return Array.isArray(t)?t:(void 0===e?e=[t,t]:e[0]=e[1]=t,e)}var cr=function(t){function e(e){t.call(this);var i=function(t){var e=null;void 0!==t.keyboardEventTarget&&(e="string"==typeof t.keyboardEventTarget?document.getElementById(t.keyboardEventTarget):t.keyboardEventTarget);var i,n,r,o={},s=t.layers&&"function"==typeof t.layers.getLayers?t.layers:new ur({layers:t.layers});o[ae.LAYERGROUP]=s,o[ae.TARGET]=t.target,o[ae.VIEW]=void 0!==t.view?t.view:new tr,void 0!==t.controls&&(Array.isArray(t.controls)?i=new X(t.controls.slice()):(he("function"==typeof t.controls.getArray,47),i=t.controls));void 0!==t.interactions&&(Array.isArray(t.interactions)?n=new X(t.interactions.slice()):(he("function"==typeof t.interactions.getArray,48),n=t.interactions));void 0!==t.overlays?Array.isArray(t.overlays)?r=new X(t.overlays.slice()):(he("function"==typeof t.overlays.getArray,49),r=t.overlays):r=new X;return{controls:i,interactions:n,keyboardEventTarget:e,overlays:r,values:o}}(e);this.maxTilesLoading_=void 0!==e.maxTilesLoading?e.maxTilesLoading:16,this.loadTilesWhileAnimating_=void 0!==e.loadTilesWhileAnimating&&e.loadTilesWhileAnimating,this.loadTilesWhileInteracting_=void 0!==e.loadTilesWhileInteracting&&e.loadTilesWhileInteracting,this.pixelRatio_=void 0!==e.pixelRatio?e.pixelRatio:nt,this.animationDelayKey_,this.animationDelay_=function(){this.animationDelayKey_=void 0,this.renderFrame_.call(this,Date.now())}.bind(this),this.coordinateToPixelTransform_=[1,0,0,1,0,0],this.pixelToCoordinateTransform_=[1,0,0,1,0,0],this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+(ot?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.viewport_.style.msTouchAction="none",this.viewport_.style.touchAction="none",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent";for(var n=[A.CLICK,A.DBLCLICK,A.MOUSEDOWN,A.TOUCHSTART,A.MSPOINTERDOWN,lt.POINTERDOWN,A.MOUSEWHEEL,A.WHEEL],r=0,o=n.length;r<o;++r)y(this.overlayContainerStopEvent_,n[r],R);for(var s in this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=new ne(this,e.moveTolerance),lt)y(this.mapBrowserEventHandler_,lt[s],this.handleMapBrowserEvent,this);this.keyboardEventTarget_=i.keyboardEventTarget,this.keyHandlerKeys_=null,y(this.viewport_,A.CONTEXTMENU,this.handleBrowserEvent,this),y(this.viewport_,A.WHEEL,this.handleBrowserEvent,this),y(this.viewport_,A.MOUSEWHEEL,this.handleBrowserEvent,this),this.controls=i.controls||new X,this.interactions=i.interactions||new X,this.overlays_=i.overlays,this.overlayIdIndex_={},this.renderer_=this.createRenderer(),this.handleResize_,this.focus_=null,this.postRenderFunctions_=[],this.tileQueue_=new pe(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.skippedFeatureUids_={},y(this,B(ae.LAYERGROUP),this.handleLayerGroupChanged_,this),y(this,B(ae.VIEW),this.handleViewChanged_,this),y(this,B(ae.SIZE),this.handleSizeChanged_,this),y(this,B(ae.TARGET),this.handleTargetChanged_,this),this.setProperties(i.values),this.controls.forEach(function(t){t.setMap(this)}.bind(this)),y(this.controls,N.ADD,function(t){t.element.setMap(this)},this),y(this.controls,N.REMOVE,function(t){t.element.setMap(null)},this),this.interactions.forEach(function(t){t.setMap(this)}.bind(this)),y(this.interactions,N.ADD,function(t){t.element.setMap(this)},this),y(this.interactions,N.REMOVE,function(t){t.element.setMap(null)},this),this.overlays_.forEach(this.addOverlayInternal_.bind(this)),y(this.overlays_,N.ADD,function(t){this.addOverlayInternal_(t.element)},this),y(this.overlays_,N.REMOVE,function(t){var e=t.element.getId();void 0!==e&&delete this.overlayIdIndex_[e.toString()],t.element.setMap(null)},this)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createRenderer=function(){throw new Error("Use a map type that has a createRenderer method")},e.prototype.addControl=function(t){this.getControls().push(t)},e.prototype.addInteraction=function(t){this.getInteractions().push(t)},e.prototype.addLayer=function(t){this.getLayerGroup().getLayers().push(t)},e.prototype.addOverlay=function(t){this.getOverlays().push(t)},e.prototype.addOverlayInternal_=function(t){var e=t.getId();void 0!==e&&(this.overlayIdIndex_[e.toString()]=t),t.setMap(this)},e.prototype.disposeInternal=function(){this.mapBrowserEventHandler_.dispose(),x(this.viewport_,A.CONTEXTMENU,this.handleBrowserEvent,this),x(this.viewport_,A.WHEEL,this.handleBrowserEvent,this),x(this.viewport_,A.MOUSEWHEEL,this.handleBrowserEvent,this),void 0!==this.handleResize_&&(removeEventListener(A.RESIZE,this.handleResize_,!1),this.handleResize_=void 0),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0),this.setTarget(null),t.prototype.disposeInternal.call(this)},e.prototype.forEachFeatureAtPixel=function(t,e,i){if(this.frameState_){var n=this.getCoordinateFromPixel(t),r=void 0!==(i=void 0!==i?i:{}).hitTolerance?i.hitTolerance*this.frameState_.pixelRatio:0,o=void 0!==i.layerFilter?i.layerFilter:j;return this.renderer_.forEachFeatureAtCoordinate(n,this.frameState_,r,e,null,o,null)}},e.prototype.getFeaturesAtPixel=function(t,e){var i=null;return this.forEachFeatureAtPixel(t,function(t){i||(i=[]),i.push(t)},e),i},e.prototype.forEachLayerAtPixel=function(t,e,i){if(this.frameState_){var n=i||{},r=void 0!==n.hitTolerance?i.hitTolerance*this.frameState_.pixelRatio:0,o=n.layerFilter||j;return this.renderer_.forEachLayerAtPixel(t,this.frameState_,r,e,null,o,null)}},e.prototype.hasFeatureAtPixel=function(t,e){if(!this.frameState_)return!1;var i=this.getCoordinateFromPixel(t),n=void 0!==(e=void 0!==e?e:{}).layerFilter?e.layerFilter:j,r=void 0!==e.hitTolerance?e.hitTolerance*this.frameState_.pixelRatio:0;return this.renderer_.hasFeatureAtCoordinate(i,this.frameState_,r,n,null)},e.prototype.getEventCoordinate=function(t){return this.getCoordinateFromPixel(this.getEventPixel(t))},e.prototype.getEventPixel=function(t){var e=this.viewport_.getBoundingClientRect(),i="changedTouches"in t?t.changedTouches[0]:t;return[i.clientX-e.left,i.clientY-e.top]},e.prototype.getTarget=function(){return this.get(ae.TARGET)},e.prototype.getTargetElement=function(){var t=this.getTarget();return void 0!==t?"string"==typeof t?document.getElementById(t):t:null},e.prototype.getCoordinateFromPixel=function(t){var e=this.frameState_;return e?ln(e.pixelToCoordinateTransform,t.slice()):null},e.prototype.getControls=function(){return this.controls},e.prototype.getOverlays=function(){return this.overlays_},e.prototype.getOverlayById=function(t){var e=this.overlayIdIndex_[t.toString()];return void 0!==e?e:null},e.prototype.getInteractions=function(){return this.interactions},e.prototype.getLayerGroup=function(){return this.get(ae.LAYERGROUP)},e.prototype.getLayers=function(){return this.getLayerGroup().getLayers()},e.prototype.getPixelFromCoordinate=function(t){var e=this.frameState_;return e?ln(e.coordinateToPixelTransform,t.slice(0,2)):null},e.prototype.getRenderer=function(){return this.renderer_},e.prototype.getSize=function(){return this.get(ae.SIZE)},e.prototype.getView=function(){return this.get(ae.VIEW)},e.prototype.getViewport=function(){return this.viewport_},e.prototype.getOverlayContainer=function(){return this.overlayContainer_},e.prototype.getOverlayContainerStopEvent=function(){return this.overlayContainerStopEvent_},e.prototype.getTilePriority=function(t,e,i,n){var r=this.frameState_;if(!(r&&e in r.wantedTiles))return 1/0;if(!r.wantedTiles[e][t.getKey()])return 1/0;var o=i[0]-r.focus[0],s=i[1]-r.focus[1];return 65536*Math.log(n)+Math.sqrt(o*o+s*s)/n},e.prototype.handleBrowserEvent=function(t,e){var i=e||t.type,n=new Z(i,this,t);this.handleMapBrowserEvent(n)},e.prototype.handleMapBrowserEvent=function(t){if(this.frameState_){this.focus_=t.coordinate,t.frameState=this.frameState_;var e=this.getInteractions().getArray();if(!1!==this.dispatchEvent(t))for(var i=e.length-1;i>=0;i--){var n=e[i];if(n.getActive())if(!n.handleEvent(t))break}}},e.prototype.handlePostRender=function(){var t=this.frameState_,e=this.tileQueue_;if(!e.isEmpty()){var i=this.maxTilesLoading_,n=i;if(t){var r=t.viewHints;r[je]&&(i=this.loadTilesWhileAnimating_?8:0,n=2),r[Ce]&&(i=this.loadTilesWhileInteracting_?8:0,n=2)}e.getTilesLoading()<i&&(e.reprioritize(),e.loadMoreTiles(i,n))}!t||!this.hasListener(le.RENDERCOMPLETE)||t.animate||this.tileQueue_.getTilesLoading()||function t(e){for(var i=0,n=e.length;i<n;++i){var r=e[i];if("function"==typeof r.getLayers)return t(r.getLayers().getArray());var o=r.getSource();if(o&&o.loading)return!0}return!1}(this.getLayers().getArray())||this.renderer_.dispatchRenderEvent(le.RENDERCOMPLETE,t);for(var o=this.postRenderFunctions_,s=0,a=o.length;s<a;++s)o[s](this,t);o.length=0},e.prototype.handleSizeChanged_=function(){this.render()},e.prototype.handleTargetChanged_=function(){var t;if(this.getTarget()&&(t=this.getTargetElement()),this.keyHandlerKeys_){for(var e=0,i=this.keyHandlerKeys_.length;e<i;++e)b(this.keyHandlerKeys_[e]);this.keyHandlerKeys_=null}if(t){t.appendChild(this.viewport_);var n=this.keyboardEventTarget_?this.keyboardEventTarget_:t;this.keyHandlerKeys_=[y(n,A.KEYDOWN,this.handleBrowserEvent,this),y(n,A.KEYPRESS,this.handleBrowserEvent,this)],this.handleResize_||(this.handleResize_=this.updateSize.bind(this),window.addEventListener(A.RESIZE,this.handleResize_,!1))}else this.renderer_.removeLayerRenderers(),nr(this.viewport_),void 0!==this.handleResize_&&(removeEventListener(A.RESIZE,this.handleResize_,!1),this.handleResize_=void 0);this.updateSize()},e.prototype.handleTileChange_=function(){this.render()},e.prototype.handleViewPropertyChanged_=function(){this.render()},e.prototype.handleViewChanged_=function(){this.viewPropertyListenerKey_&&(b(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(b(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);var t=this.getView();t&&(this.viewport_.setAttribute("data-view",P(t)),this.viewPropertyListenerKey_=y(t,G,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=y(t,A.CHANGE,this.handleViewPropertyChanged_,this)),this.render()},e.prototype.handleLayerGroupChanged_=function(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(b),this.layerGroupPropertyListenerKeys_=null);var t=this.getLayerGroup();t&&(this.layerGroupPropertyListenerKeys_=[y(t,G,this.render,this),y(t,A.CHANGE,this.render,this)]),this.render()},e.prototype.isRendered=function(){return!!this.frameState_},e.prototype.renderSync=function(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()},e.prototype.render=function(){void 0===this.animationDelayKey_&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))},e.prototype.removeControl=function(t){return this.getControls().remove(t)},e.prototype.removeInteraction=function(t){return this.getInteractions().remove(t)},e.prototype.removeLayer=function(t){return this.getLayerGroup().getLayers().remove(t)},e.prototype.removeOverlay=function(t){return this.getOverlays().remove(t)},e.prototype.renderFrame_=function(t){var e,i=this.getSize(),n=this.getView(),r=[1/0,1/0,-1/0,-1/0],o=this.frameState_,s=null;if(void 0!==i&&function(t){return t[0]>0&&t[1]>0}(i)&&n&&n.isDef()){for(var a=n.getHints(this.frameState_?this.frameState_.viewHints:void 0),l=this.getLayerGroup().getLayerStatesArray(),u={},h=0,c=l.length;h<c;++h)u[P(l[h].layer)]=l[h];e=n.getState(this.pixelRatio_),s={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,extent:r,focus:this.focus_?this.focus_:e.center,index:this.frameIndex_++,layerStates:u,layerStatesArray:l,pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:i,skippedFeatureUids:this.skippedFeatureUids_,tileQueue:this.tileQueue_,time:t,usedTiles:{},viewState:e,viewHints:a,wantedTiles:{}}}if(s&&(s.extent=ai(e.center,e.resolution,e.rotation,s.size,r)),this.frameState_=s,this.renderer_.renderFrame(s),s){if(s.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,s.postRenderFunctions),o)(!this.previousExtent_||!di(this.previousExtent_)&&!qe(s.extent,this.previousExtent_))&&(this.dispatchEvent(new H(oe,this,o)),this.previousExtent_=Ze(this.previousExtent_));this.previousExtent_&&!s.viewHints[je]&&!s.viewHints[Ce]&&!qe(s.extent,this.previousExtent_)&&(this.dispatchEvent(new H(se,this,s)),We(s.extent,this.previousExtent_))}this.dispatchEvent(new H(re,this,s)),setTimeout(this.handlePostRender.bind(this),0)},e.prototype.setLayerGroup=function(t){this.set(ae.LAYERGROUP,t)},e.prototype.setSize=function(t){this.set(ae.SIZE,t)},e.prototype.setTarget=function(t){this.set(ae.TARGET,t)},e.prototype.setView=function(t){this.set(ae.VIEW,t)},e.prototype.skipFeature=function(t){this.skippedFeatureUids_[P(t)]=!0,this.render()},e.prototype.updateSize=function(){var t=this.getTargetElement();if(t){var e=getComputedStyle(t);this.setSize([t.offsetWidth-parseFloat(e.borderLeftWidth)-parseFloat(e.paddingLeft)-parseFloat(e.paddingRight)-parseFloat(e.borderRightWidth),t.offsetHeight-parseFloat(e.borderTopWidth)-parseFloat(e.paddingTop)-parseFloat(e.paddingBottom)-parseFloat(e.borderBottomWidth)])}else this.setSize(void 0)},e.prototype.unskipFeature=function(t){delete this.skippedFeatureUids_[P(t)],this.render()},e}(Y);var pr,fr,dr=function(t){function e(e){t.call(this),this.element=e.element?e.element:null,this.target_=null,this.map_=null,this.listenerKeys=[],this.render=e.render?e.render:S,e.target&&this.setTarget(e.target)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.disposeInternal=function(){nr(this.element),t.prototype.disposeInternal.call(this)},e.prototype.getMap=function(){return this.map_},e.prototype.setMap=function(t){this.map_&&nr(this.element);for(var e=0,i=this.listenerKeys.length;e<i;++e)b(this.listenerKeys[e]);(this.listenerKeys.length=0,this.map_=t,this.map_)&&((this.target_?this.target_:t.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==S&&this.listenerKeys.push(y(t,re,this.render,this)),t.render())},e.prototype.setTarget=function(t){this.target_="string"==typeof t?document.getElementById(t):t},e}(Y),vr="ol-hidden",gr="ol-selectable",mr="ol-unselectable",yr="ol-control",_r="ol-collapsed",xr=(fr={},function(t){if(pr||(pr=document.createElement("div").style),!(t in fr)){pr.font=t;var e=pr.fontFamily;if(pr.font="",!e)return null;fr[t]=e.split(/,\s?/)}return fr[t]});function br(t,e){return t.visible&&e>=t.minResolution&&e<t.maxResolution}var Er=function(t){function e(e){var i=h({},e);delete i.source,t.call(this,i),this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,e.map&&this.setMap(e.map),y(this,B(or.SOURCE),this.handleSourcePropertyChange_,this);var n=e.source?e.source:null;this.setSource(n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getLayersArray=function(t){var e=t||[];return e.push(this),e},e.prototype.getLayerStatesArray=function(t){var e=t||[];return e.push(this.getLayerState()),e},e.prototype.getSource=function(){return this.get(or.SOURCE)||null},e.prototype.getSourceState=function(){var t=this.getSource();return t?t.getState():ar.UNDEFINED},e.prototype.handleSourceChange_=function(){this.changed()},e.prototype.handleSourcePropertyChange_=function(){this.sourceChangeKey_&&(b(this.sourceChangeKey_),this.sourceChangeKey_=null);var t=this.getSource();t&&(this.sourceChangeKey_=y(t,A.CHANGE,this.handleSourceChange_,this)),this.changed()},e.prototype.setMap=function(t){this.mapPrecomposeKey_&&(b(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),t||this.changed(),this.mapRenderKey_&&(b(this.mapRenderKey_),this.mapRenderKey_=null),t&&(this.mapPrecomposeKey_=y(t,le.PRECOMPOSE,function(t){var e=t,i=this.getLayerState();i.managed=!1,void 0===this.getZIndex()&&(i.zIndex=1/0),e.frameState.layerStatesArray.push(i),e.frameState.layerStates[P(this)]=i},this),this.mapRenderKey_=y(this,A.CHANGE,t.render,t),this.changed())},e.prototype.setSource=function(t){this.set(or.SOURCE,t)},e}(sr);function wr(t){this.updateElement_(t.frameState)}var jr=function(t){function e(e){var i=e||{};t.call(this,{element:document.createElement("div"),render:i.render||wr,target:i.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=void 0===i.collapsed||i.collapsed,this.overrideCollapsible_=void 0!==i.collapsible,this.collapsible_=void 0===i.collapsible||i.collapsible,this.collapsible_||(this.collapsed_=!1);var n=void 0!==i.className?i.className:"ol-attribution",r=void 0!==i.tipLabel?i.tipLabel:"Attributions",o=void 0!==i.collapseLabel?i.collapseLabel:"»";"string"==typeof o?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=o):this.collapseLabel_=o;var s=void 0!==i.label?i.label:"i";"string"==typeof s?(this.label_=document.createElement("span"),this.label_.textContent=s):this.label_=s;var a=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_,l=document.createElement("button");l.setAttribute("type","button"),l.title=r,l.appendChild(a),y(l,A.CLICK,this.handleClick_,this);var u=n+" "+mr+" "+yr+(this.collapsed_&&this.collapsible_?" "+_r:"")+(this.collapsible_?"":" ol-uncollapsible"),h=this.element;h.className=u,h.appendChild(this.ulElement_),h.appendChild(l),this.renderedAttributions_=[],this.renderedVisible_=!0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.collectSourceAttributions_=function(t){for(var e={},i=[],n=t.layerStatesArray,r=t.viewState.resolution,o=0,s=n.length;o<s;++o){var a=n[o];if(br(a,r)){var l=a.layer.getSource();if(l){var u=l.getAttributions();if(u){var h=u(t);if(h)if(this.overrideCollapsible_||!1!==l.getAttributionsCollapsible()||this.setCollapsible(!1),Array.isArray(h))for(var c=0,p=h.length;c<p;++c)h[c]in e||(i.push(h[c]),e[h[c]]=!0);else h in e||(i.push(h),e[h]=!0)}}}}return i},e.prototype.updateElement_=function(t){if(t){var e=this.collectSourceAttributions_(t),i=e.length>0;if(this.renderedVisible_!=i&&(this.element.style.display=i?"":"none",this.renderedVisible_=i),!Kt(e,this.renderedAttributions_)){rr(this.ulElement_);for(var n=0,r=e.length;n<r;++n){var o=document.createElement("li");o.innerHTML=e[n],this.ulElement_.appendChild(o)}this.renderedAttributions_=e}}else this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1)},e.prototype.handleClick_=function(t){t.preventDefault(),this.handleToggle_()},e.prototype.handleToggle_=function(){this.element.classList.toggle(_r),this.collapsed_?ir(this.collapseLabel_,this.label_):ir(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_},e.prototype.getCollapsible=function(){return this.collapsible_},e.prototype.setCollapsible=function(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),!t&&this.collapsed_&&this.handleToggle_())},e.prototype.setCollapsed=function(t){this.collapsible_&&this.collapsed_!==t&&this.handleToggle_()},e.prototype.getCollapsed=function(){return this.collapsed_},e}(dr);function Cr(t){var e=t.frameState;if(e){var i=e.viewState.rotation;if(i!=this.rotation_){var n="rotate("+i+"rad)";if(this.autoHide_){var r=this.element.classList.contains(vr);r||0!==i?r&&0!==i&&this.element.classList.remove(vr):this.element.classList.add(vr)}this.label_.style.msTransform=n,this.label_.style.webkitTransform=n,this.label_.style.transform=n}this.rotation_=i}}var Sr=function(t){function e(e){var i=e||{};t.call(this,{element:document.createElement("div"),render:i.render||Cr,target:i.target});var n=void 0!==i.className?i.className:"ol-rotate",r=void 0!==i.label?i.label:"⇧";this.label_=null,"string"==typeof r?(this.label_=document.createElement("span"),this.label_.className="ol-compass",this.label_.textContent=r):(this.label_=r,this.label_.classList.add("ol-compass"));var o=i.tipLabel?i.tipLabel:"Reset rotation",s=document.createElement("button");s.className=n+"-reset",s.setAttribute("type","button"),s.title=o,s.appendChild(this.label_),y(s,A.CLICK,this.handleClick_,this);var a=n+" "+mr+" "+yr,l=this.element;l.className=a,l.appendChild(s),this.callResetNorth_=i.resetNorth?i.resetNorth:void 0,this.duration_=void 0!==i.duration?i.duration:250,this.autoHide_=void 0===i.autoHide||i.autoHide,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(vr)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.handleClick_=function(t){t.preventDefault(),void 0!==this.callResetNorth_?this.callResetNorth_():this.resetNorth_()},e.prototype.resetNorth_=function(){var t=this.getMap().getView();t&&void 0!==t.getRotation()&&(this.duration_>0?t.animate({rotation:0,duration:this.duration_,easing:ke}):t.setRotation(0))},e}(dr),Tr=function(t){function e(e){var i=e||{};t.call(this,{element:document.createElement("div"),target:i.target});var n=void 0!==i.className?i.className:"ol-zoom",r=void 0!==i.delta?i.delta:1,o=void 0!==i.zoomInLabel?i.zoomInLabel:"+",s=void 0!==i.zoomOutLabel?i.zoomOutLabel:"−",a=void 0!==i.zoomInTipLabel?i.zoomInTipLabel:"Zoom in",l=void 0!==i.zoomOutTipLabel?i.zoomOutTipLabel:"Zoom out",u=document.createElement("button");u.className=n+"-in",u.setAttribute("type","button"),u.title=a,u.appendChild("string"==typeof o?document.createTextNode(o):o),y(u,A.CLICK,this.handleClick_.bind(this,r));var h=document.createElement("button");h.className=n+"-out",h.setAttribute("type","button"),h.title=l,h.appendChild("string"==typeof s?document.createTextNode(s):s),y(h,A.CLICK,this.handleClick_.bind(this,-r));var c=n+" "+mr+" "+yr,p=this.element;p.className=c,p.appendChild(u),p.appendChild(h),this.duration_=void 0!==i.duration?i.duration:250}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.handleClick_=function(t,e){e.preventDefault(),this.zoomByDelta_(t)},e.prototype.zoomByDelta_=function(t){var e=this.getMap().getView();if(e){var i=e.getResolution();if(i){var n=e.constrainResolution(i,t);this.duration_>0?(e.getAnimating()&&e.cancelAnimations(),e.animate({resolution:n,duration:this.duration_,easing:ke})):e.setResolution(n)}}},e}(dr);function Rr(t){var e=t||{},i=new X;return(void 0===e.zoom||e.zoom)&&i.push(new Tr(e.zoomOptions)),(void 0===e.rotate||e.rotate)&&i.push(new Sr(e.rotateOptions)),(void 0===e.attribution||e.attribution)&&i.push(new jr(e.attributionOptions)),i}var Ir=function(t,e,i){this.decay_=t,this.minVelocity_=e,this.delay_=i,this.points_=[],this.angle_=0,this.initialVelocity_=0};Ir.prototype.begin=function(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0},Ir.prototype.update=function(t,e){this.points_.push(t,e,Date.now())},Ir.prototype.end=function(){if(this.points_.length<6)return!1;var t=Date.now()-this.delay_,e=this.points_.length-3;if(this.points_[e+2]<t)return!1;for(var i=e-3;i>0&&this.points_[i+2]>t;)i-=3;var n=this.points_[e+2]-this.points_[i+2];if(n<1e3/60)return!1;var r=this.points_[e]-this.points_[i],o=this.points_[e+1]-this.points_[i+1];return this.angle_=Math.atan2(o,r),this.initialVelocity_=Math.sqrt(r*r+o*o)/n,this.initialVelocity_>this.minVelocity_},Ir.prototype.getDistance=function(){return(this.minVelocity_-this.initialVelocity_)/this.decay_},Ir.prototype.getAngle=function(){return this.angle_};var Or=Ir,Ar={ACTIVE:"active"};function Lr(t,e,i,n){Mr(t,e=t.constrainRotation(e,0),i,n)}function Mr(t,e,i,n){if(void 0!==e){var r=t.getRotation(),o=t.getCenter();void 0!==r&&o&&n>0?t.animate({rotation:e,anchor:i,duration:n,easing:ke}):t.rotate(e,i)}}function kr(t,e,i,n,r){Dr(t,e=t.constrainResolution(e,0,r),i,n)}function Pr(t,e,i,n){var r=t.getResolution(),o=t.constrainResolution(r,e,0);if(void 0!==o){var s=t.getResolutions();o=de(o,t.getMinResolution()||s[s.length-1],t.getMaxResolution()||s[0])}if(i&&void 0!==o&&o!==r){var a=t.getCenter(),l=t.calculateCenterZoom(o,i);l=t.constrainCenter(l),i=[(o*a[0]-r*l[0])/(o-r),(o*a[1]-r*l[1])/(o-r)]}Dr(t,o,i,n)}function Dr(t,e,i,n){if(e){var r=t.getResolution(),o=t.getCenter();if(void 0!==r&&o&&e!==r&&n)t.animate({resolution:e,anchor:i,duration:n,easing:ke});else{if(i){var s=t.calculateCenterZoom(e,i);t.setCenter(s)}t.setResolution(e)}}}var Fr=function(t){function e(e){t.call(this),e.handleEvent&&(this.handleEvent=e.handleEvent),this.map_=null,this.setActive(!0)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getActive=function(){return this.get(Ar.ACTIVE)},e.prototype.getMap=function(){return this.map_},e.prototype.handleEvent=function(t){return!0},e.prototype.setActive=function(t){this.set(Ar.ACTIVE,t)},e.prototype.setMap=function(t){this.map_=t},e}(Y);function Nr(t){var e=!1;if(t.type==lt.DBLCLICK){var i=t.originalEvent,n=t.map,r=t.coordinate,o=i.shiftKey?-this.delta_:this.delta_;Pr(n.getView(),o,r,this.duration_),t.preventDefault(),e=!0}return!e}var Gr=function(t){function e(e){t.call(this,{handleEvent:Nr});var i=e||{};this.delta_=i.delta?i.delta:1,this.duration_=void 0!==i.duration?i.duration:250}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Fr),Wr=function(t){var e=t.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},zr=function(t){return t.target.getTargetElement()===document.activeElement},Br=j,Yr=function(t){var e=t.originalEvent;return 0==e.button&&!(et&&it&&e.ctrlKey)},Ur=function(t){var e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},Vr=function(t){var e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},Xr=function(t){var e=t.originalEvent.target.tagName;return"INPUT"!==e&&"SELECT"!==e&&"TEXTAREA"!==e},Hr=function(t){var e=t.pointerEvent;return he(void 0!==e,56),"mouse"==e.pointerType};function Zr(t){for(var e=t.length,i=0,n=0,r=0;r<e;r++)i+=t[r].clientX,n+=t[r].clientY;return[i/e,n/e]}var Kr=function(t){function e(e){var i=e||{};t.call(this,i),i.handleDownEvent&&(this.handleDownEvent=i.handleDownEvent),i.handleDragEvent&&(this.handleDragEvent=i.handleDragEvent),i.handleMoveEvent&&(this.handleMoveEvent=i.handleMoveEvent),i.handleUpEvent&&(this.handleUpEvent=i.handleUpEvent),i.stopDown&&(this.stopDown=i.stopDown),this.handlingDownUpSequence=!1,this.trackedPointers_={},this.targetPointers=[]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.handleDownEvent=function(t){return!1},e.prototype.handleDragEvent=function(t){},e.prototype.handleEvent=function(t){if(!t.pointerEvent)return!0;var e=!1;if(this.updateTrackedPointers_(t),this.handlingDownUpSequence){if(t.type==lt.POINTERDRAG)this.handleDragEvent(t);else if(t.type==lt.POINTERUP){var i=this.handleUpEvent(t);this.handlingDownUpSequence=i&&this.targetPointers.length>0}}else if(t.type==lt.POINTERDOWN){var n=this.handleDownEvent(t);n&&t.preventDefault(),this.handlingDownUpSequence=n,e=this.stopDown(n)}else t.type==lt.POINTERMOVE&&this.handleMoveEvent(t);return!e},e.prototype.handleMoveEvent=function(t){},e.prototype.handleUpEvent=function(t){return!1},e.prototype.stopDown=function(t){return t},e.prototype.updateTrackedPointers_=function(t){if(function(t){var e=t.type;return e===lt.POINTERDOWN||e===lt.POINTERDRAG||e===lt.POINTERUP}(t)){var e=t.pointerEvent,i=e.pointerId.toString();t.type==lt.POINTERUP?delete this.trackedPointers_[i]:t.type==lt.POINTERDOWN?this.trackedPointers_[i]=e:i in this.trackedPointers_&&(this.trackedPointers_[i]=e),this.targetPointers=p(this.trackedPointers_)}},e}(Fr),Jr=function(t){function e(e){t.call(this,{stopDown:C});var i=e||{};this.kinetic_=i.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1,this.condition_=i.condition?i.condition:Ur,this.noKinetic_=!1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.handleDragEvent=function(t){this.panning_||(this.panning_=!0,this.getMap().getView().setHint(Ce,1));var e=this.targetPointers,i=Zr(e);if(e.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(i[0],i[1]),this.lastCentroid){var n=this.lastCentroid[0]-i[0],r=i[1]-this.lastCentroid[1],o=t.map.getView(),s=[n,r];Le(s,o.getResolution()),Ae(s,o.getRotation()),Ie(s,o.getCenter()),s=o.constrainCenter(s),o.setCenter(s)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=i,this.lastPointersCount_=e.length},e.prototype.handleUpEvent=function(t){var e=t.map,i=e.getView();if(0===this.targetPointers.length){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){var n=this.kinetic_.getDistance(),r=this.kinetic_.getAngle(),o=i.getCenter(),s=e.getPixelFromCoordinate(o),a=e.getCoordinateFromPixel([s[0]-n*Math.cos(r),s[1]-n*Math.sin(r)]);i.animate({center:i.constrainCenter(a),duration:500,easing:ke})}return this.panning_&&(this.panning_=!1,i.setHint(Ce,-1)),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0},e.prototype.handleDownEvent=function(t){if(this.targetPointers.length>0&&this.condition_(t)){var e=t.map.getView();return this.lastCentroid=null,e.getAnimating()&&e.setCenter(t.frameState.viewState.center),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1},e}(Kr),qr=function(t){function e(e){var i=e||{};t.call(this,{stopDown:C}),this.condition_=i.condition?i.condition:Wr,this.lastAngle_=void 0,this.duration_=void 0!==i.duration?i.duration:250}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.handleDragEvent=function(t){if(Hr(t)){var e=t.map,i=e.getView();if(i.getConstraints().rotation!==Ee){var n=e.getSize(),r=t.pixel,o=Math.atan2(n[1]/2-r[1],r[0]-n[0]/2);if(void 0!==this.lastAngle_){var s=o-this.lastAngle_;Mr(i,i.getRotation()-s)}this.lastAngle_=o}}},e.prototype.handleUpEvent=function(t){if(!Hr(t))return!0;var e=t.map.getView();return e.setHint(Ce,-1),Lr(e,e.getRotation(),void 0,this.duration_),!1},e.prototype.handleDownEvent=function(t){return!!Hr(t)&&(!(!Yr(t)||!this.condition_(t))&&(t.map.getView().setHint(Ce,1),this.lastAngle_=void 0,!0))},e}(Kr),Qr=function(t){function e(e){t.call(this),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.className="ol-box "+e,this.map_=null,this.startPixel_=null,this.endPixel_=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.disposeInternal=function(){this.setMap(null)},e.prototype.render_=function(){var t=this.startPixel_,e=this.endPixel_,i=this.element_.style;i.left=Math.min(t[0],e[0])+"px",i.top=Math.min(t[1],e[1])+"px",i.width=Math.abs(e[0]-t[0])+"px",i.height=Math.abs(e[1]-t[1])+"px"},e.prototype.setMap=function(t){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);var e=this.element_.style;e.left=e.top=e.width=e.height="inherit"}this.map_=t,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)},e.prototype.setPixels=function(t,e){this.startPixel_=t,this.endPixel_=e,this.createOrUpdateGeometry(),this.render_()},e.prototype.createOrUpdateGeometry=function(){var t=this.startPixel_,e=this.endPixel_,i=[t,[t[0],e[1]],e,[e[0],t[1]]].map(this.map_.getCoordinateFromPixel,this.map_);i[4]=i[0].slice(),this.geometry_?this.geometry_.setCoordinates([i]):this.geometry_=new Kn([i])},e.prototype.getGeometry=function(){return this.geometry_},e}(w),$r="boxstart",to="boxdrag",eo="boxend",io=function(t){function e(e,i,n){t.call(this,e),this.coordinate=i,this.mapBrowserEvent=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(I);function no(){var t,e,i=this.getMap(),n=i.getView(),r=i.getSize(),o=this.getGeometry().getExtent();if(this.out_){var s=n.calculateExtent(r),a=(t=[i.getPixelFromCoordinate(ri(o)),i.getPixelFromCoordinate(ci(o))],ti(Ze(e),t));vi(s,1/n.getResolutionForExtent(a,r)),o=s}var l=n.constrainResolution(n.getResolutionForExtent(o,r)),u=si(o);u=n.constrainCenter(u),n.animate({resolution:l,center:u,duration:this.duration_,easing:ke})}var ro=function(t){function e(e){var i=e||{},n=i.condition?i.condition:Vr;t.call(this,{condition:n,className:i.className||"ol-dragzoom",onBoxEnd:no}),this.duration_=void 0!==i.duration?i.duration:200,this.out_=void 0!==i.out&&i.out}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(function(t){function e(e){t.call(this);var i=e||{};this.box_=new Qr(i.className||"ol-dragbox"),this.minArea_=void 0!==i.minArea?i.minArea:64,this.onBoxEnd_=i.onBoxEnd?i.onBoxEnd:S,this.startPixel_=null,this.condition_=i.condition?i.condition:Br,this.boxEndCondition_=i.boxEndCondition?i.boxEndCondition:this.defaultBoxEndCondition}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.defaultBoxEndCondition=function(t,e,i){var n=i[0]-e[0],r=i[1]-e[1];return n*n+r*r>=this.minArea_},e.prototype.getGeometry=function(){return this.box_.getGeometry()},e.prototype.handleDragEvent=function(t){Hr(t)&&(this.box_.setPixels(this.startPixel_,t.pixel),this.dispatchEvent(new io(to,t.coordinate,t)))},e.prototype.handleUpEvent=function(t){return!Hr(t)||(this.box_.setMap(null),this.boxEndCondition_(t,this.startPixel_,t.pixel)&&(this.onBoxEnd_(t),this.dispatchEvent(new io(eo,t.coordinate,t))),!1)},e.prototype.handleDownEvent=function(t){return!!Hr(t)&&(!(!Yr(t)||!this.condition_(t))&&(this.startPixel_=t.pixel,this.box_.setMap(t.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new io($r,t.coordinate,t)),!0))},e}(Kr)),oo={LEFT:37,UP:38,RIGHT:39,DOWN:40};function so(t){var e=!1;if(t.type==A.KEYDOWN){var i=t.originalEvent.keyCode;if(this.condition_(t)&&(i==oo.DOWN||i==oo.LEFT||i==oo.RIGHT||i==oo.UP)){var n=t.map.getView(),r=n.getResolution()*this.pixelDelta_,o=0,s=0;i==oo.DOWN?s=-r:i==oo.LEFT?o=-r:i==oo.RIGHT?o=r:s=r;var a=[o,s];Ae(a,n.getRotation()),function(t,e,i){var n=t.getCenter();if(n){var r=t.constrainCenter([n[0]+e[0],n[1]+e[1]]);i?t.animate({duration:i,easing:De,center:r}):t.setCenter(r)}}(n,a,this.duration_),t.preventDefault(),e=!0}}return!e}var ao=function(t){function e(e){t.call(this,{handleEvent:so});var i=e||{};this.defaultCondition_=function(t){return Ur(t)&&Xr(t)},this.condition_=void 0!==i.condition?i.condition:this.defaultCondition_,this.duration_=void 0!==i.duration?i.duration:100,this.pixelDelta_=void 0!==i.pixelDelta?i.pixelDelta:128}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Fr);function lo(t){var e=!1;if(t.type==A.KEYDOWN||t.type==A.KEYPRESS){var i=t.originalEvent.charCode;if(this.condition_(t)&&(i=="+".charCodeAt(0)||i=="-".charCodeAt(0))){var n=t.map,r=i=="+".charCodeAt(0)?this.delta_:-this.delta_;Pr(n.getView(),r,void 0,this.duration_),t.preventDefault(),e=!0}}return!e}var uo=function(t){function e(e){t.call(this,{handleEvent:lo});var i=e||{};this.condition_=i.condition?i.condition:Xr,this.delta_=i.delta?i.delta:1,this.duration_=void 0!==i.duration?i.duration:100}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Fr),ho="trackpad",co="wheel",po=function(t){function e(e){var i=e||{};t.call(this,i),this.delta_=0,this.duration_=void 0!==i.duration?i.duration:250,this.timeout_=void 0!==i.timeout?i.timeout:80,this.useAnchor_=void 0===i.useAnchor||i.useAnchor,this.constrainResolution_=i.constrainResolution||!1,this.condition_=i.condition?i.condition:Br,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.trackpadDeltaPerZoom_=300,this.trackpadZoomBuffer_=1.5}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.decrementInteractingHint_=function(){this.trackpadTimeoutId_=void 0,this.getMap().getView().setHint(Ce,-1)},e.prototype.handleEvent=function(t){if(!this.condition_(t))return!0;var e=t.type;if(e!==A.WHEEL&&e!==A.MOUSEWHEEL)return!0;t.preventDefault();var i,n=t.map,r=t.originalEvent;if(this.useAnchor_&&(this.lastAnchor_=t.coordinate),t.type==A.WHEEL?(i=r.deltaY,$&&r.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(i/=nt),r.deltaMode===WheelEvent.DOM_DELTA_LINE&&(i*=40)):t.type==A.MOUSEWHEEL&&(i=-r.wheelDeltaY,tt&&(i/=3)),0===i)return!1;var o=Date.now();if(void 0===this.startTime_&&(this.startTime_=o),(!this.mode_||o-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(i)<4?ho:co),this.mode_===ho){var s=n.getView();this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):s.setHint(Ce,1),this.trackpadTimeoutId_=setTimeout(this.decrementInteractingHint_.bind(this),this.trackpadEventGap_);var a=s.getResolution()*Math.pow(2,i/this.trackpadDeltaPerZoom_),l=s.getMinResolution(),u=s.getMaxResolution(),h=0;if(a<l?(a=Math.max(a,l/this.trackpadZoomBuffer_),h=1):a>u&&(a=Math.min(a,u*this.trackpadZoomBuffer_),h=-1),this.lastAnchor_){var c=s.calculateCenterZoom(a,this.lastAnchor_);s.setCenter(s.constrainCenter(c))}return s.setResolution(a),0===h&&this.constrainResolution_&&s.animate({resolution:s.constrainResolution(a,i>0?-1:1),easing:ke,anchor:this.lastAnchor_,duration:this.duration_}),h>0?s.animate({resolution:l,easing:ke,anchor:this.lastAnchor_,duration:500}):h<0&&s.animate({resolution:u,easing:ke,anchor:this.lastAnchor_,duration:500}),this.startTime_=o,!1}this.delta_+=i;var p=Math.max(this.timeout_-(o-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,n),p),!1},e.prototype.handleWheelZoom_=function(t){var e=t.getView();e.getAnimating()&&e.cancelAnimations();Pr(e,-de(this.delta_,-1,1),this.lastAnchor_,this.duration_),this.mode_=void 0,this.delta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0},e.prototype.setMouseAnchor=function(t){this.useAnchor_=t,t||(this.lastAnchor_=null)},e}(Fr),fo=function(t){function e(e){var i=e||{},n=i;n.stopDown||(n.stopDown=C),t.call(this,n),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=void 0!==i.threshold?i.threshold:.3,this.duration_=void 0!==i.duration?i.duration:250}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.handleDragEvent=function(t){var e=0,i=this.targetPointers[0],n=this.targetPointers[1],r=Math.atan2(n.clientY-i.clientY,n.clientX-i.clientX);if(void 0!==this.lastAngle_){var o=r-this.lastAngle_;this.rotationDelta_+=o,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),e=o}this.lastAngle_=r;var s=t.map,a=s.getView();if(a.getConstraints().rotation!==Ee){var l=s.getViewport().getBoundingClientRect(),u=Zr(this.targetPointers);if(u[0]-=l.left,u[1]-=l.top,this.anchor_=s.getCoordinateFromPixel(u),this.rotating_){var h=a.getRotation();s.render(),Mr(a,h+e,this.anchor_)}}},e.prototype.handleUpEvent=function(t){if(this.targetPointers.length<2){var e=t.map.getView();if(e.setHint(Ce,-1),this.rotating_)Lr(e,e.getRotation(),this.anchor_,this.duration_);return!1}return!0},e.prototype.handleDownEvent=function(t){if(this.targetPointers.length>=2){var e=t.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||e.getView().setHint(Ce,1),!0}return!1},e}(Kr),vo=function(t){function e(e){var i=e||{},n=i;n.stopDown||(n.stopDown=C),t.call(this,n),this.constrainResolution_=i.constrainResolution||!1,this.anchor_=null,this.duration_=void 0!==i.duration?i.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.handleDragEvent=function(t){var e=1,i=this.targetPointers[0],n=this.targetPointers[1],r=i.clientX-n.clientX,o=i.clientY-n.clientY,s=Math.sqrt(r*r+o*o);void 0!==this.lastDistance_&&(e=this.lastDistance_/s),this.lastDistance_=s;var a=t.map,l=a.getView(),u=l.getResolution(),h=l.getMaxResolution(),c=l.getMinResolution(),p=u*e;p>h?(e=h/u,p=h):p<c&&(e=c/u,p=c),1!=e&&(this.lastScaleDelta_=e);var f=a.getViewport().getBoundingClientRect(),d=Zr(this.targetPointers);d[0]-=f.left,d[1]-=f.top,this.anchor_=a.getCoordinateFromPixel(d),a.render(),Dr(l,p,this.anchor_)},e.prototype.handleUpEvent=function(t){if(this.targetPointers.length<2){var e=t.map.getView();e.setHint(Ce,-1);var i=e.getResolution();if(this.constrainResolution_||i<e.getMinResolution()||i>e.getMaxResolution()){var n=this.lastScaleDelta_-1;kr(e,i,this.anchor_,this.duration_,n)}return!1}return!0},e.prototype.handleDownEvent=function(t){if(this.targetPointers.length>=2){var e=t.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||e.getView().setHint(Ce,1),!0}return!1},e}(Kr);var go=function(t){function e(e){if(t.call(this),this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,y(this,B(this.geometryName_),this.handleGeometryChanged_,this),e)if("function"==typeof e.getSimplifiedGeometry){var i=e;this.setGeometry(i)}else{var n=e;this.setProperties(n)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){var t=new e(this.getProperties());t.setGeometryName(this.getGeometryName());var i=this.getGeometry();i&&t.setGeometry(i.clone());var n=this.getStyle();return n&&t.setStyle(n),t},e.prototype.getGeometry=function(){return this.get(this.geometryName_)},e.prototype.getId=function(){return this.id_},e.prototype.getGeometryName=function(){return this.geometryName_},e.prototype.getStyle=function(){return this.style_},e.prototype.getStyleFunction=function(){return this.styleFunction_},e.prototype.handleGeometryChange_=function(){this.changed()},e.prototype.handleGeometryChanged_=function(){this.geometryChangeKey_&&(b(this.geometryChangeKey_),this.geometryChangeKey_=null);var t=this.getGeometry();t&&(this.geometryChangeKey_=y(t,A.CHANGE,this.handleGeometryChange_,this)),this.changed()},e.prototype.setGeometry=function(t){this.set(this.geometryName_,t)},e.prototype.setStyle=function(t){this.style_=t,this.styleFunction_=t?function(t){if("function"==typeof t)return t;var e;if(Array.isArray(t))e=t;else{he("function"==typeof t.getZIndex,41);var i=t;e=[i]}return function(){return e}}(t):void 0,this.changed()},e.prototype.setId=function(t){this.id_=t,this.changed()},e.prototype.setGeometryName=function(t){x(this,B(this.geometryName_),this.handleGeometryChanged_,this),this.geometryName_=t,y(this,B(this.geometryName_),this.handleGeometryChanged_,this),this.handleGeometryChanged_()},e}(Y),mo=function(t){function e(e,i,n){if(t.call(this),void 0!==n&&void 0===i)this.setFlatCoordinates(n,e);else{var r=i||0;this.setCenterAndRadius(e,r,n)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),void 0,this.layout)},e.prototype.closestPointXY=function(t,e,i,n){var r=this.flatCoordinates,o=t-r[0],s=e-r[1],a=o*o+s*s;if(a<n){if(0===a)for(var l=0;l<this.stride;++l)i[l]=r[l];else{var u=this.getRadius()/Math.sqrt(a);i[0]=r[0]+u*o,i[1]=r[1]+u*s;for(var h=2;h<this.stride;++h)i[h]=r[h]}return i.length=this.stride,a}return n},e.prototype.containsXY=function(t,e){var i=this.flatCoordinates,n=t-i[0],r=e-i[1];return n*n+r*r<=this.getRadiusSquared_()},e.prototype.getCenter=function(){return this.flatCoordinates.slice(0,this.stride)},e.prototype.computeExtent=function(t){var e=this.flatCoordinates,i=e[this.stride]-e[0];return He(e[0]-i,e[1]-i,e[0]+i,e[1]+i,t)},e.prototype.getRadius=function(){return Math.sqrt(this.getRadiusSquared_())},e.prototype.getRadiusSquared_=function(){var t=this.flatCoordinates[this.stride]-this.flatCoordinates[0],e=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return t*t+e*e},e.prototype.getType=function(){return mi.CIRCLE},e.prototype.intersectsExtent=function(t){if(fi(t,this.getExtent())){var e=this.getCenter();return t[0]<=e[0]&&t[2]>=e[0]||(t[1]<=e[1]&&t[3]>=e[1]||ni(t,this.intersectsCoordinate,this))}return!1},e.prototype.setCenter=function(t){var e=this.stride,i=this.flatCoordinates[e]-this.flatCoordinates[0],n=t.slice();n[e]=n[0]+i;for(var r=1;r<e;++r)n[e+r]=t[r];this.setFlatCoordinates(this.layout,n),this.changed()},e.prototype.setCenterAndRadius=function(t,e,i){this.setLayout(i,t,0),this.flatCoordinates||(this.flatCoordinates=[]);var n=this.flatCoordinates,r=wn(n,0,t,this.stride);n[r++]=n[0]+e;for(var o=1,s=this.stride;o<s;++o)n[r++]=n[o];n.length=r,this.changed()},e.prototype.getCoordinates=function(){return null},e.prototype.setCoordinates=function(t,e){},e.prototype.setRadius=function(t){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+t,this.changed()},e}(vn);mo.prototype.transform;var yo=mo;function _o(t,e,i,n,r,o){var s=NaN,a=NaN,l=(i-e)/n;if(1===l)s=t[e],a=t[e+1];else if(2==l)s=(1-r)*t[e]+r*t[e+n],a=(1-r)*t[e+1]+r*t[e+n+1];else if(0!==l){for(var u=t[e],h=t[e+1],c=0,p=[0],f=e+n;f<i;f+=n){var d=t[f],v=t[f+1];c+=Math.sqrt((d-u)*(d-u)+(v-h)*(v-h)),p.push(c),u=d,h=v}var g=r*c,m=function(t,e,i){for(var n,r,o=i||Ut,s=0,a=t.length,l=!1;s<a;)(r=+o(t[n=s+(a-s>>1)],e))<0?s=n+1:(a=n,l=!r);return l?s:~s}(p,g);if(m<0){var y=(g-p[-m-2])/(p[-m-1]-p[-m-2]),_=e+(-m-2)*n;s=xe(t[_],t[_+n],y),a=xe(t[_+1],t[_+n+1],y)}else s=t[e+m*n],a=t[e+m*n+1]}return o?(o[0]=s,o[1]=a,o):[s,a]}function xo(t,e,i,n,r,o){if(i==e)return null;var s;if(r<t[e+n-1])return o?((s=t.slice(e,e+n))[n-1]=r,s):null;if(t[i-1]<r)return o?((s=t.slice(i-n,i))[n-1]=r,s):null;if(r==t[e+n-1])return t.slice(e,e+n);for(var a=e/n,l=i/n;a<l;){var u=a+l>>1;r<t[(u+1)*n-1]?l=u:a=u+1}var h=t[a*n-1];if(r==h)return t.slice((a-1)*n,(a-1)*n+n);var c=(r-h)/(t[(a+1)*n-1]-h);s=[];for(var p=0;p<n-1;++p)s.push(xe(t[(a-1)*n+p],t[a*n+p],c));return s.push(r),s}function bo(t,e,i,n){for(var r=t[e],o=t[e+1],s=0,a=e+n;a<i;a+=n){var l=t[a],u=t[a+1];s+=Math.sqrt((l-r)*(l-r)+(u-o)*(u-o)),r=l,o=u}return s}var Eo=function(t){function e(e,i){t.call(this),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,void 0===i||Array.isArray(e[0])?this.setCoordinates(e,i):this.setFlatCoordinates(i,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.appendCoordinate=function(t){this.flatCoordinates?Zt(this.flatCoordinates,t):this.flatCoordinates=t.slice(),this.changed()},e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout)},e.prototype.closestPointXY=function(t,e,i,n){return n<ze(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(_n(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),bn(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,t,e,i,n))},e.prototype.forEachSegment=function(t){return Wn(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},e.prototype.getCoordinateAtM=function(t,e){if(this.layout!=yi.XYM&&this.layout!=yi.XYZM)return null;var i=void 0!==e&&e;return xo(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,i)},e.prototype.getCoordinates=function(){return Sn(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getCoordinateAt=function(t,e){return _o(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e)},e.prototype.getLength=function(){return bo(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getFlatMidpoint=function(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_},e.prototype.getSimplifiedGeometryInternal=function(t){var i=[];return i.length=In(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,i,0),new e(i,yi.XY)},e.prototype.getType=function(){return mi.LINE_STRING},e.prototype.intersectsExtent=function(t){return zn(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=jn(this.flatCoordinates,0,t,this.stride),this.changed()},e}(vn),wo=function(t){function e(e,i,n){if(t.call(this),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(e[0]))this.setCoordinates(e,i);else if(void 0!==i&&n)this.setFlatCoordinates(i,e),this.ends_=n;else{for(var r=this.getLayout(),o=e,s=[],a=[],l=0,u=o.length;l<u;++l){var h=o[l];0===l&&(r=h.getLayout()),Zt(s,h.getFlatCoordinates()),a.push(s.length)}this.setFlatCoordinates(r,s),this.ends_=a}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.appendLineString=function(t){this.flatCoordinates?Zt(this.flatCoordinates,t.getFlatCoordinates().slice()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout,this.ends_.slice())},e.prototype.closestPointXY=function(t,e,i,n){return n<ze(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(xn(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),En(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,t,e,i,n))},e.prototype.getCoordinateAtM=function(t,e,i){if(this.layout!=yi.XYM&&this.layout!=yi.XYZM||0===this.flatCoordinates.length)return null;var n=void 0!==e&&e,r=void 0!==i&&i;return function(t,e,i,n,r,o,s){if(s)return xo(t,e,i[i.length-1],n,r,o);var a;if(r<t[n-1])return o?((a=t.slice(0,n))[n-1]=r,a):null;if(t[t.length-1]<r)return o?((a=t.slice(t.length-n))[n-1]=r,a):null;for(var l=0,u=i.length;l<u;++l){var h=i[l];if(e!=h){if(r<t[e+n-1])return null;if(r<=t[h-1])return xo(t,e,h,n,r,!1);e=h}}return null}(this.flatCoordinates,0,this.ends_,this.stride,t,n,r)},e.prototype.getCoordinates=function(){return Tn(this.flatCoordinates,0,this.ends_,this.stride)},e.prototype.getEnds=function(){return this.ends_},e.prototype.getLineString=function(t){return t<0||this.ends_.length<=t?null:new Eo(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)},e.prototype.getLineStrings=function(){for(var t=this.flatCoordinates,e=this.ends_,i=this.layout,n=[],r=0,o=0,s=e.length;o<s;++o){var a=e[o],l=new Eo(t.slice(r,a),i);n.push(l),r=a}return n},e.prototype.getFlatMidpoints=function(){for(var t=[],e=this.flatCoordinates,i=0,n=this.ends_,r=this.stride,o=0,s=n.length;o<s;++o){var a=n[o];Zt(t,_o(e,i,a,r,.5)),i=a}return t},e.prototype.getSimplifiedGeometryInternal=function(t){var i=[],n=[];return i.length=On(this.flatCoordinates,0,this.ends_,this.stride,t,i,0,n),new e(i,yi.XY,n)},e.prototype.getType=function(){return mi.MULTI_LINE_STRING},e.prototype.intersectsExtent=function(t){return function(t,e,i,n,r){for(var o=0,s=i.length;o<s;++o){if(zn(t,e,i[o],n,r))return!0;e=i[o]}return!1}(this.flatCoordinates,0,this.ends_,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var i=Cn(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===i.length?0:i[i.length-1],this.changed()},e}(vn),jo=function(t){function e(e,i){t.call(this),i&&!Array.isArray(e[0])?this.setFlatCoordinates(i,e):this.setCoordinates(e,i)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.appendPoint=function(t){this.flatCoordinates?Zt(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.changed()},e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout)},e.prototype.closestPointXY=function(t,e,i,n){if(n<ze(this.getExtent(),t,e))return n;for(var r=this.flatCoordinates,o=this.stride,s=0,a=r.length;s<a;s+=o){var l=me(t,e,r[s],r[s+1]);if(l<n){n=l;for(var u=0;u<o;++u)i[u]=r[s+u];i.length=o}}return n},e.prototype.getCoordinates=function(){return Sn(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getPoint=function(t){var e=this.flatCoordinates?this.flatCoordinates.length/this.stride:0;return t<0||e<=t?null:new Pn(this.flatCoordinates.slice(t*this.stride,(t+1)*this.stride),this.layout)},e.prototype.getPoints=function(){for(var t=this.flatCoordinates,e=this.layout,i=this.stride,n=[],r=0,o=t.length;r<o;r+=i){var s=new Pn(t.slice(r,r+i),e);n.push(s)}return n},e.prototype.getType=function(){return mi.MULTI_POINT},e.prototype.intersectsExtent=function(t){for(var e=this.flatCoordinates,i=this.stride,n=0,r=e.length;n<r;n+=i){if(Ue(t,e[n],e[n+1]))return!0}return!1},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=jn(this.flatCoordinates,0,t,this.stride),this.changed()},e}(vn);var Co=function(t){function e(e,i,n){if(t.call(this),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!n&&!Array.isArray(e[0])){for(var r=this.getLayout(),o=e,s=[],a=[],l=0,u=o.length;l<u;++l){var h=o[l];0===l&&(r=h.getLayout());for(var c=s.length,p=h.getEnds(),f=0,d=p.length;f<d;++f)p[f]+=c;Zt(s,h.getFlatCoordinates()),a.push(p)}i=r,e=s,n=a}void 0!==i&&n?(this.setFlatCoordinates(i,e),this.endss_=n):this.setCoordinates(e,i)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.appendPolygon=function(t){var e;if(this.flatCoordinates){var i=this.flatCoordinates.length;Zt(this.flatCoordinates,t.getFlatCoordinates());for(var n=0,r=(e=t.getEnds().slice()).length;n<r;++n)e[n]+=i}else this.flatCoordinates=t.getFlatCoordinates().slice(),e=t.getEnds().slice(),this.endss_.push();this.endss_.push(e),this.changed()},e.prototype.clone=function(){for(var t=this.endss_.length,i=new Array(t),n=0;n<t;++n)i[n]=this.endss_[n].slice();return new e(this.flatCoordinates.slice(),this.layout,i)},e.prototype.closestPointXY=function(t,e,i,n){return n<ze(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(function(t,e,i,n,r){for(var o=0,s=i.length;o<s;++o){var a=i[o];r=xn(t,e,a,n,r),e=a[a.length-1]}return r}(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),function(t,e,i,n,r,o,s,a,l,u,h){for(var c=h||[NaN,NaN],p=0,f=i.length;p<f;++p){var d=i[p];u=En(t,e,d,n,r,o,s,a,l,u,c),e=d[d.length-1]}return u}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,t,e,i,n))},e.prototype.containsXY=function(t,e){return function(t,e,i,n,r,o){if(0===i.length)return!1;for(var s=0,a=i.length;s<a;++s){var l=i[s];if(Nn(t,e,l,n,r,o))return!0;e=l[l.length-1]}return!1}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t,e)},e.prototype.getArea=function(){return function(t,e,i,n){for(var r=0,o=0,s=i.length;o<s;++o){var a=i[o];r+=mn(t,e,a,n),e=a[a.length-1]}return r}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)},e.prototype.getCoordinates=function(t){var e;return void 0!==t?Hn(e=this.getOrientedFlatCoordinates().slice(),0,this.endss_,this.stride,t):e=this.flatCoordinates,Rn(e,0,this.endss_,this.stride)},e.prototype.getEndss=function(){return this.endss_},e.prototype.getFlatInteriorPoints=function(){if(this.flatInteriorPointsRevision_!=this.getRevision()){var t=function(t,e,i,n){for(var r=[],o=[1/0,1/0,-1/0,-1/0],s=0,a=i.length;s<a;++s){var l=i[s];o=Je(t,e,l[0],n),r.push((o[0]+o[2])/2,(o[1]+o[3])/2),e=l[l.length-1]}return r}(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=function(t,e,i,n,r){for(var o=[],s=0,a=i.length;s<a;++s){var l=i[s];o=Gn(t,e,l,n,r,2*s,o),e=l[l.length-1]}return o}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_},e.prototype.getInteriorPoints=function(){return new jo(this.getFlatInteriorPoints().slice(),yi.XYM)},e.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var t=this.flatCoordinates;!function(t,e,i,n,r){for(var o=0,s=i.length;o<s;++o)if(!Vn(t,e,i[o],n,r))return!1;return!0}(t,0,this.endss_,this.stride)?(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=Hn(this.orientedFlatCoordinates_,0,this.endss_,this.stride)):this.orientedFlatCoordinates_=t,this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},e.prototype.getSimplifiedGeometryInternal=function(t){var i=[],n=[];return i.length=function(t,e,i,n,r,o,s,a){for(var l=0,u=i.length;l<u;++l){var h=i[l],c=[];s=Mn(t,e,h,n,r,o,s,c),a.push(c),e=h[h.length-1]}return s}(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(t),i,0,n),new e(i,yi.XY,n)},e.prototype.getPolygon=function(t){if(t<0||this.endss_.length<=t)return null;var e;if(0===t)e=0;else{var i=this.endss_[t-1];e=i[i.length-1]}var n=this.endss_[t].slice(),r=n[n.length-1];if(0!==e)for(var o=0,s=n.length;o<s;++o)n[o]-=e;return new Kn(this.flatCoordinates.slice(e,r),this.layout,n)},e.prototype.getPolygons=function(){for(var t=this.layout,e=this.flatCoordinates,i=this.endss_,n=[],r=0,o=0,s=i.length;o<s;++o){var a=i[o].slice(),l=a[a.length-1];if(0!==r)for(var u=0,h=a.length;u<h;++u)a[u]-=r;var c=new Kn(e.slice(r,l),t,a);n.push(c),r=l}return n},e.prototype.getType=function(){return mi.MULTI_POLYGON},e.prototype.intersectsExtent=function(t){return function(t,e,i,n,r){for(var o=0,s=i.length;o<s;++o){var a=i[o];if(Bn(t,e,a,n,r))return!0;e=a[a.length-1]}return!1}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,3),this.flatCoordinates||(this.flatCoordinates=[]);var i=function(t,e,i,n,r){for(var o=r||[],s=0,a=0,l=i.length;a<l;++a){var u=Cn(t,e,i[a],n,o[s]);o[s++]=u,e=u[u.length-1]}return o.length=s,o}(this.flatCoordinates,0,t,this.stride,this.endss_);if(0===i.length)this.flatCoordinates.length=0;else{var n=i[i.length-1];this.flatCoordinates.length=0===n.length?0:n[n.length-1]}this.changed()},e}(vn),So={IMAGE:"IMAGE",TILE:"TILE",VECTOR_TILE:"VECTOR_TILE",VECTOR:"VECTOR"},To={IMAGE:"image",VECTOR:"vector"},Ro=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,Io=/^([a-z]*)$/i;function Oo(t){return"string"==typeof t?t:Mo(t)}var Ao=function(){var t={},e=0;return function(i){var n;if(t.hasOwnProperty(i))n=t[i];else{if(e>=1024){var r=0;for(var o in t)0==(3&r++)&&(delete t[o],--e)}n=function(t){var e,i,n,r,o;Io.exec(t)&&(t=function(t){var e=document.createElement("div");if(e.style.color=t,""!==e.style.color){document.body.appendChild(e);var i=getComputedStyle(e).color;return document.body.removeChild(e),i}return""}(t));if(Ro.exec(t)){var s,a=t.length-1;s=a<=4?1:2;var l=4===a||8===a;e=parseInt(t.substr(1+0*s,s),16),i=parseInt(t.substr(1+1*s,s),16),n=parseInt(t.substr(1+2*s,s),16),r=l?parseInt(t.substr(1+3*s,s),16):255,1==s&&(e=(e<<4)+e,i=(i<<4)+i,n=(n<<4)+n,l&&(r=(r<<4)+r)),o=[e,i,n,r/255]}else 0==t.indexOf("rgba(")?Lo(o=t.slice(5,-1).split(",").map(Number)):0==t.indexOf("rgb(")?((o=t.slice(4,-1).split(",").map(Number)).push(1),Lo(o)):he(!1,14);return o}(i),t[i]=n,++e}return n}}();function Lo(t){return t[0]=de(t[0]+.5|0,0,255),t[1]=de(t[1]+.5|0,0,255),t[2]=de(t[2]+.5|0,0,255),t[3]=de(t[3],0,1),t}function Mo(t){var e=t[0];e!=(0|e)&&(e=e+.5|0);var i=t[1];i!=(0|i)&&(i=i+.5|0);var n=t[2];return n!=(0|n)&&(n=n+.5|0),"rgba("+e+","+i+","+n+","+(void 0===t[3]?1:t[3])+")"}function ko(t){return Array.isArray(t)?Mo(t):t}var Po={IDLE:0,LOADING:1,LOADED:2,ERROR:3},Do=function(t){function e(e){t.call(this),this.highWaterMark=void 0!==e?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.canExpireCache=function(){return this.getCount()>this.highWaterMark},e.prototype.clear=function(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null,this.dispatchEvent(A.CLEAR)},e.prototype.containsKey=function(t){return this.entries_.hasOwnProperty(t)},e.prototype.forEach=function(t,e){for(var i=this.oldest_;i;)t.call(e,i.value_,i.key_,this),i=i.newer},e.prototype.get=function(t){var e=this.entries_[t];return he(void 0!==e,15),e===this.newest_?e.value_:(e===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(e.newer.older=e.older,e.older.newer=e.newer),e.newer=null,e.older=this.newest_,this.newest_.newer=e,this.newest_=e,e.value_)},e.prototype.remove=function(t){var e=this.entries_[t];return he(void 0!==e,15),e===this.newest_?(this.newest_=e.older,this.newest_&&(this.newest_.newer=null)):e===this.oldest_?(this.oldest_=e.newer,this.oldest_&&(this.oldest_.older=null)):(e.newer.older=e.older,e.older.newer=e.newer),delete this.entries_[t],--this.count_,e.value_},e.prototype.getCount=function(){return this.count_},e.prototype.getKeys=function(){var t,e=new Array(this.count_),i=0;for(t=this.newest_;t;t=t.older)e[i++]=t.key_;return e},e.prototype.getValues=function(){var t,e=new Array(this.count_),i=0;for(t=this.newest_;t;t=t.older)e[i++]=t.value_;return e},e.prototype.peekLast=function(){return this.oldest_.value_},e.prototype.peekLastKey=function(){return this.oldest_.key_},e.prototype.peekFirstKey=function(){return this.newest_.key_},e.prototype.pop=function(){var t=this.oldest_;return delete this.entries_[t.key_],t.newer&&(t.newer.older=null),this.oldest_=t.newer,this.oldest_||(this.newest_=null),--this.count_,t.value_},e.prototype.replace=function(t,e){this.get(t),this.entries_[t].value_=e},e.prototype.set=function(t,e){he(!(t in this.entries_),16);var i={key_:t,newer:null,older:this.newest_,value_:e};this.newest_?this.newest_.newer=i:this.oldest_=i,this.newest_=i,this.entries_[t]=i,++this.count_},e.prototype.setSize=function(t){this.highWaterMark=t},e.prototype.prune=function(){for(;this.canExpireCache();)this.pop()},e}(O),Fo=[0,0,0,1],No=[],Go=[0,0,0,1],Wo=[0,0,0,0],zo=new Do,Bo={},Yo=null,Uo={},Vo=function(){var t,e,i=60,n=Bo,r="32px ",o=["monospace","serif"],s=o.length,a="wmytzilWMYTZIL@#/&?$%10";function l(t){for(var i=Xo(),n=100;n<=700;n+=300){for(var l=n+" ",u=!0,h=0;h<s;++h){var c=o[h];if(i.font=l+r+c,e=i.measureText(a).width,t!=c){i.font=l+r+t+","+c;var p=i.measureText(a).width;u=u&&p!=e}}if(u)return!0}return!1}function u(){var e=!0;for(var r in n)n[r]<i&&(l(r)?(n[r]=i,c(Uo),Yo=null,zo.clear()):(++n[r],e=!1));e&&(clearInterval(t),t=void 0)}return function(e){var r=xr(e);if(r)for(var o=0,s=r.length;o<s;++o){var a=r[o];a in n||(n[a]=i,l(a)||(n[a]=0,void 0===t&&(t=setInterval(u,32))))}}}();function Xo(){return Yo||(Yo=er(1,1)),Yo}var Ho,Zo,Ko=(Zo=Uo,function(t){var e=Zo[t];return void 0==e&&(Ho||((Ho=document.createElement("span")).textContent="M",Ho.style.margin=Ho.style.padding="0 !important",Ho.style.position="absolute !important",Ho.style.left="-99999px !important"),Ho.style.font=t,document.body.appendChild(Ho),e=Zo[t]=Ho.offsetHeight,document.body.removeChild(Ho)),e});function Jo(t,e){var i=Xo();return t!=i.font&&(i.font=t),i.measureText(e).width}function qo(t,e,i,n){0!==e&&(t.translate(i,n),t.rotate(e),t.translate(-i,-n))}var Qo=[1,0,0,1,0,0];function $o(t,e,i,n,r,o,s,a,l,u,h){var c;1!=i&&(c=t.globalAlpha,t.globalAlpha=c*i),e&&t.setTransform.apply(t,e),t.drawImage(n,r,o,s,a,l,u,s*h,a*h),c&&(t.globalAlpha=c),e&&t.setTransform.apply(t,Qo)}var ts=function(t){this.opacity_=t.opacity,this.rotateWithView_=t.rotateWithView,this.rotation_=t.rotation,this.scale_=t.scale};ts.prototype.clone=function(){return new ts({opacity:this.getOpacity(),scale:this.getScale(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView()})},ts.prototype.getOpacity=function(){return this.opacity_},ts.prototype.getRotateWithView=function(){return this.rotateWithView_},ts.prototype.getRotation=function(){return this.rotation_},ts.prototype.getScale=function(){return this.scale_},ts.prototype.getSnapToPixel=function(){return!1},ts.prototype.getAnchor=function(){return M()},ts.prototype.getImage=function(t){return M()},ts.prototype.getHitDetectionImage=function(t){return M()},ts.prototype.getImageState=function(){return M()},ts.prototype.getImageSize=function(){return M()},ts.prototype.getHitDetectionImageSize=function(){return M()},ts.prototype.getOrigin=function(){return M()},ts.prototype.getSize=function(){return M()},ts.prototype.setOpacity=function(t){this.opacity_=t},ts.prototype.setRotateWithView=function(t){this.rotateWithView_=t},ts.prototype.setRotation=function(t){this.rotation_=t},ts.prototype.setScale=function(t){this.scale_=t},ts.prototype.setSnapToPixel=function(t){},ts.prototype.listenImageChange=function(t,e){return M()},ts.prototype.load=function(){M()},ts.prototype.unlistenImageChange=function(t,e){M()};var es=ts,is=function(t){function e(e){var i=void 0!==e.rotateWithView&&e.rotateWithView;t.call(this,{opacity:1,rotateWithView:i,rotation:void 0!==e.rotation?e.rotation:0,scale:1}),this.checksums_=null,this.canvas_=null,this.hitDetectionCanvas_=null,this.fill_=void 0!==e.fill?e.fill:null,this.origin_=[0,0],this.points_=e.points,this.radius_=void 0!==e.radius?e.radius:e.radius1,this.radius2_=e.radius2,this.angle_=void 0!==e.angle?e.angle:0,this.stroke_=void 0!==e.stroke?e.stroke:null,this.anchor_=null,this.size_=null,this.imageSize_=null,this.hitDetectionImageSize_=null,this.atlasManager_=e.atlasManager,this.render_(this.atlasManager_)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){var t=new e({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),atlasManager:this.atlasManager_});return t.setOpacity(this.getOpacity()),t.setScale(this.getScale()),t},e.prototype.getAnchor=function(){return this.anchor_},e.prototype.getAngle=function(){return this.angle_},e.prototype.getFill=function(){return this.fill_},e.prototype.getHitDetectionImage=function(t){return this.hitDetectionCanvas_},e.prototype.getImage=function(t){return this.canvas_},e.prototype.getImageSize=function(){return this.imageSize_},e.prototype.getHitDetectionImageSize=function(){return this.hitDetectionImageSize_},e.prototype.getImageState=function(){return Po.LOADED},e.prototype.getOrigin=function(){return this.origin_},e.prototype.getPoints=function(){return this.points_},e.prototype.getRadius=function(){return this.radius_},e.prototype.getRadius2=function(){return this.radius2_},e.prototype.getSize=function(){return this.size_},e.prototype.getStroke=function(){return this.stroke_},e.prototype.listenImageChange=function(t,e){},e.prototype.load=function(){},e.prototype.unlistenImageChange=function(t,e){},e.prototype.render_=function(t){var e,i,n="",r="",o=0,s=null,a=0,l=0;this.stroke_&&(null===(i=this.stroke_.getColor())&&(i=Go),i=ko(i),void 0===(l=this.stroke_.getWidth())&&(l=1),s=this.stroke_.getLineDash(),a=this.stroke_.getLineDashOffset(),rt||(s=null,a=0),void 0===(r=this.stroke_.getLineJoin())&&(r="round"),void 0===(n=this.stroke_.getLineCap())&&(n="round"),void 0===(o=this.stroke_.getMiterLimit())&&(o=10));var u=2*(this.radius_+l)+1,h={strokeStyle:i,strokeWidth:l,size:u,lineCap:n,lineDash:s,lineDashOffset:a,lineJoin:r,miterLimit:o};if(void 0===t){var c=er(u,u);this.canvas_=c.canvas,e=u=this.canvas_.width,this.draw_(h,c,0,0),this.createHitDetectionCanvas_(h)}else{u=Math.round(u);var p,f=!this.fill_;f&&(p=this.drawHitDetectionCanvas_.bind(this,h));var d=this.getChecksum(),v=t.add(d,u,u,this.draw_.bind(this,h),p);this.canvas_=v.image,this.origin_=[v.offsetX,v.offsetY],e=v.image.width,f?(this.hitDetectionCanvas_=v.hitImage,this.hitDetectionImageSize_=[v.hitImage.width,v.hitImage.height]):(this.hitDetectionCanvas_=this.canvas_,this.hitDetectionImageSize_=[e,e])}this.anchor_=[u/2,u/2],this.size_=[u,u],this.imageSize_=[e,e]},e.prototype.draw_=function(t,e,i,n){var r,o,s;e.setTransform(1,0,0,1,0,0),e.translate(i,n),e.beginPath();var a=this.points_;if(a===1/0)e.arc(t.size/2,t.size/2,this.radius_,0,2*Math.PI,!0);else{var l=void 0!==this.radius2_?this.radius2_:this.radius_;for(l!==this.radius_&&(a*=2),r=0;r<=a;r++)o=2*r*Math.PI/a-Math.PI/2+this.angle_,s=r%2==0?this.radius_:l,e.lineTo(t.size/2+s*Math.cos(o),t.size/2+s*Math.sin(o))}if(this.fill_){var u=this.fill_.getColor();null===u&&(u=Fo),e.fillStyle=ko(u),e.fill()}this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineCap=t.lineCap,e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke()),e.closePath()},e.prototype.createHitDetectionCanvas_=function(t){if(this.hitDetectionImageSize_=[t.size,t.size],this.fill_)this.hitDetectionCanvas_=this.canvas_;else{var e=er(t.size,t.size);this.hitDetectionCanvas_=e.canvas,this.drawHitDetectionCanvas_(t,e,0,0)}},e.prototype.drawHitDetectionCanvas_=function(t,e,i,n){e.setTransform(1,0,0,1,0,0),e.translate(i,n),e.beginPath();var r=this.points_;if(r===1/0)e.arc(t.size/2,t.size/2,this.radius_,0,2*Math.PI,!0);else{var o,s,a,l=void 0!==this.radius2_?this.radius2_:this.radius_;for(l!==this.radius_&&(r*=2),o=0;o<=r;o++)a=2*o*Math.PI/r-Math.PI/2+this.angle_,s=o%2==0?this.radius_:l,e.lineTo(t.size/2+s*Math.cos(a),t.size/2+s*Math.sin(a))}e.fillStyle=Oo(Fo),e.fill(),this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.stroke()),e.closePath()},e.prototype.getChecksum=function(){var t=this.stroke_?this.stroke_.getChecksum():"-",e=this.fill_?this.fill_.getChecksum():"-";if(!this.checksums_||t!=this.checksums_[1]||e!=this.checksums_[2]||this.radius_!=this.checksums_[3]||this.radius2_!=this.checksums_[4]||this.angle_!=this.checksums_[5]||this.points_!=this.checksums_[6]){var i="r"+t+e+(void 0!==this.radius_?this.radius_.toString():"-")+(void 0!==this.radius2_?this.radius2_.toString():"-")+(void 0!==this.angle_?this.angle_.toString():"-")+(void 0!==this.points_?this.points_.toString():"-");this.checksums_=[i,t,e,this.radius_,this.radius2_,this.angle_,this.points_]}return this.checksums_[0]},e}(es),ns=function(t){function e(e){var i=e||{};t.call(this,{points:1/0,fill:i.fill,radius:i.radius,stroke:i.stroke,atlasManager:i.atlasManager})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){var t=new e({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),atlasManager:this.atlasManager_});return t.setOpacity(this.getOpacity()),t.setScale(this.getScale()),t},e.prototype.setRadius=function(t){this.radius_=t,this.render_(this.atlasManager_)},e}(is),rs=function(t){var e=t||{};this.color_=void 0!==e.color?e.color:null,this.checksum_=void 0};rs.prototype.clone=function(){var t=this.getColor();return new rs({color:Array.isArray(t)?t.slice():t||void 0})},rs.prototype.getColor=function(){return this.color_},rs.prototype.setColor=function(t){this.color_=t,this.checksum_=void 0},rs.prototype.getChecksum=function(){if(void 0===this.checksum_){var t=this.color_;t?Array.isArray(t)||"string"==typeof t?this.checksum_="f"+Oo(t):this.checksum_=P(this.color_):this.checksum_="f-"}return this.checksum_};var os=rs,ss=function(t){var e=t||{};this.color_=void 0!==e.color?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=void 0!==e.lineDash?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width,this.checksum_=void 0};ss.prototype.clone=function(){var t=this.getColor();return new ss({color:Array.isArray(t)?t.slice():t||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})},ss.prototype.getColor=function(){return this.color_},ss.prototype.getLineCap=function(){return this.lineCap_},ss.prototype.getLineDash=function(){return this.lineDash_},ss.prototype.getLineDashOffset=function(){return this.lineDashOffset_},ss.prototype.getLineJoin=function(){return this.lineJoin_},ss.prototype.getMiterLimit=function(){return this.miterLimit_},ss.prototype.getWidth=function(){return this.width_},ss.prototype.setColor=function(t){this.color_=t,this.checksum_=void 0},ss.prototype.setLineCap=function(t){this.lineCap_=t,this.checksum_=void 0},ss.prototype.setLineDash=function(t){this.lineDash_=t,this.checksum_=void 0},ss.prototype.setLineDashOffset=function(t){this.lineDashOffset_=t,this.checksum_=void 0},ss.prototype.setLineJoin=function(t){this.lineJoin_=t,this.checksum_=void 0},ss.prototype.setMiterLimit=function(t){this.miterLimit_=t,this.checksum_=void 0},ss.prototype.setWidth=function(t){this.width_=t,this.checksum_=void 0},ss.prototype.getChecksum=function(){return void 0===this.checksum_&&(this.checksum_="s",this.color_?"string"==typeof this.color_?this.checksum_+=this.color_:this.checksum_+=P(this.color_):this.checksum_+="-",this.checksum_+=","+(void 0!==this.lineCap_?this.lineCap_.toString():"-")+","+(this.lineDash_?this.lineDash_.toString():"-")+","+(void 0!==this.lineDashOffset_?this.lineDashOffset_:"-")+","+(void 0!==this.lineJoin_?this.lineJoin_:"-")+","+(void 0!==this.miterLimit_?this.miterLimit_.toString():"-")+","+(void 0!==this.width_?this.width_.toString():"-")),this.checksum_};var as=ss,ls=function(t){var e=t||{};this.geometry_=null,this.geometryFunction_=cs,void 0!==e.geometry&&this.setGeometry(e.geometry),this.fill_=void 0!==e.fill?e.fill:null,this.image_=void 0!==e.image?e.image:null,this.renderer_=void 0!==e.renderer?e.renderer:null,this.stroke_=void 0!==e.stroke?e.stroke:null,this.text_=void 0!==e.text?e.text:null,this.zIndex_=e.zIndex};ls.prototype.clone=function(){var t=this.getGeometry();return t&&"object"==typeof t&&(t=t.clone()),new ls({geometry:t,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})},ls.prototype.getRenderer=function(){return this.renderer_},ls.prototype.setRenderer=function(t){this.renderer_=t},ls.prototype.getGeometry=function(){return this.geometry_},ls.prototype.getGeometryFunction=function(){return this.geometryFunction_},ls.prototype.getFill=function(){return this.fill_},ls.prototype.setFill=function(t){this.fill_=t},ls.prototype.getImage=function(){return this.image_},ls.prototype.setImage=function(t){this.image_=t},ls.prototype.getStroke=function(){return this.stroke_},ls.prototype.setStroke=function(t){this.stroke_=t},ls.prototype.getText=function(){return this.text_},ls.prototype.setText=function(t){this.text_=t},ls.prototype.getZIndex=function(){return this.zIndex_},ls.prototype.setGeometry=function(t){"function"==typeof t?this.geometryFunction_=t:"string"==typeof t?this.geometryFunction_=function(e){return e.get(t)}:t?void 0!==t&&(this.geometryFunction_=function(){return t}):this.geometryFunction_=cs,this.geometry_=t},ls.prototype.setZIndex=function(t){this.zIndex_=t};var us=null;function hs(t,e){if(!us){var i=new os({color:"rgba(255,255,255,0.4)"}),n=new as({color:"#3399CC",width:1.25});us=[new ls({image:new ns({fill:i,stroke:n,radius:5}),fill:i,stroke:n})]}return us}function cs(t){return t.getGeometry()}var ps=ls,fs="renderOrder",ds=function(t){function e(e){var i=e||{},n=h({},i);delete n.style,delete n.renderBuffer,delete n.updateWhileAnimating,delete n.updateWhileInteracting,t.call(this,n),this.declutter_=void 0!==i.declutter&&i.declutter,this.renderBuffer_=void 0!==i.renderBuffer?i.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(i.style),this.updateWhileAnimating_=void 0!==i.updateWhileAnimating&&i.updateWhileAnimating,this.updateWhileInteracting_=void 0!==i.updateWhileInteracting&&i.updateWhileInteracting,this.renderMode_=i.renderMode||To.VECTOR,this.type=So.VECTOR}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDeclutter=function(){return this.declutter_},e.prototype.setDeclutter=function(t){this.declutter_=t},e.prototype.getRenderBuffer=function(){return this.renderBuffer_},e.prototype.getRenderOrder=function(){return this.get(fs)},e.prototype.getStyle=function(){return this.style_},e.prototype.getStyleFunction=function(){return this.styleFunction_},e.prototype.getUpdateWhileAnimating=function(){return this.updateWhileAnimating_},e.prototype.getUpdateWhileInteracting=function(){return this.updateWhileInteracting_},e.prototype.setRenderOrder=function(t){this.set(fs,t)},e.prototype.setStyle=function(t){this.style_=void 0!==t?t:hs,this.styleFunction_=null===t?void 0:function(t){var e;if("function"==typeof t)e=t;else{var i;Array.isArray(t)?i=t:(he("function"==typeof t.getZIndex,41),i=[t]),e=function(){return i}}return e}(this.style_),this.changed()},e.prototype.getRenderMode=function(){return this.renderMode_},e}(Er);ds.prototype.getSource;var vs=ds,gs={ARRAY_BUFFER:"arraybuffer",JSON:"json",TEXT:"text",XML:"xml"};function ms(t,e){return function(t,e,i,n){return function(r,o,s){var a=new XMLHttpRequest;a.open("GET","function"==typeof t?t(r,o,s):t,!0),e.getType()==gs.ARRAY_BUFFER&&(a.responseType="arraybuffer"),a.onload=function(t){if(!a.status||a.status>=200&&a.status<300){var r,o=e.getType();o==gs.JSON||o==gs.TEXT?r=a.responseText:o==gs.XML?(r=a.responseXML)||(r=(new DOMParser).parseFromString(a.responseText,"application/xml")):o==gs.ARRAY_BUFFER&&(r=a.response),r?i.call(this,e.readFeatures(r,{featureProjection:s}),e.readProjection(r),e.getLastExtent()):n.call(this)}else n.call(this)}.bind(this),a.onerror=function(){n.call(this)}.bind(this),a.send()}}(t,e,function(t,e){"function"==typeof this.addFeatures&&this.addFeatures(t)},S)}function ys(t,e){return[[-1/0,-1/0,1/0,1/0]]}function _s(t){return t?Array.isArray(t)?function(e){return t}:"function"==typeof t?t:function(e){return[t]}:null}var xs=function(t){function e(e){t.call(this),this.projection_=Zi(e.projection),this.attributions_=_s(e.attributions),this.attributionsCollapsible_=void 0===e.attributionsCollapsible||e.attributionsCollapsible,this.loading=!1,this.state_=void 0!==e.state?e.state:ar.READY,this.wrapX_=void 0!==e.wrapX&&e.wrapX}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getAttributions=function(){return this.attributions_},e.prototype.getAttributionsCollapsible=function(){return this.attributionsCollapsible_},e.prototype.getProjection=function(){return this.projection_},e.prototype.getResolutions=function(){return M()},e.prototype.getState=function(){return this.state_},e.prototype.getWrapX=function(){return this.wrapX_},e.prototype.refresh=function(){this.changed()},e.prototype.setAttributions=function(t){this.attributions_=_s(t),this.changed()},e.prototype.setState=function(t){this.state_=t,this.changed()},e}(Y),bs={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature"},Es=i("emf4"),ws=i.n(Es),js=function(t){this.rbush_=ws()(t,void 0),this.items_={}};js.prototype.insert=function(t,e){var i={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:e};this.rbush_.insert(i),this.items_[P(e)]=i},js.prototype.load=function(t,e){for(var i=new Array(e.length),n=0,r=e.length;n<r;n++){var o=t[n],s=e[n],a={minX:o[0],minY:o[1],maxX:o[2],maxY:o[3],value:s};i[n]=a,this.items_[P(s)]=a}this.rbush_.load(i)},js.prototype.remove=function(t){var e=P(t),i=this.items_[e];return delete this.items_[e],null!==this.rbush_.remove(i)},js.prototype.update=function(t,e){var i=this.items_[P(e)];qe([i.minX,i.minY,i.maxX,i.maxY],t)||(this.remove(e),this.insert(t,e))},js.prototype.getAll=function(){return this.rbush_.all().map(function(t){return t.value})},js.prototype.getInExtent=function(t){var e={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]};return this.rbush_.search(e).map(function(t){return t.value})},js.prototype.forEach=function(t,e){return this.forEach_(this.getAll(),t,e)},js.prototype.forEachInExtent=function(t,e,i){return this.forEach_(this.getInExtent(t),e,i)},js.prototype.forEach_=function(t,e,i){for(var n,r=0,o=t.length;r<o;r++)if(n=e.call(i,t[r]))return n;return n},js.prototype.isEmpty=function(){return f(this.items_)},js.prototype.clear=function(){this.rbush_.clear(),this.items_={}},js.prototype.getExtent=function(t){var e=this.rbush_.toJSON();return He(e.minX,e.minY,e.maxX,e.maxY,t)},js.prototype.concat=function(t){for(var e in this.rbush_.load(t.rbush_.all()),t.items_)this.items_[e]=t.items_[e]};var Cs=js,Ss=function(t){function e(e,i){t.call(this,e),this.feature=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(I),Ts=function(t){function e(e){var i=e||{};t.call(this,{attributions:i.attributions,projection:void 0,state:ar.READY,wrapX:void 0===i.wrapX||i.wrapX}),this.loader_=S,this.format_=i.format,this.overlaps_=void 0==i.overlaps||i.overlaps,this.url_=i.url,void 0!==i.loader?this.loader_=i.loader:void 0!==this.url_&&(he(this.format_,7),this.loader_=ms(this.url_,this.format_)),this.strategy_=void 0!==i.strategy?i.strategy:ys;var n,r,o=void 0===i.useSpatialIndex||i.useSpatialIndex;this.featuresRtree_=o?new Cs:null,this.loadedExtentsRtree_=new Cs,this.nullGeometryFeatures_={},this.idIndex_={},this.undefIdIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null,Array.isArray(i.features)?r=i.features:i.features&&(r=(n=i.features).getArray()),o||void 0!==n||(n=new X(r)),void 0!==r&&this.addFeaturesInternal(r),void 0!==n&&this.bindFeaturesCollection_(n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.addFeature=function(t){this.addFeatureInternal(t),this.changed()},e.prototype.addFeatureInternal=function(t){var e=P(t);if(this.addToIndex_(e,t)){this.setupChangeEvents_(e,t);var i=t.getGeometry();if(i){var n=i.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(n,t)}else this.nullGeometryFeatures_[e]=t;this.dispatchEvent(new Ss(bs.ADDFEATURE,t))}},e.prototype.setupChangeEvents_=function(t,e){this.featureChangeKeys_[t]=[y(e,A.CHANGE,this.handleFeatureChange_,this),y(e,G,this.handleFeatureChange_,this)]},e.prototype.addToIndex_=function(t,e){var i=!0,n=e.getId();return void 0!==n?n.toString()in this.idIndex_?i=!1:this.idIndex_[n.toString()]=e:(he(!(t in this.undefIdIndex_),30),this.undefIdIndex_[t]=e),i},e.prototype.addFeatures=function(t){this.addFeaturesInternal(t),this.changed()},e.prototype.addFeaturesInternal=function(t){for(var e=[],i=[],n=[],r=0,o=t.length;r<o;r++){var s=t[r],a=P(s);this.addToIndex_(a,s)&&i.push(s)}for(var l=0,u=i.length;l<u;l++){var h=i[l],c=P(h);this.setupChangeEvents_(c,h);var p=h.getGeometry();if(p){var f=p.getExtent();e.push(f),n.push(h)}else this.nullGeometryFeatures_[c]=h}this.featuresRtree_&&this.featuresRtree_.load(e,n);for(var d=0,v=i.length;d<v;d++)this.dispatchEvent(new Ss(bs.ADDFEATURE,i[d]))},e.prototype.bindFeaturesCollection_=function(t){var e=!1;y(this,bs.ADDFEATURE,function(i){e||(e=!0,t.push(i.feature),e=!1)}),y(this,bs.REMOVEFEATURE,function(i){e||(e=!0,t.remove(i.feature),e=!1)}),y(t,N.ADD,function(t){e||(e=!0,this.addFeature(t.element),e=!1)},this),y(t,N.REMOVE,function(t){e||(e=!0,this.removeFeature(t.element),e=!1)},this),this.featuresCollection_=t},e.prototype.clear=function(t){if(t){for(var e in this.featureChangeKeys_){this.featureChangeKeys_[e].forEach(b)}this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.undefIdIndex_={})}else if(this.featuresRtree_)for(var i in this.featuresRtree_.forEach(this.removeFeatureInternal,this),this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[i]);this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.loadedExtentsRtree_.clear(),this.nullGeometryFeatures_={};var n=new Ss(bs.CLEAR);this.dispatchEvent(n),this.changed()},e.prototype.forEachFeature=function(t){if(this.featuresRtree_)return this.featuresRtree_.forEach(t);this.featuresCollection_&&this.featuresCollection_.forEach(t)},e.prototype.forEachFeatureAtCoordinateDirect=function(t,e){var i=[t[0],t[1],t[0],t[1]];return this.forEachFeatureInExtent(i,function(i){return i.getGeometry().intersectsCoordinate(t)?e(i):void 0})},e.prototype.forEachFeatureInExtent=function(t,e){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(t,e);this.featuresCollection_&&this.featuresCollection_.forEach(e)},e.prototype.forEachFeatureIntersectingExtent=function(t,e){return this.forEachFeatureInExtent(t,function(i){if(i.getGeometry().intersectsExtent(t)){var n=e(i);if(n)return n}})},e.prototype.getFeaturesCollection=function(){return this.featuresCollection_},e.prototype.getFeatures=function(){var t;return this.featuresCollection_?t=this.featuresCollection_.getArray():this.featuresRtree_&&(t=this.featuresRtree_.getAll(),f(this.nullGeometryFeatures_)||Zt(t,p(this.nullGeometryFeatures_))),t},e.prototype.getFeaturesAtCoordinate=function(t){var e=[];return this.forEachFeatureAtCoordinateDirect(t,function(t){e.push(t)}),e},e.prototype.getFeaturesInExtent=function(t){return this.featuresRtree_.getInExtent(t)},e.prototype.getClosestFeatureToCoordinate=function(t,e){var i=t[0],n=t[1],r=null,o=[NaN,NaN],s=1/0,a=[-1/0,-1/0,1/0,1/0],l=e||j;return this.featuresRtree_.forEachInExtent(a,function(t){if(l(t)){var e=t.getGeometry(),u=s;if((s=e.closestPointXY(i,n,o,s))<u){r=t;var h=Math.sqrt(s);a[0]=i-h,a[1]=n-h,a[2]=i+h,a[3]=n+h}}}),r},e.prototype.getExtent=function(t){return this.featuresRtree_.getExtent(t)},e.prototype.getFeatureById=function(t){var e=this.idIndex_[t.toString()];return void 0!==e?e:null},e.prototype.getFormat=function(){return this.format_},e.prototype.getOverlaps=function(){return this.overlaps_},e.prototype.getUrl=function(){return this.url_},e.prototype.handleFeatureChange_=function(t){var e=t.target,i=P(e),n=e.getGeometry();if(n){var r=n.getExtent();i in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[i],this.featuresRtree_&&this.featuresRtree_.insert(r,e)):this.featuresRtree_&&this.featuresRtree_.update(r,e)}else i in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(e),this.nullGeometryFeatures_[i]=e);var o=e.getId();if(void 0!==o){var s=o.toString();i in this.undefIdIndex_?(delete this.undefIdIndex_[i],this.idIndex_[s]=e):this.idIndex_[s]!==e&&(this.removeFromIdIndex_(e),this.idIndex_[s]=e)}else i in this.undefIdIndex_||(this.removeFromIdIndex_(e),this.undefIdIndex_[i]=e);this.changed(),this.dispatchEvent(new Ss(bs.CHANGEFEATURE,e))},e.prototype.hasFeature=function(t){var e=t.getId();return void 0!==e?e in this.idIndex_:P(t)in this.undefIdIndex_},e.prototype.isEmpty=function(){return this.featuresRtree_.isEmpty()&&f(this.nullGeometryFeatures_)},e.prototype.loadFeatures=function(t,e,i){var n=this,r=this.loadedExtentsRtree_,o=this.strategy_(t,e);this.loading=!1;for(var s=function(t,s){var a=o[t];r.forEachInExtent(a,function(t){return Ye(t.extent,a)})||(n.loader_.call(n,a,e,i),r.insert(a,{extent:a.slice()}),n.loading=n.loader_!==S)},a=0,l=o.length;a<l;++a)s(a)},e.prototype.removeLoadedExtent=function(t){var e,i=this.loadedExtentsRtree_;i.forEachInExtent(t,function(i){if(qe(i.extent,t))return e=i,!0}),e&&i.remove(e)},e.prototype.removeFeature=function(t){var e=P(t);e in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[e]:this.featuresRtree_&&this.featuresRtree_.remove(t),this.removeFeatureInternal(t),this.changed()},e.prototype.removeFeatureInternal=function(t){var e=P(t);this.featureChangeKeys_[e].forEach(b),delete this.featureChangeKeys_[e];var i=t.getId();void 0!==i?delete this.idIndex_[i.toString()]:delete this.undefIdIndex_[e],this.dispatchEvent(new Ss(bs.REMOVEFEATURE,t))},e.prototype.removeFromIdIndex_=function(t){var e=!1;for(var i in this.idIndex_)if(this.idIndex_[i]===t){delete this.idIndex_[i],e=!0;break}return e},e.prototype.setLoader=function(t){this.loader_=t},e}(xs);function Rs(t){var e=t||{},i=new X,n=new Or(-.005,.05,100);return(void 0===e.altShiftDragRotate||e.altShiftDragRotate)&&i.push(new qr),(void 0===e.doubleClickZoom||e.doubleClickZoom)&&i.push(new Gr({delta:e.zoomDelta,duration:e.zoomDuration})),(void 0===e.dragPan||e.dragPan)&&i.push(new Jr({condition:e.onFocusOnly?zr:void 0,kinetic:n})),(void 0===e.pinchRotate||e.pinchRotate)&&i.push(new fo),(void 0===e.pinchZoom||e.pinchZoom)&&i.push(new vo({constrainResolution:e.constrainResolution,duration:e.zoomDuration})),(void 0===e.keyboard||e.keyboard)&&(i.push(new ao),i.push(new uo({delta:e.zoomDelta,duration:e.zoomDuration}))),(void 0===e.mouseWheelZoom||e.mouseWheelZoom)&&i.push(new po({condition:e.onFocusOnly?zr:void 0,constrainResolution:e.constrainResolution,duration:e.zoomDuration})),(void 0===e.shiftDragZoom||e.shiftDragZoom)&&i.push(new ro({duration:e.zoomDuration})),i}var Is=.5,Os=function(t){function e(e,i,n,r){t.call(this),this.extent=e,this.pixelRatio_=n,this.resolution=i,this.state=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.changed=function(){this.dispatchEvent(A.CHANGE)},e.prototype.getExtent=function(){return this.extent},e.prototype.getImage=function(){return M()},e.prototype.getPixelRatio=function(){return this.pixelRatio_},e.prototype.getResolution=function(){return this.resolution},e.prototype.getState=function(){return this.state},e.prototype.load=function(){M()},e}(O),As=function(t){function e(e,i,n,r,o){var s=void 0!==o?Po.IDLE:Po.LOADED;t.call(this,e,i,n,s),this.loader_=void 0!==o?o:null,this.canvas_=r,this.error_=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getError=function(){return this.error_},e.prototype.handleLoad_=function(t){t?(this.error_=t,this.state=Po.ERROR):this.state=Po.LOADED,this.changed()},e.prototype.load=function(){this.state==Po.IDLE&&(this.state=Po.LOADING,this.changed(),this.loader_(this.handleLoad_.bind(this)))},e.prototype.getImage=function(){return this.canvas_},e}(Os),Ls=function(t){function e(e,i,n,r,o){t.call(this,e),this.vectorContext=i,this.frameState=n,this.context=r,this.glContext=o}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(I),Ms=function(){};Ms.prototype.drawCustom=function(t,e,i){},Ms.prototype.drawGeometry=function(t){},Ms.prototype.setStyle=function(t){},Ms.prototype.drawCircle=function(t,e){},Ms.prototype.drawFeature=function(t,e){},Ms.prototype.drawGeometryCollection=function(t,e){},Ms.prototype.drawLineString=function(t,e){},Ms.prototype.drawMultiLineString=function(t,e){},Ms.prototype.drawMultiPoint=function(t,e){},Ms.prototype.drawMultiPolygon=function(t,e){},Ms.prototype.drawPoint=function(t,e){},Ms.prototype.drawPolygon=function(t,e){},Ms.prototype.drawText=function(t,e){},Ms.prototype.setFillStrokeStyle=function(t,e){},Ms.prototype.setImageStyle=function(t,e){},Ms.prototype.setTextStyle=function(t,e){};var ks=Ms,Ps=function(t){function e(e,i,n,r,o){t.call(this),this.context_=e,this.pixelRatio_=i,this.extent_=n,this.transform_=r,this.viewRotation_=o,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=0,this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=0,this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=[1,0,0,1,0,0]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.drawImages_=function(t,e,i,n){if(this.image_){var r=_i(t,e,i,2,this.transform_,this.pixelCoordinates_),o=this.context_,s=this.tmpLocalTransform_,a=o.globalAlpha;1!=this.imageOpacity_&&(o.globalAlpha=a*this.imageOpacity_);var l=this.imageRotation_;this.imageRotateWithView_&&(l+=this.viewRotation_);for(var u=0,h=r.length;u<h;u+=2){var c=r[u]-this.imageAnchorX_,p=r[u+1]-this.imageAnchorY_;if(0!==l||1!=this.imageScale_){var f=c+this.imageAnchorX_,d=p+this.imageAnchorY_;cn(s,f,d,this.imageScale_,this.imageScale_,l,-f,-d),o.setTransform.apply(o,s)}o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,c,p,this.imageWidth_,this.imageHeight_)}0===l&&1==this.imageScale_||o.setTransform(1,0,0,1,0,0),1!=this.imageOpacity_&&(o.globalAlpha=a)}},e.prototype.drawText_=function(t,e,i,n){if(this.textState_&&""!==this.text_){this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);var r=_i(t,e,i,n,this.transform_,this.pixelCoordinates_),o=this.context_,s=this.textRotation_;for(this.textRotateWithView_&&(s+=this.viewRotation_);e<i;e+=n){var a=r[e]+this.textOffsetX_,l=r[e+1]+this.textOffsetY_;if(0!==s||1!=this.textScale_){var u=cn(this.tmpLocalTransform_,a,l,this.textScale_,this.textScale_,s,-a,-l);o.setTransform.apply(o,u)}this.textStrokeState_&&o.strokeText(this.text_,a,l),this.textFillState_&&o.fillText(this.text_,a,l)}0===s&&1==this.textScale_||o.setTransform(1,0,0,1,0,0)}},e.prototype.moveToLineTo_=function(t,e,i,n,r){var o=this.context_,s=_i(t,e,i,n,this.transform_,this.pixelCoordinates_);o.moveTo(s[0],s[1]);var a=s.length;r&&(a-=2);for(var l=2;l<a;l+=2)o.lineTo(s[l],s[l+1]);return r&&o.closePath(),i},e.prototype.drawRings_=function(t,e,i,n){for(var r=0,o=i.length;r<o;++r)e=this.moveToLineTo_(t,e,i[r],n,!0);return e},e.prototype.drawCircle=function(t){if(fi(this.extent_,t.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=function(t,e,i){var n=t.getFlatCoordinates();if(n){var r=t.getStride();return _i(n,0,n.length,r,e,i)}return null}(t,this.transform_,this.pixelCoordinates_),i=e[2]-e[0],n=e[3]-e[1],r=Math.sqrt(i*i+n*n),o=this.context_;o.beginPath(),o.arc(e[0],e[1],r,0,2*Math.PI),this.fillState_&&o.fill(),this.strokeState_&&o.stroke()}""!==this.text_&&this.drawText_(t.getCenter(),0,2,2)}},e.prototype.setStyle=function(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())},e.prototype.drawGeometry=function(t){switch(t.getType()){case mi.POINT:this.drawPoint(t);break;case mi.LINE_STRING:this.drawLineString(t);break;case mi.POLYGON:this.drawPolygon(t);break;case mi.MULTI_POINT:this.drawMultiPoint(t);break;case mi.MULTI_LINE_STRING:this.drawMultiLineString(t);break;case mi.MULTI_POLYGON:this.drawMultiPolygon(t);break;case mi.GEOMETRY_COLLECTION:this.drawGeometryCollection(t);break;case mi.CIRCLE:this.drawCircle(t)}},e.prototype.drawFeature=function(t,e){var i=e.getGeometryFunction()(t);i&&fi(this.extent_,i.getExtent())&&(this.setStyle(e),this.drawGeometry(i))},e.prototype.drawGeometryCollection=function(t){for(var e=t.getGeometriesArray(),i=0,n=e.length;i<n;++i)this.drawGeometry(e[i])},e.prototype.drawPoint=function(t){var e=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(e,0,e.length,i),""!==this.text_&&this.drawText_(e,0,e.length,i)},e.prototype.drawMultiPoint=function(t){var e=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(e,0,e.length,i),""!==this.text_&&this.drawText_(e,0,e.length,i)},e.prototype.drawLineString=function(t){if(fi(this.extent_,t.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var e=this.context_,i=t.getFlatCoordinates();e.beginPath(),this.moveToLineTo_(i,0,i.length,t.getStride(),!1),e.stroke()}if(""!==this.text_){var n=t.getFlatMidpoint();this.drawText_(n,0,2,2)}}},e.prototype.drawMultiLineString=function(t){var e=t.getExtent();if(fi(this.extent_,e)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var i=this.context_,n=t.getFlatCoordinates(),r=0,o=t.getEnds(),s=t.getStride();i.beginPath();for(var a=0,l=o.length;a<l;++a)r=this.moveToLineTo_(n,r,o[a],s,!1);i.stroke()}if(""!==this.text_){var u=t.getFlatMidpoints();this.drawText_(u,0,u.length,2)}}},e.prototype.drawPolygon=function(t){if(fi(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=this.context_;e.beginPath(),this.drawRings_(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){var i=t.getFlatInteriorPoint();this.drawText_(i,0,2,2)}}},e.prototype.drawMultiPolygon=function(t){if(fi(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=this.context_,i=t.getOrientedFlatCoordinates(),n=0,r=t.getEndss(),o=t.getStride();e.beginPath();for(var s=0,a=r.length;s<a;++s){var l=r[s];n=this.drawRings_(i,n,l,o)}this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){var u=t.getFlatInteriorPoints();this.drawText_(u,0,u.length,2)}}},e.prototype.setContextFillState_=function(t){var e=this.context_,i=this.contextFillState_;i?i.fillStyle!=t.fillStyle&&(i.fillStyle=e.fillStyle=t.fillStyle):(e.fillStyle=t.fillStyle,this.contextFillState_={fillStyle:t.fillStyle})},e.prototype.setContextStrokeState_=function(t){var e=this.context_,i=this.contextStrokeState_;i?(i.lineCap!=t.lineCap&&(i.lineCap=e.lineCap=t.lineCap),rt&&(Kt(i.lineDash,t.lineDash)||e.setLineDash(i.lineDash=t.lineDash),i.lineDashOffset!=t.lineDashOffset&&(i.lineDashOffset=e.lineDashOffset=t.lineDashOffset)),i.lineJoin!=t.lineJoin&&(i.lineJoin=e.lineJoin=t.lineJoin),i.lineWidth!=t.lineWidth&&(i.lineWidth=e.lineWidth=t.lineWidth),i.miterLimit!=t.miterLimit&&(i.miterLimit=e.miterLimit=t.miterLimit),i.strokeStyle!=t.strokeStyle&&(i.strokeStyle=e.strokeStyle=t.strokeStyle)):(e.lineCap=t.lineCap,rt&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.lineWidth=t.lineWidth,e.miterLimit=t.miterLimit,e.strokeStyle=t.strokeStyle,this.contextStrokeState_={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})},e.prototype.setContextTextState_=function(t){var e=this.context_,i=this.contextTextState_,n=t.textAlign?t.textAlign:"center";i?(i.font!=t.font&&(i.font=e.font=t.font),i.textAlign!=n&&(i.textAlign=e.textAlign=n),i.textBaseline!=t.textBaseline&&(i.textBaseline=e.textBaseline=t.textBaseline)):(e.font=t.font,e.textAlign=n,e.textBaseline=t.textBaseline,this.contextTextState_={font:t.font,textAlign:n,textBaseline:t.textBaseline})},e.prototype.setFillStrokeStyle=function(t,e){if(t){var i=t.getColor();this.fillState_={fillStyle:ko(i||Fo)}}else this.fillState_=null;if(e){var n=e.getColor(),r=e.getLineCap(),o=e.getLineDash(),s=e.getLineDashOffset(),a=e.getLineJoin(),l=e.getWidth(),u=e.getMiterLimit();this.strokeState_={lineCap:void 0!==r?r:"round",lineDash:o||No,lineDashOffset:s||0,lineJoin:void 0!==a?a:"round",lineWidth:this.pixelRatio_*(void 0!==l?l:1),miterLimit:void 0!==u?u:10,strokeStyle:ko(n||Go)}}else this.strokeState_=null},e.prototype.setImageStyle=function(t){if(t){var e=t.getAnchor(),i=t.getImage(1),n=t.getOrigin(),r=t.getSize();this.imageAnchorX_=e[0],this.imageAnchorY_=e[1],this.imageHeight_=r[1],this.image_=i,this.imageOpacity_=t.getOpacity(),this.imageOriginX_=n[0],this.imageOriginY_=n[1],this.imageRotateWithView_=t.getRotateWithView(),this.imageRotation_=t.getRotation(),this.imageScale_=t.getScale()*this.pixelRatio_,this.imageWidth_=r[0]}else this.image_=null},e.prototype.setTextStyle=function(t){if(t){var e=t.getFill();if(e){var i=e.getColor();this.textFillState_={fillStyle:ko(i||Fo)}}else this.textFillState_=null;var n=t.getStroke();if(n){var r=n.getColor(),o=n.getLineCap(),s=n.getLineDash(),a=n.getLineDashOffset(),l=n.getLineJoin(),u=n.getWidth(),h=n.getMiterLimit();this.textStrokeState_={lineCap:void 0!==o?o:"round",lineDash:s||No,lineDashOffset:a||0,lineJoin:void 0!==l?l:"round",lineWidth:void 0!==u?u:1,miterLimit:void 0!==h?h:10,strokeStyle:ko(r||Go)}}else this.textStrokeState_=null;var c=t.getFont(),p=t.getOffsetX(),f=t.getOffsetY(),d=t.getRotateWithView(),v=t.getRotation(),g=t.getScale(),m=t.getText(),y=t.getTextAlign(),_=t.getTextBaseline();this.textState_={font:void 0!==c?c:"10px sans-serif",textAlign:void 0!==y?y:"center",textBaseline:void 0!==_?_:"middle"},this.text_=void 0!==m?m:"",this.textOffsetX_=void 0!==p?this.pixelRatio_*p:0,this.textOffsetY_=void 0!==f?this.pixelRatio_*f:0,this.textRotateWithView_=void 0!==d&&d,this.textRotation_=void 0!==v?v:0,this.textScale_=this.pixelRatio_*(void 0!==g?g:1)}else this.text_=""},e}(ks),Ds=function(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32};function Fs(t,e,i){return e+":"+t+":"+(i?Oo(i):"null")}Ds.prototype.clear=function(){this.cache_={},this.cacheSize_=0},Ds.prototype.expire=function(){if(this.cacheSize_>this.maxCacheSize_){var t=0;for(var e in this.cache_){var i=this.cache_[e];0!=(3&t++)||i.hasListener()||(delete this.cache_[e],--this.cacheSize_)}}},Ds.prototype.get=function(t,e,i){var n=Fs(t,e,i);return n in this.cache_?this.cache_[n]:null},Ds.prototype.set=function(t,e,i,n){var r=Fs(t,e,i);this.cache_[r]=n,++this.cacheSize_},Ds.prototype.setSize=function(t){this.maxCacheSize_=t,this.expire()};var Ns=new Ds;function Gs(t,e){Ns.expire()}function Ws(t,e){return t.zIndex-e.zIndex}var zs=[],Bs=function(t){function e(e){t.call(this,e);var i=e.getViewport();this.context_=er(),this.canvas_=this.context_.canvas,this.canvas_.style.width="100%",this.canvas_.style.height="100%",this.canvas_.style.display="block",this.canvas_.className=mr,i.insertBefore(this.canvas_,i.childNodes[0]||null),this.renderedVisible_=!0,this.transform_=[1,0,0,1,0,0]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.dispatchRenderEvent=function(t,e){var i=this.getMap(),n=this.context_;if(i.hasListener(t)){var r=e.extent,o=e.pixelRatio,s=e.viewState.rotation,a=this.getTransform(e),l=new Ps(n,o,r,a,s),u=new Ls(t,l,e,n,null);i.dispatchEvent(u)}},e.prototype.getTransform=function(t){var e=t.viewState,i=this.canvas_.width/2,n=this.canvas_.height/2,r=t.pixelRatio/e.resolution,o=-r,s=-e.rotation,a=-e.center[0],l=-e.center[1];return cn(this.transform_,i,n,r,o,s,a,l)},e.prototype.renderFrame=function(t){if(t){var e=this.context_,i=t.pixelRatio,n=Math.round(t.size[0]*i),r=Math.round(t.size[1]*i);this.canvas_.width!=n||this.canvas_.height!=r?(this.canvas_.width=n,this.canvas_.height=r):e.clearRect(0,0,n,r);var o=t.viewState.rotation;this.calculateMatrices2D(t),this.dispatchRenderEvent(le.PRECOMPOSE,t);var s=t.layerStatesArray;!function(t,e){var i,n=t.length,r=Array(t.length);for(i=0;i<n;i++)r[i]={index:i,value:t[i]};for(r.sort(function(t,i){return e(t.value,i.value)||t.index-i.index}),i=0;i<t.length;i++)t[i]=r[i].value}(s,Ws),o&&(e.save(),qo(e,o,n/2,r/2));var a,l,u=t.viewState.resolution;for(a=0,l=s.length;a<l;++a){var h=s[a],c=h.layer,p=this.getLayerRenderer(c);br(h,u)&&h.sourceState==ar.READY&&(p.prepareFrame(t,h)&&p.composeFrame(t,h,e))}o&&e.restore(),this.dispatchRenderEvent(le.POSTCOMPOSE,t),this.renderedVisible_||(this.canvas_.style.display="",this.renderedVisible_=!0),this.scheduleRemoveUnusedLayerRenderers(t),this.scheduleExpireIconCache(t)}else this.renderedVisible_&&(this.canvas_.style.display="none",this.renderedVisible_=!1)},e.prototype.forEachLayerAtPixel=function(t,e,i,n,r,o,s){var a,l,u=e.viewState.resolution,h=e.layerStatesArray,c=h.length,p=ln(e.pixelToCoordinateTransform,t.slice());for(l=c-1;l>=0;--l){var f=h[l],d=f.layer;if(br(f,u)&&o.call(s,d))if(a=this.getLayerRenderer(d).forEachLayerAtCoordinate(p,e,i,n,r))return a}},e.prototype.registerLayerRenderers=function(e){t.prototype.registerLayerRenderers.call(this,e);for(var i=0,n=e.length;i<n;++i){var r=e[i];Vt(zs,r)||zs.push(r)}},e}(function(t){function e(e){t.call(this),this.map_=e,this.layerRenderers_={},this.layerRendererListeners_={},this.layerRendererConstructors_=[]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.dispatchRenderEvent=function(t,e){M()},e.prototype.registerLayerRenderers=function(t){this.layerRendererConstructors_.push.apply(this.layerRendererConstructors_,t)},e.prototype.calculateMatrices2D=function(t){var e=t.viewState,i=t.coordinateToPixelTransform,n=t.pixelToCoordinateTransform;cn(i,t.size[0]/2,t.size[1]/2,1/e.resolution,-1/e.resolution,-e.rotation,-e.center[0],-e.center[1]),function(t){var e,i=(e=t)[0]*e[3]-e[1]*e[2];he(0!==i,32);var n=t[0],r=t[1],o=t[2],s=t[3],a=t[4],l=t[5];t[0]=s/i,t[1]=-r/i,t[2]=-o/i,t[3]=n/i,t[4]=(o*l-s*a)/i,t[5]=-(n*l-r*a)/i}(an(n,i))},e.prototype.removeLayerRenderers=function(){for(var t in this.layerRenderers_)this.removeLayerRendererByKey_(t).dispose()},e.prototype.forEachFeatureAtCoordinate=function(t,e,i,n,r,o,s){var a,l=e.viewState,u=l.resolution;function h(t,i){var o=e.layerStates[P(i)].managed;if(!(P(t)in e.skippedFeatureUids)||o)return n.call(r,t,o?i:null)}var c=l.projection,p=t;if(c.canWrapX()){var f=c.getExtent(),d=pi(f),v=t[0];if(v<f[0]||v>f[2])p=[v+d*Math.ceil((f[0]-v)/d),t[1]]}var g,m=e.layerStatesArray;for(g=m.length-1;g>=0;--g){var y=m[g],_=y.layer;if(br(y,u)&&o.call(s,_)){var x=this.getLayerRenderer(_),b=_.getSource();if(b&&(a=x.forEachFeatureAtCoordinate(b.getWrapX()?p:t,e,i,h)),a)return a}}},e.prototype.forEachLayerAtPixel=function(t,e,i,n,r,o,s){return M()},e.prototype.hasFeatureAtCoordinate=function(t,e,i,n,r){return void 0!==this.forEachFeatureAtCoordinate(t,e,i,j,this,n,r)},e.prototype.getLayerRenderer=function(t){var e=P(t);if(e in this.layerRenderers_)return this.layerRenderers_[e];for(var i,n=0,r=this.layerRendererConstructors_.length;n<r;++n){var o=this.layerRendererConstructors_[n];if(o.handles(t)){i=o.create(this,t);break}}if(!i)throw new Error("Unable to create renderer for layer: "+t.getType());return this.layerRenderers_[e]=i,this.layerRendererListeners_[e]=y(i,A.CHANGE,this.handleLayerRendererChange_,this),i},e.prototype.getLayerRendererByKey=function(t){return this.layerRenderers_[t]},e.prototype.getLayerRenderers=function(){return this.layerRenderers_},e.prototype.getMap=function(){return this.map_},e.prototype.handleLayerRendererChange_=function(){this.map_.render()},e.prototype.removeLayerRendererByKey_=function(t){var e=this.layerRenderers_[t];return delete this.layerRenderers_[t],b(this.layerRendererListeners_[t]),delete this.layerRendererListeners_[t],e},e.prototype.removeUnusedLayerRenderers_=function(t,e){for(var i in this.layerRenderers_)e&&i in e.layerStates||this.removeLayerRendererByKey_(i).dispose()},e.prototype.renderFrame=function(t){M()},e.prototype.scheduleExpireIconCache=function(t){t.postRenderFunctions.push(Gs)},e.prototype.scheduleRemoveUnusedLayerRenderers=function(t){for(var e in this.layerRenderers_)if(!(e in t.layerStates))return void t.postRenderFunctions.push(this.removeUnusedLayerRenderers_.bind(this))},e}(w)),Ys=function(t){function e(e){t.call(this,e),this.renderedResolution,this.transform_=[1,0,0,1,0,0]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clip=function(t,e,i){var n=e.pixelRatio,r=e.size[0]*n,o=e.size[1]*n,s=e.viewState.rotation,a=hi(i),l=ci(i),u=oi(i),h=ri(i);ln(e.coordinateToPixelTransform,a),ln(e.coordinateToPixelTransform,l),ln(e.coordinateToPixelTransform,u),ln(e.coordinateToPixelTransform,h),t.save(),qo(t,-s,r/2,o/2),t.beginPath(),t.moveTo(a[0]*n,a[1]*n),t.lineTo(l[0]*n,l[1]*n),t.lineTo(u[0]*n,u[1]*n),t.lineTo(h[0]*n,h[1]*n),t.clip(),qo(t,s,r/2,o/2)},e.prototype.dispatchComposeEvent_=function(t,e,i,n){var r=this.getLayer();if(r.hasListener(t)){var o=i.size[0]*i.pixelRatio,s=i.size[1]*i.pixelRatio,a=i.viewState.rotation;qo(e,-a,o/2,s/2);var l=void 0!==n?n:this.getTransform(i,0),u=new Ps(e,i.pixelRatio,i.extent,l,i.viewState.rotation),h=new Ls(t,u,i,e,null);r.dispatchEvent(h),qo(e,a,o/2,s/2)}},e.prototype.forEachLayerAtCoordinate=function(t,e,i,n,r){return this.forEachFeatureAtCoordinate(t,e,i,j)?n.call(r,this.getLayer(),null):void 0},e.prototype.postCompose=function(t,e,i,n){this.dispatchComposeEvent_(le.POSTCOMPOSE,t,e,n)},e.prototype.preCompose=function(t,e,i){this.dispatchComposeEvent_(le.PRECOMPOSE,t,e,i)},e.prototype.dispatchRenderEvent=function(t,e,i){this.dispatchComposeEvent_(le.RENDER,t,e,i)},e.prototype.getTransform=function(t,e){var i=t.viewState,n=t.pixelRatio,r=n*t.size[0]/2,o=n*t.size[1]/2,s=n/i.resolution,a=-s,l=-i.rotation,u=-i.center[0]+e,h=-i.center[1];return cn(this.transform_,r,o,s,a,l,u,h)},e.prototype.composeFrame=function(t,e,i){M()},e.prototype.prepareFrame=function(t,e){return M()},e}(function(t){function e(e){t.call(this),this.layer_=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createLoadedTileFinder=function(t,e,i){return function(n,r){return t.forEachLoadedTile(e,n,r,function(t){i[n]||(i[n]={}),i[n][t.tileCoord.toString()]=t})}},e.prototype.forEachFeatureAtCoordinate=function(t,e,i,n){},e.prototype.getLayer=function(){return this.layer_},e.prototype.handleImageChange_=function(t){t.target.getState()===Po.LOADED&&this.renderIfReadyAndVisible()},e.prototype.hasFeatureAtCoordinate=function(t,e){return!1},e.prototype.loadImage=function(t){var e=t.getState();return e!=Po.LOADED&&e!=Po.ERROR&&y(t,A.CHANGE,this.handleImageChange_,this),e==Po.IDLE&&(t.load(),e=t.getState()),e==Po.LOADED},e.prototype.renderIfReadyAndVisible=function(){var t=this.getLayer();t.getVisible()&&t.getSourceState()==ar.READY&&this.changed()},e.prototype.scheduleExpireCache=function(t,e){if(e.canExpireCache()){var i=function(t,e,i){var n=P(t);n in i.usedTiles&&t.expireCache(i.viewState.projection,i.usedTiles[n])}.bind(null,e);t.postRenderFunctions.push(i)}},e.prototype.updateUsedTiles=function(t,e,i,n){var r=P(e),o=i.toString();r in t?o in t[r]?t[r][o].extend(n):t[r][o]=n:(t[r]={},t[r][o]=n)},e.prototype.manageTilePyramid=function(t,e,i,n,r,o,s,a,l,u){var h=P(e);h in t.wantedTiles||(t.wantedTiles[h]={});var c,p,f,d,v,g,m=t.wantedTiles[h],y=t.tileQueue;for(g=i.getMinZoom();g<=s;++g)for(p=i.getTileRangeForExtentAndZ(o,g,p),f=i.getResolution(g),d=p.minX;d<=p.maxX;++d)for(v=p.minY;v<=p.maxY;++v)s-g<=a?((c=e.getTile(g,d,v,n,r)).getState()==ue.IDLE&&(m[c.getKey()]=!0,y.isKeyQueued(c.getKey())||y.enqueue([c,h,i.getTileCoordCenter(c.tileCoord),f])),void 0!==l&&l.call(u,c)):e.useTile(g,d,v,r)},e}(L)),Us=function(t){function e(e){t.call(this,e),this.coordinateToCanvasPixelTransform=[1,0,0,1,0,0],this.hitCanvasContext_=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.composeFrame=function(t,e,i){this.preCompose(i,t);var n=this.getImage();if(n){var r=e.extent,o=void 0!==r&&!Ye(r,t.extent)&&fi(r,t.extent);o&&this.clip(i,t,r);var s=this.getImageTransform(),a=i.globalAlpha;i.globalAlpha=e.opacity;var l=s[4],u=s[5],h=n.width*s[0],c=n.height*s[3];h>=.5&&c>=.5&&i.drawImage(n,0,0,+n.width,+n.height,Math.round(l),Math.round(u),Math.round(h),Math.round(c)),i.globalAlpha=a,o&&i.restore()}this.postCompose(i,t,e)},e.prototype.getImage=function(){return M()},e.prototype.getImageTransform=function(){return M()},e.prototype.forEachLayerAtCoordinate=function(t,e,i,n,r){if(this.getImage()){var o=ln(this.coordinateToCanvasPixelTransform,t.slice());Le(o,e.viewState.resolution/this.renderedResolution),this.hitCanvasContext_||(this.hitCanvasContext_=er(1,1)),this.hitCanvasContext_.clearRect(0,0,1,1),this.hitCanvasContext_.drawImage(this.getImage(),o[0],o[1],1,1,0,0,1,1);var s=this.hitCanvasContext_.getImageData(0,0,1,1).data;return s[3]>0?n.call(r,this.getLayer(),s):void 0}},e}(Ys),Vs=function(t){function e(i){if(t.call(this,i),this.image_=null,this.imageTransform_=[1,0,0,1,0,0],this.skippedFeatures_=[],this.vectorRenderer_=null,i.getType()===So.VECTOR)for(var n=0,r=zs.length;n<r;++n){var o=zs[n];if(o!==e&&o.handles(i)){this.vectorRenderer_=new o(i);break}}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.disposeInternal=function(){this.vectorRenderer_&&this.vectorRenderer_.dispose(),t.prototype.disposeInternal.call(this)},e.prototype.getImage=function(){return this.image_?this.image_.getImage():null},e.prototype.getImageTransform=function(){return this.imageTransform_},e.prototype.prepareFrame=function(t,e){var i,n=t.pixelRatio,r=t.size,o=t.viewState,s=o.center,a=o.resolution,l=this.getLayer().getSource(),u=t.viewHints,c=this.vectorRenderer_,p=t.extent;if(c||void 0===e.extent||(p=ui(p,e.extent)),!u[je]&&!u[Ce]&&!di(p)){var f=o.projection,d=this.skippedFeatures_;if(c){var v=c.context,g=h({},t,{size:[pi(p)/a,li(p)/a],viewState:h({},t.viewState,{rotation:0})}),m=Object.keys(g.skippedFeatureUids).sort();i=new As(p,a,n,v.canvas,function(t){!c.prepareFrame(g,e)||!c.replayGroupChanged&&Kt(d,m)||(v.canvas.width=g.size[0]*n,v.canvas.height=g.size[1]*n,c.compose(v,g,e),d=m,t())})}else i=l.getImage(p,a,n,f);i&&this.loadImage(i)&&(this.image_=i,this.skippedFeatures_=d)}if(this.image_){var y=(i=this.image_).getExtent(),_=i.getResolution(),x=i.getPixelRatio(),b=n*_/(a*x),E=cn(this.imageTransform_,n*r[0]/2,n*r[1]/2,b,b,0,x*(y[0]-s[0])/_,x*(s[1]-y[3])/_);cn(this.coordinateToCanvasPixelTransform,n*r[0]/2-E[4],n*r[1]/2-E[5],n/a,-n/a,0,-s[0],-s[1]),this.renderedResolution=_*n/x}return!!this.image_},e.prototype.forEachFeatureAtCoordinate=function(e,i,n,r){return this.vectorRenderer_?this.vectorRenderer_.forEachFeatureAtCoordinate(e,i,n,r):t.prototype.forEachFeatureAtCoordinate.call(this,e,i,n,r)},e}(Us);Vs.handles=function(t){return t.getType()===So.IMAGE||t.getType()===So.VECTOR&&t.getRenderMode()===To.IMAGE},Vs.create=function(t,e){return new Vs(e)};var Xs=Vs,Hs=function(t,e,i,n){this.minX=t,this.maxX=e,this.minY=i,this.maxY=n};function Zs(t,e,i,n,r){return void 0!==r?(r.minX=t,r.maxX=e,r.minY=i,r.maxY=n,r):new Hs(t,e,i,n)}Hs.prototype.contains=function(t){return this.containsXY(t[1],t[2])},Hs.prototype.containsTileRange=function(t){return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY},Hs.prototype.containsXY=function(t,e){return this.minX<=t&&t<=this.maxX&&this.minY<=e&&e<=this.maxY},Hs.prototype.equals=function(t){return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY},Hs.prototype.extend=function(t){t.minX<this.minX&&(this.minX=t.minX),t.maxX>this.maxX&&(this.maxX=t.maxX),t.minY<this.minY&&(this.minY=t.minY),t.maxY>this.maxY&&(this.maxY=t.maxY)},Hs.prototype.getHeight=function(){return this.maxY-this.minY+1},Hs.prototype.getSize=function(){return[this.getWidth(),this.getHeight()]},Hs.prototype.getWidth=function(){return this.maxX-this.minX+1},Hs.prototype.intersects=function(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY};var Ks=Hs,Js=function(t){function e(e,i){t.call(this,e),this.context=i?null:er(),this.oversampling_,this.renderedExtent_=null,this.renderedRevision,this.renderedTiles=[],this.newTiles_=!1,this.tmpExtent=[1/0,1/0,-1/0,-1/0],this.tmpTileRange_=new Ks(0,0,0,0),this.imageTransform_=[1,0,0,1,0,0],this.zDirection=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isDrawableTile_=function(t){var e=this.getLayer(),i=t.getState(),n=e.getUseInterimTilesOnError();return i==ue.LOADED||i==ue.EMPTY||i==ue.ERROR&&!n},e.prototype.getTile=function(t,e,i,n,r){var o=this.getLayer(),s=o.getSource().getTile(t,e,i,n,r);return s.getState()==ue.ERROR&&(o.getUseInterimTilesOnError()?o.getPreload()>0&&(this.newTiles_=!0):s.setState(ue.LOADED)),this.isDrawableTile_(s)||(s=s.getInterimTile()),s},e.prototype.prepareFrame=function(t,e){var i=t.pixelRatio,n=t.size,r=t.viewState,o=r.projection,s=r.resolution,a=r.center,l=this.getLayer(),u=l.getSource(),h=u.getRevision(),c=u.getTileGridForProjection(o),p=c.getZForResolution(s,this.zDirection),f=c.getResolution(p),d=Math.round(s/f)||1,v=t.extent;if(void 0!==e.extent&&(v=ui(v,e.extent)),di(v))return!1;var g=c.getTileRangeForExtentAndZ(v,p),m=c.getTileRangeExtent(p,g),y=u.getTilePixelRatio(i),_={};_[p]={};var x,b,E,w=this.createLoadedTileFinder(u,o,_),j=t.viewHints,C=j[je]||j[Ce],S=this.tmpExtent,T=this.tmpTileRange_;for(this.newTiles_=!1,b=g.minX;b<=g.maxX;++b)for(E=g.minY;E<=g.maxY;++E)if(!(Date.now()-t.time>16&&C)){if(x=this.getTile(p,b,E,i,o),this.isDrawableTile_(x)){var R=P(this);if(x.getState()==ue.LOADED){_[p][x.tileCoord.toString()]=x;var I=x.inTransition(R);this.newTiles_||!I&&-1!==this.renderedTiles.indexOf(x)||(this.newTiles_=!0)}if(1===x.getAlpha(R,t.time))continue}var O=c.getTileCoordChildTileRange(x.tileCoord,T,S),A=!1;O&&(A=w(p+1,O)),A||c.forEachTileCoordParentTileRange(x.tileCoord,w,null,T,S)}var L=f*i/y*d;if(!(this.renderedResolution&&Date.now()-t.time>16&&C)&&(this.newTiles_||!this.renderedExtent_||!Ye(this.renderedExtent_,v)||this.renderedRevision!=h||d!=this.oversampling_||!C&&L!=this.renderedResolution)){var M=this.context;if(M){var k=u.getTilePixelSize(p,i,o),D=Math.round(g.getWidth()*k[0]/d),F=Math.round(g.getHeight()*k[1]/d),N=M.canvas;N.width!=D||N.height!=F?(this.oversampling_=d,N.width=D,N.height=F):((this.renderedExtent_&&!qe(m,this.renderedExtent_)||this.renderedRevision!=h)&&M.clearRect(0,0,D,F),d=this.oversampling_)}this.renderedTiles.length=0;var G,W,z,B,Y,U,V,X,H,Z,K=Object.keys(_).map(Number);for(K.sort(function(t,e){return t===p?1:e===p?-1:t>e?1:t<e?-1:0}),B=0,Y=K.length;B<Y;++B)for(var J in z=K[B],W=u.getTilePixelSize(z,i,o),G=c.getResolution(z)/f,V=y*u.getGutterForProjection(o),X=_[z])x=X[J],b=((U=c.getTileCoordExtent(x.getTileCoord(),S))[0]-m[0])/f*y/d,E=(m[3]-U[3])/f*y/d,H=W[0]*G/d,Z=W[1]*G/d,this.drawTileImage(x,t,e,b,E,H,Z,V,p===z),this.renderedTiles.push(x);this.renderedRevision=h,this.renderedResolution=f*i/y*d,this.renderedExtent_=m}var q=this.renderedResolution/s,Q=cn(this.imageTransform_,i*n[0]/2,i*n[1]/2,q,q,0,(this.renderedExtent_[0]-a[0])/this.renderedResolution*i,(a[1]-this.renderedExtent_[3])/this.renderedResolution*i);return cn(this.coordinateToCanvasPixelTransform,i*n[0]/2-Q[4],i*n[1]/2-Q[5],i/s,-i/s,0,-a[0],-a[1]),this.updateUsedTiles(t.usedTiles,u,p,g),this.manageTilePyramid(t,u,c,i,o,v,p,l.getPreload()),this.scheduleExpireCache(t,u),this.renderedTiles.length>0},e.prototype.drawTileImage=function(t,e,i,n,r,o,s,a,l){var u=this.getTileImage(t);if(u){var h=P(this),c=l?t.getAlpha(h,e.time):1,p=this.getLayer().getSource();1!==c||p.getOpaque(e.viewState.projection)||this.context.clearRect(n,r,o,s);var f=c!==this.context.globalAlpha;f&&(this.context.save(),this.context.globalAlpha=c),this.context.drawImage(u,a,a,u.width-2*a,u.height-2*a,n,r,o,s),f&&this.context.restore(),1!==c?e.animate=!0:l&&t.endTransition(h)}},e.prototype.getImage=function(){var t=this.context;return t?t.canvas:null},e.prototype.getImageTransform=function(){return this.imageTransform_},e.prototype.getTileImage=function(t){return t.getImage()},e}(Us);Js.handles=function(t){return t.getType()===So.TILE},Js.create=function(t,e){return new Js(e)},Js.prototype.getLayer;var qs=Js,Qs=function(){};Qs.prototype.getReplay=function(t,e){return M()},Qs.prototype.isEmpty=function(){return M()},Qs.prototype.addDeclutter=function(t){return M()};var $s=Qs,ta={CIRCLE:"Circle",DEFAULT:"Default",IMAGE:"Image",LINE_STRING:"LineString",POLYGON:"Polygon",TEXT:"Text"};function ea(t,e,i,n,r,o,s,a){for(var l,u,h,c=[],p=t[e]>t[i-n],f=r.length,d=t[e],v=t[e+1],g=t[e+=n],m=t[e+1],y=0,_=Math.sqrt(Math.pow(g-d,2)+Math.pow(m-v,2)),x="",b=0,E=0;E<f;++E){u=p?f-E-1:E;var w=r.charAt(u),j=o(x=p?w+x:x+w)-b;b+=j;for(var C=s+j/2;e<i-n&&y+_<C;)d=g,v=m,g=t[e+=n],m=t[e+1],y+=_,_=Math.sqrt(Math.pow(g-d,2)+Math.pow(m-v,2));var S=C-y,T=Math.atan2(m-v,g-d);if(p&&(T+=T>0?-Math.PI:Math.PI),void 0!==h){var R=T-h;if(R+=R>Math.PI?-2*Math.PI:R<-Math.PI?2*Math.PI:0,Math.abs(R)>a)return null}var I=S/_,O=xe(d,g,I),A=xe(v,m,I);h==T?(p&&(l[0]=O,l[1]=A,l[2]=j/2),l[4]=x):(b=j,l=[O,A,j/2,T,x=w],p?c.unshift(l):c.push(l),h=T),s+=j}return c}var ia={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},na=[ia.FILL],ra=[ia.STROKE],oa=[ia.BEGIN_PATH],sa=[ia.CLOSE_PATH],aa=ia,la=[ta.POLYGON,ta.CIRCLE,ta.LINE_STRING,ta.IMAGE,ta.TEXT,ta.DEFAULT],ua={left:0,end:0,center:.5,right:1,start:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1},ha=[1/0,1/0,-1/0,-1/0],ca=[1,0,0,1,0,0],pa=function(t){function e(e,i,n,r,o,s){t.call(this),this.declutterTree=s,this.tolerance=e,this.maxExtent=i,this.overlaps=o,this.pixelRatio=r,this.maxLineWidth=0,this.resolution=n,this.alignFill_,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.coordinateCache_={},this.renderedTransform_=[1,0,0,1,0,0],this.hitDetectionInstructions=[],this.pixelCoordinates_=null,this.state={},this.viewRotation_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.replayTextBackground_=function(t,e,i,n,r,o,s){t.beginPath(),t.moveTo.apply(t,e),t.lineTo.apply(t,i),t.lineTo.apply(t,n),t.lineTo.apply(t,r),t.lineTo.apply(t,e),o&&(this.alignFill_=o[2],this.fill_(t)),s&&(this.setStrokeStyle_(t,s),t.stroke())},e.prototype.replayImage_=function(t,e,i,n,r,o,s,a,l,u,h,c,p,f,d,v,g,m){var y=g||m;e-=r*=p,i-=o*=p;var _,x,b,E,w=d+u>n.width?n.width-u:d,j=a+h>n.height?n.height-h:a,C=v[3]+w*p+v[1],S=v[0]+j*p+v[2],T=e-v[3],R=i-v[0];(y||0!==c)&&(_=[T,R],x=[T+C,R],b=[T+C,R+S],E=[T,R+S]);var I=null;if(0!==c){var O=e+r,A=i+o;I=cn(ca,O,A,1,1,c,-O,-A),Ze(ha),$e(ha,ln(ca,_)),$e(ha,ln(ca,x)),$e(ha,ln(ca,b)),$e(ha,ln(ca,E))}else He(T,R,T+C,R+S,ha);var L=t.canvas,M=m?m[2]*p/2:0,k=ha[0]-M<=L.width&&ha[2]+M>=0&&ha[1]-M<=L.height&&ha[3]+M>=0;if(f&&(e=Math.round(e),i=Math.round(i)),s){if(!k&&1==s[4])return;Qe(s,ha);var P=k?[t,I?I.slice(0):null,l,n,u,h,w,j,e,i,p]:null;P&&y&&P.push(g,m,_,x,b,E),s.push(P)}else k&&(y&&this.replayTextBackground_(t,_,x,b,E,g,m),$o(t,I,l,n,u,h,w,j,e,i,p))},e.prototype.applyPixelRatio=function(t){var e=this.pixelRatio;return 1==e?t:t.map(function(t){return t*e})},e.prototype.appendFlatCoordinates=function(t,e,i,n,r,o){var s=this.coordinates.length,a=this.getBufferedMaxExtent();o&&(e+=n);var l,u,h,c=[t[e],t[e+1]],p=[NaN,NaN],f=!0;for(l=e+n;l<i;l+=n)p[0]=t[l],p[1]=t[l+1],(h=Ve(a,p))!==u?(f&&(this.coordinates[s++]=c[0],this.coordinates[s++]=c[1]),this.coordinates[s++]=p[0],this.coordinates[s++]=p[1],f=!1):h===Fe.INTERSECTING?(this.coordinates[s++]=p[0],this.coordinates[s++]=p[1],f=!1):f=!0,c[0]=p[0],c[1]=p[1],u=h;return(r&&f||l===e+n)&&(this.coordinates[s++]=c[0],this.coordinates[s++]=c[1]),s},e.prototype.drawCustomCoordinates_=function(t,e,i,n,r){for(var o=0,s=i.length;o<s;++o){var a=i[o],l=this.appendFlatCoordinates(t,e,a,n,!1,!1);r.push(l),e=a}return e},e.prototype.drawCustom=function(t,e,i){this.beginGeometry(t,e);var n,r,o,s,a,l=t.getType(),u=t.getStride(),h=this.coordinates.length;if(l==mi.MULTI_POLYGON){n=(t=t).getOrientedFlatCoordinates(),s=[];var c=t.getEndss();a=0;for(var p=0,f=c.length;p<f;++p){var d=[];a=this.drawCustomCoordinates_(n,a,c[p],u,d),s.push(d)}this.instructions.push([aa.CUSTOM,h,s,t,i,Rn])}else l==mi.POLYGON||l==mi.MULTI_LINE_STRING?(o=[],n=l==mi.POLYGON?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),a=this.drawCustomCoordinates_(n,0,t.getEnds(),u,o),this.instructions.push([aa.CUSTOM,h,o,t,i,Tn])):l==mi.LINE_STRING||l==mi.MULTI_POINT?(n=t.getFlatCoordinates(),r=this.appendFlatCoordinates(n,0,n.length,u,!1,!1),this.instructions.push([aa.CUSTOM,h,r,t,i,Sn])):l==mi.POINT&&(n=t.getFlatCoordinates(),this.coordinates.push(n[0],n[1]),r=this.coordinates.length,this.instructions.push([aa.CUSTOM,h,r,t,i]));this.endGeometry(t,e)},e.prototype.beginGeometry=function(t,e){this.beginGeometryInstruction1_=[aa.BEGIN_GEOMETRY,e,0],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[aa.BEGIN_GEOMETRY,e,0],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)},e.prototype.finish=function(){},e.prototype.fill_=function(t){if(this.alignFill_){var e=ln(this.renderedTransform_,[0,0]),i=512*this.pixelRatio;t.translate(e[0]%i,e[1]%i),t.rotate(this.viewRotation_)}t.fill(),this.alignFill_&&t.setTransform.apply(t,Qo)},e.prototype.setStrokeStyle_=function(t,e){t.strokeStyle=e[1],t.lineWidth=e[2],t.lineCap=e[3],t.lineJoin=e[4],t.miterLimit=e[5],rt&&(t.lineDashOffset=e[7],t.setLineDash(e[6]))},e.prototype.renderDeclutter_=function(t,e){if(t&&t.length>5){var i=t[4];if(1==i||i==t.length-5){var n={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:e};if(!this.declutterTree.collides(n)){this.declutterTree.insert(n);for(var r=5,o=t.length;r<o;++r){var s=t[r];s&&(s.length>11&&this.replayTextBackground_(s[0],s[13],s[14],s[15],s[16],s[11],s[12]),$o.apply(void 0,s))}}t.length=5,Ze(t)}}},e.prototype.replay_=function(t,e,i,n,r,o,s){var a;this.pixelCoordinates_&&Kt(e,this.renderedTransform_)?a=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),a=_i(this.coordinates,0,this.coordinates.length,2,e,this.pixelCoordinates_),an(this.renderedTransform_,e));for(var l,u,h,c,p,d,v,g,m,y,_,x,b=!f(i),E=0,w=n.length,j=0,C=0,S=0,T=null,R=null,I=this.coordinateCache_,O=this.viewRotation_,A={context:t,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:O},L=this.instructions!=n||this.overlaps?0:200;E<w;){var M=n[E];switch(M[0]){case aa.BEGIN_GEOMETRY:y=M[1],b&&i[P(y)]||!y.getGeometry()?E=M[2]:void 0===s||fi(s,y.getGeometry().getExtent())?++E:E=M[2]+1;break;case aa.BEGIN_PATH:C>L&&(this.fill_(t),C=0),S>L&&(t.stroke(),S=0),C||S||(t.beginPath(),c=p=NaN),++E;break;case aa.CIRCLE:var k=a[j=M[1]],D=a[j+1],F=a[j+2]-k,N=a[j+3]-D,G=Math.sqrt(F*F+N*N);t.moveTo(k+G,D),t.arc(k,D,G,0,2*Math.PI,!0),++E;break;case aa.CLOSE_PATH:t.closePath(),++E;break;case aa.CUSTOM:j=M[1],l=M[2];var W=M[3],z=M[4],B=6==M.length?M[5]:void 0;A.geometry=W,A.feature=y,E in I||(I[E]=[]);var Y=I[E];B?B(a,j,l,2,Y):(Y[0]=a[j],Y[1]=a[j+1],Y.length=2),z(Y,A),++E;break;case aa.DRAW_IMAGE:j=M[1],l=M[2],m=M[3],u=M[4],h=M[5],g=o?null:M[6];var U=M[7],V=M[8],X=M[9],H=M[10],Z=M[11],K=M[12],J=M[13],q=M[14],Q=void 0,$=void 0,tt=void 0;for(M.length>16?(Q=M[15],$=M[16],tt=M[17]):(Q=Wo,$=tt=!1),Z&&(K+=O);j<l;j+=2)this.replayImage_(t,a[j],a[j+1],m,u,h,g,U,V,X,H,K,J,r,q,Q,$?T:null,tt?R:null);this.renderDeclutter_(g,y),++E;break;case aa.DRAW_CHARS:var et=M[1],it=M[2],nt=M[3];g=o?null:M[4];var rt=M[5],ot=M[6],st=M[7],at=M[8],lt=M[9],ut=M[10],ht=M[11],ct=M[12],pt=M[13],ft=M[14],dt=bo(a,et,it,2),vt=at(ct);if(rt||vt<=dt){var gt=this.textStates[pt].textAlign,mt=ea(a,et,it,2,ct,at,(dt-vt)*ua[gt],st);if(mt){var yt=void 0,_t=void 0,xt=void 0,bt=void 0,Et=void 0;if(ut)for(yt=0,_t=mt.length;yt<_t;++yt)xt=(Et=mt[yt])[4],bt=this.getImage(xt,pt,"",ut),u=Et[2]+ht,h=nt*bt.height+2*(.5-nt)*ht-lt,this.replayImage_(t,Et[0],Et[1],bt,u,h,g,bt.height,1,0,0,Et[3],ft,!1,bt.width,Wo,null,null);if(ot)for(yt=0,_t=mt.length;yt<_t;++yt)xt=(Et=mt[yt])[4],bt=this.getImage(xt,pt,ot,""),u=Et[2],h=nt*bt.height-lt,this.replayImage_(t,Et[0],Et[1],bt,u,h,g,bt.height,1,0,0,Et[3],ft,!1,bt.width,Wo,null,null)}}this.renderDeclutter_(g,y),++E;break;case aa.END_GEOMETRY:if(void 0!==o){var wt=o(y=M[1]);if(wt)return wt}++E;break;case aa.FILL:L?C++:this.fill_(t),++E;break;case aa.MOVE_TO_LINE_TO:for(j=M[1],l=M[2],_=a[j],v=(x=a[j+1])+.5|0,(d=_+.5|0)===c&&v===p||(t.moveTo(_,x),c=d,p=v),j+=2;j<l;j+=2)d=(_=a[j])+.5|0,v=(x=a[j+1])+.5|0,j!=l-2&&d===c&&v===p||(t.lineTo(_,x),c=d,p=v);++E;break;case aa.SET_FILL_STYLE:T=M,this.alignFill_=M[2],C&&(this.fill_(t),C=0,S&&(t.stroke(),S=0)),t.fillStyle=M[1],++E;break;case aa.SET_STROKE_STYLE:R=M,S&&(t.stroke(),S=0),this.setStrokeStyle_(t,M),++E;break;case aa.STROKE:L?S++:t.stroke(),++E;break;default:++E}}C&&this.fill_(t),S&&t.stroke()},e.prototype.replay=function(t,e,i,n,r){this.viewRotation_=i,this.replay_(t,e,n,this.instructions,r,void 0,void 0)},e.prototype.replayHitDetection=function(t,e,i,n,r,o){return this.viewRotation_=i,this.replay_(t,e,n,this.hitDetectionInstructions,!0,r,o)},e.prototype.reverseHitDetectionInstructions=function(){var t,e=this.hitDetectionInstructions;e.reverse();var i,n,r=e.length,o=-1;for(t=0;t<r;++t)(n=(i=e[t])[0])==aa.END_GEOMETRY?o=t:n==aa.BEGIN_GEOMETRY&&(i[2]=t,Ht(this.hitDetectionInstructions,o,t),o=-1)},e.prototype.setFillStrokeStyle=function(t,e){var i=this.state;if(t){var n=t.getColor();i.fillStyle=ko(n||Fo)}else i.fillStyle=void 0;if(e){var r=e.getColor();i.strokeStyle=ko(r||Go);var o=e.getLineCap();i.lineCap=void 0!==o?o:"round";var s=e.getLineDash();i.lineDash=s?s.slice():No;var a=e.getLineDashOffset();i.lineDashOffset=a||0;var l=e.getLineJoin();i.lineJoin=void 0!==l?l:"round";var u=e.getWidth();i.lineWidth=void 0!==u?u:1;var h=e.getMiterLimit();i.miterLimit=void 0!==h?h:10,i.lineWidth>this.maxLineWidth&&(this.maxLineWidth=i.lineWidth,this.bufferedMaxExtent_=null)}else i.strokeStyle=void 0,i.lineCap=void 0,i.lineDash=null,i.lineDashOffset=void 0,i.lineJoin=void 0,i.lineWidth=void 0,i.miterLimit=void 0},e.prototype.createFill=function(t,e){var i=t.fillStyle,n=[aa.SET_FILL_STYLE,i];return"string"!=typeof i&&n.push(!0),n},e.prototype.applyStroke=function(t){this.instructions.push(this.createStroke(t))},e.prototype.createStroke=function(t){return[aa.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,this.applyPixelRatio(t.lineDash),t.lineDashOffset*this.pixelRatio]},e.prototype.updateFillStyle=function(t,e,i){var n=t.fillStyle;"string"==typeof n&&t.currentFillStyle==n||(void 0!==n&&this.instructions.push(e.call(this,t,i)),t.currentFillStyle=n)},e.prototype.updateStrokeStyle=function(t,e){var i=t.strokeStyle,n=t.lineCap,r=t.lineDash,o=t.lineDashOffset,s=t.lineJoin,a=t.lineWidth,l=t.miterLimit;(t.currentStrokeStyle!=i||t.currentLineCap!=n||r!=t.currentLineDash&&!Kt(t.currentLineDash,r)||t.currentLineDashOffset!=o||t.currentLineJoin!=s||t.currentLineWidth!=a||t.currentMiterLimit!=l)&&(void 0!==i&&e.call(this,t),t.currentStrokeStyle=i,t.currentLineCap=n,t.currentLineDash=r,t.currentLineDashOffset=o,t.currentLineJoin=s,t.currentLineWidth=a,t.currentMiterLimit=l)},e.prototype.endGeometry=function(t,e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;var i=[aa.END_GEOMETRY,e];this.instructions.push(i),this.hitDetectionInstructions.push(i)},e.prototype.getBufferedMaxExtent=function(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=We(this.maxExtent),this.maxLineWidth>0)){var t=this.resolution*(this.maxLineWidth+1)/2;Ge(this.bufferedMaxExtent_,t,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_},e}(ks),fa=function(t){function e(e,i,n,r,o,s){t.call(this,e,i,n,r,o,s),this.declutterGroup_=null,this.hitDetectionImage_=null,this.image_=null,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.drawCoordinates_=function(t,e,i,n){return this.appendFlatCoordinates(t,e,i,n,!1,!1)},e.prototype.drawPoint=function(t,e){if(this.image_){this.beginGeometry(t,e);var i=t.getFlatCoordinates(),n=t.getStride(),r=this.coordinates.length,o=this.drawCoordinates_(i,0,i.length,n);this.instructions.push([aa.DRAW_IMAGE,r,o,this.image_,this.anchorX_,this.anchorY_,this.declutterGroup_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_*this.pixelRatio,this.width_]),this.hitDetectionInstructions.push([aa.DRAW_IMAGE,r,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.declutterGroup_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_]),this.endGeometry(t,e)}},e.prototype.drawMultiPoint=function(t,e){if(this.image_){this.beginGeometry(t,e);var i=t.getFlatCoordinates(),n=t.getStride(),r=this.coordinates.length,o=this.drawCoordinates_(i,0,i.length,n);this.instructions.push([aa.DRAW_IMAGE,r,o,this.image_,this.anchorX_,this.anchorY_,this.declutterGroup_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_*this.pixelRatio,this.width_]),this.hitDetectionInstructions.push([aa.DRAW_IMAGE,r,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.declutterGroup_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_]),this.endGeometry(t,e)}},e.prototype.finish=function(){this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0},e.prototype.setImageStyle=function(t,e){var i=t.getAnchor(),n=t.getSize(),r=t.getHitDetectionImage(1),o=t.getImage(1),s=t.getOrigin();this.anchorX_=i[0],this.anchorY_=i[1],this.declutterGroup_=e,this.hitDetectionImage_=r,this.image_=o,this.height_=n[1],this.opacity_=t.getOpacity(),this.originX_=s[0],this.originY_=s[1],this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScale(),this.width_=n[0]},e}(pa),da=function(t){function e(e,i,n,r,o,s){t.call(this,e,i,n,r,o,s)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.drawFlatCoordinates_=function(t,e,i,n){var r=this.coordinates.length,o=this.appendFlatCoordinates(t,e,i,n,!1,!1),s=[aa.MOVE_TO_LINE_TO,r,o];return this.instructions.push(s),this.hitDetectionInstructions.push(s),i},e.prototype.drawLineString=function(t,e){var i=this.state,n=i.strokeStyle,r=i.lineWidth;if(void 0!==n&&void 0!==r){this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([aa.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset],oa);var o=t.getFlatCoordinates(),s=t.getStride();this.drawFlatCoordinates_(o,0,o.length,s),this.hitDetectionInstructions.push(ra),this.endGeometry(t,e)}},e.prototype.drawMultiLineString=function(t,e){var i=this.state,n=i.strokeStyle,r=i.lineWidth;if(void 0!==n&&void 0!==r){this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([aa.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset],oa);for(var o=t.getEnds(),s=t.getFlatCoordinates(),a=t.getStride(),l=0,u=0,h=o.length;u<h;++u)l=this.drawFlatCoordinates_(s,l,o[u],a);this.hitDetectionInstructions.push(ra),this.endGeometry(t,e)}},e.prototype.finish=function(){var t=this.state;void 0!=t.lastStroke&&t.lastStroke!=this.coordinates.length&&this.instructions.push(ra),this.reverseHitDetectionInstructions(),this.state=null},e.prototype.applyStroke=function(e){void 0!=e.lastStroke&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(ra),e.lastStroke=this.coordinates.length),e.lastStroke=0,t.prototype.applyStroke.call(this,e),this.instructions.push(oa)},e}(pa),va=function(t){function e(e,i,n,r,o,s){t.call(this,e,i,n,r,o,s)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.drawFlatCoordinatess_=function(t,e,i,n){var r=this.state,o=void 0!==r.fillStyle,s=void 0!=r.strokeStyle,a=i.length;this.instructions.push(oa),this.hitDetectionInstructions.push(oa);for(var l=0;l<a;++l){var u=i[l],h=this.coordinates.length,c=this.appendFlatCoordinates(t,e,u,n,!0,!s),p=[aa.MOVE_TO_LINE_TO,h,c];this.instructions.push(p),this.hitDetectionInstructions.push(p),s&&(this.instructions.push(sa),this.hitDetectionInstructions.push(sa)),e=u}return o&&(this.instructions.push(na),this.hitDetectionInstructions.push(na)),s&&(this.instructions.push(ra),this.hitDetectionInstructions.push(ra)),e},e.prototype.drawCircle=function(t,e){var i=this.state,n=i.fillStyle,r=i.strokeStyle;if(void 0!==n||void 0!==r){this.setFillStrokeStyles_(t),this.beginGeometry(t,e),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([aa.SET_FILL_STYLE,Oo(Fo)]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([aa.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);var o=t.getFlatCoordinates(),s=t.getStride(),a=this.coordinates.length;this.appendFlatCoordinates(o,0,o.length,s,!1,!1);var l=[aa.CIRCLE,a];this.instructions.push(oa,l),this.hitDetectionInstructions.push(oa,l),this.hitDetectionInstructions.push(na),void 0!==i.fillStyle&&this.instructions.push(na),void 0!==i.strokeStyle&&(this.instructions.push(ra),this.hitDetectionInstructions.push(ra)),this.endGeometry(t,e)}},e.prototype.drawPolygon=function(t,e){var i=this.state,n=i.fillStyle,r=i.strokeStyle;if(void 0!==n||void 0!==r){this.setFillStrokeStyles_(t),this.beginGeometry(t,e),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([aa.SET_FILL_STYLE,Oo(Fo)]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([aa.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);var o=t.getEnds(),s=t.getOrientedFlatCoordinates(),a=t.getStride();this.drawFlatCoordinatess_(s,0,o,a),this.endGeometry(t,e)}},e.prototype.drawMultiPolygon=function(t,e){var i=this.state,n=i.fillStyle,r=i.strokeStyle;if(void 0!==n||void 0!==r){this.setFillStrokeStyles_(t),this.beginGeometry(t,e),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([aa.SET_FILL_STYLE,Oo(Fo)]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([aa.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);for(var o=t.getEndss(),s=t.getOrientedFlatCoordinates(),a=t.getStride(),l=0,u=0,h=o.length;u<h;++u)l=this.drawFlatCoordinatess_(s,l,o[u],a);this.endGeometry(t,e)}},e.prototype.finish=function(){this.reverseHitDetectionInstructions(),this.state=null;var t=this.tolerance;if(0!==t)for(var e=this.coordinates,i=0,n=e.length;i<n;++i)e[i]=An(e[i],t)},e.prototype.setFillStrokeStyles_=function(t){var e=this.state;void 0!==e.fillStyle&&this.updateFillStyle(e,this.createFill,t),void 0!==e.strokeStyle&&this.updateStrokeStyle(e,this.applyStroke)},e}(pa);function ga(t,e,i,n,r){var o,s,a,l,u,h,c,p,f,d=i,v=i,g=0,m=0,y=i;for(o=i;o<n;o+=r){var _=e[o],x=e[o+1];void 0!==l&&(p=_-l,f=x-u,a=Math.sqrt(p*p+f*f),void 0!==h&&(m+=s,Math.acos((h*p+c*f)/(s*a))>t&&(m>g&&(g=m,d=y,v=o),m=0,y=o-r)),s=a,h=p,c=f),l=_,u=x}return(m+=a)>g?[y,o]:[d,v]}var ma="point",ya="line";var _a={Circle:va,Default:pa,Image:fa,LineString:da,Polygon:va,Text:function(t){function e(e,i,n,r,o,s){t.call(this,e,i,n,r,o,s),this.declutterGroup_,this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.widths_={},zo.prune()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.drawText=function(t,e){var i=this.textFillState_,n=this.textStrokeState_,r=this.textState_;if(""!==this.text_&&r&&(i||n)){var o,s,a=this.coordinates.length,l=t.getType(),u=null,h=2,c=2;if(r.placement===ya){if(!fi(this.getBufferedMaxExtent(),t.getExtent()))return;var p;if(u=t.getFlatCoordinates(),c=t.getStride(),l==mi.LINE_STRING)p=[u.length];else if(l==mi.MULTI_LINE_STRING)p=t.getEnds();else if(l==mi.POLYGON)p=t.getEnds().slice(0,1);else if(l==mi.MULTI_POLYGON){var f=t.getEndss();for(p=[],o=0,s=f.length;o<s;++o)p.push(f[o][0])}this.beginGeometry(t,e);for(var d,v=r.textAlign,g=0,m=0,y=p.length;m<y;++m){if(void 0==v){var _=ga(r.maxAngle,u,g,p[m],c);g=_[0],d=_[1]}else d=p[m];for(o=g;o<d;o+=c)this.coordinates.push(u[o],u[o+1]);h=this.coordinates.length,g=p[m],this.drawChars_(a,h,this.declutterGroup_),a=h}this.endGeometry(t,e)}else{var x=this.getImage(this.text_,this.textKey_,this.fillKey_,this.strokeKey_),b=x.width/this.pixelRatio;switch(l){case mi.POINT:case mi.MULTI_POINT:h=(u=t.getFlatCoordinates()).length;break;case mi.LINE_STRING:u=t.getFlatMidpoint();break;case mi.CIRCLE:u=t.getCenter();break;case mi.MULTI_LINE_STRING:h=(u=t.getFlatMidpoints()).length;break;case mi.POLYGON:if(u=t.getFlatInteriorPoint(),!r.overflow&&u[2]/this.resolution<b)return;c=3;break;case mi.MULTI_POLYGON:var E=t.getFlatInteriorPoints();for(u=[],o=0,s=E.length;o<s;o+=3)(r.overflow||E[o+2]/this.resolution>=b)&&u.push(E[o],E[o+1]);if(0==(h=u.length))return}h=this.appendFlatCoordinates(u,0,h,c,!1,!1),(r.backgroundFill||r.backgroundStroke)&&(this.setFillStrokeStyle(r.backgroundFill,r.backgroundStroke),r.backgroundFill&&(this.updateFillStyle(this.state,this.createFill,t),this.hitDetectionInstructions.push(this.createFill(this.state,t))),r.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(t,e),this.drawTextImage_(x,a,h),this.endGeometry(t,e)}}},e.prototype.getImage=function(t,e,i,n){var r,o=n+e+t+i+this.pixelRatio;if(!zo.containsKey(o)){var s=n?this.strokeStates[n]||this.textStrokeState_:null,a=i?this.fillStates[i]||this.textFillState_:null,l=this.textStates[e]||this.textState_,u=this.pixelRatio,h=l.scale*u,c=ua[l.textAlign||"center"],p=n&&s.lineWidth?s.lineWidth:0,f=t.split("\n"),d=f.length,v=[],g=function(t,e,i){for(var n=e.length,r=0,o=0;o<n;++o){var s=Jo(t,e[o]);r=Math.max(r,s),i.push(s)}return r}(l.font,f,v),m=Ko(l.font),y=m*d,_=g+p,x=er(Math.ceil(_*h),Math.ceil((y+p)*h));r=x.canvas,zo.set(o,r),1!=h&&x.scale(h,h),x.font=l.font,n&&(x.strokeStyle=s.strokeStyle,x.lineWidth=p,x.lineCap=s.lineCap,x.lineJoin=s.lineJoin,x.miterLimit=s.miterLimit,rt&&s.lineDash.length&&(x.setLineDash(s.lineDash),x.lineDashOffset=s.lineDashOffset)),i&&(x.fillStyle=a.fillStyle),x.textBaseline="middle",x.textAlign="center";var b,E=.5-c,w=c*r.width/h+E*p;if(n)for(b=0;b<d;++b)x.strokeText(f[b],w+E*v[b],.5*(p+m)+b*m);if(i)for(b=0;b<d;++b)x.fillText(f[b],w+E*v[b],.5*(p+m)+b*m)}return zo.get(o)},e.prototype.drawTextImage_=function(t,e,i){var n=this.textState_,r=this.textStrokeState_,o=this.pixelRatio,s=ua[n.textAlign||"center"],a=ua[n.textBaseline],l=r&&r.lineWidth?r.lineWidth:0,u=s*t.width/o+2*(.5-s)*l,h=a*t.height/o+2*(.5-a)*l;this.instructions.push([aa.DRAW_IMAGE,e,i,t,(u-this.textOffsetX_)*o,(h-this.textOffsetY_)*o,this.declutterGroup_,t.height,1,0,0,this.textRotateWithView_,this.textRotation_,1,t.width,n.padding==Wo?Wo:n.padding.map(function(t){return t*o}),!!n.backgroundFill,!!n.backgroundStroke]),this.hitDetectionInstructions.push([aa.DRAW_IMAGE,e,i,t,(u-this.textOffsetX_)*o,(h-this.textOffsetY_)*o,this.declutterGroup_,t.height,1,0,0,this.textRotateWithView_,this.textRotation_,1/o,t.width,n.padding,!!n.backgroundFill,!!n.backgroundStroke])},e.prototype.drawChars_=function(t,e,i){var n=this.textStrokeState_,r=this.textState_,o=this.textFillState_,s=this.strokeKey_;n&&(s in this.strokeStates||(this.strokeStates[s]={strokeStyle:n.strokeStyle,lineCap:n.lineCap,lineDashOffset:n.lineDashOffset,lineWidth:n.lineWidth,lineJoin:n.lineJoin,miterLimit:n.miterLimit,lineDash:n.lineDash}));var a=this.textKey_;this.textKey_ in this.textStates||(this.textStates[this.textKey_]={font:r.font,textAlign:r.textAlign||"center",scale:r.scale});var l=this.fillKey_;o&&(l in this.fillStates||(this.fillStates[l]={fillStyle:o.fillStyle}));var u=this.pixelRatio,h=ua[r.textBaseline],c=this.textOffsetY_*u,p=this.text_,f=r.font,d=r.scale,v=n?n.lineWidth*d/2:0,g=this.widths_[f];g||(this.widths_[f]=g={}),this.instructions.push([aa.DRAW_CHARS,t,e,h,i,r.overflow,l,r.maxAngle,function(t){var e=g[t];return e||(e=g[t]=Jo(f,t)),e*d*u},c,s,v*u,p,a,1]),this.hitDetectionInstructions.push([aa.DRAW_CHARS,t,e,h,i,r.overflow,l,r.maxAngle,function(t){var e=g[t];return e||(e=g[t]=Jo(f,t)),e*d},c,s,v,p,a,1/u])},e.prototype.setTextStyle=function(t,e){var i,n,r;if(t){this.declutterGroup_=e;var o=t.getFill();o?((n=this.textFillState_)||(n=this.textFillState_={}),n.fillStyle=ko(o.getColor()||Fo)):n=this.textFillState_=null;var s=t.getStroke();if(s){(r=this.textStrokeState_)||(r=this.textStrokeState_={});var a=s.getLineDash(),l=s.getLineDashOffset(),u=s.getWidth(),h=s.getMiterLimit();r.lineCap=s.getLineCap()||"round",r.lineDash=a?a.slice():No,r.lineDashOffset=void 0===l?0:l,r.lineJoin=s.getLineJoin()||"round",r.lineWidth=void 0===u?1:u,r.miterLimit=void 0===h?10:h,r.strokeStyle=ko(s.getColor()||Go)}else r=this.textStrokeState_=null;i=this.textState_;var c=t.getFont()||"10px sans-serif";Vo(c);var p=t.getScale();i.overflow=t.getOverflow(),i.font=c,i.maxAngle=t.getMaxAngle(),i.placement=t.getPlacement(),i.textAlign=t.getTextAlign(),i.textBaseline=t.getTextBaseline()||"middle",i.backgroundFill=t.getBackgroundFill(),i.backgroundStroke=t.getBackgroundStroke(),i.padding=t.getPadding()||Wo,i.scale=void 0===p?1:p;var f=t.getOffsetX(),d=t.getOffsetY(),v=t.getRotateWithView(),g=t.getRotation();this.text_=t.getText()||"",this.textOffsetX_=void 0===f?0:f,this.textOffsetY_=void 0===d?0:d,this.textRotateWithView_=void 0!==v&&v,this.textRotation_=void 0===g?0:g,this.strokeKey_=r?("string"==typeof r.strokeStyle?r.strokeStyle:P(r.strokeStyle))+r.lineCap+r.lineDashOffset+"|"+r.lineWidth+r.lineJoin+r.miterLimit+"["+r.lineDash.join()+"]":"",this.textKey_=i.font+i.scale+(i.textAlign||"?"),this.fillKey_=n?"string"==typeof n.fillStyle?n.fillStyle:"|"+P(n.fillStyle):""}else this.text_=""},e}(pa)},xa=function(t){function e(e,i,n,r,o,s,a){t.call(this),this.declutterTree_=s,this.declutterGroup_=null,this.tolerance_=e,this.maxExtent_=i,this.overlaps_=o,this.pixelRatio_=r,this.resolution_=n,this.renderBuffer_=a,this.replaysByZIndex_={},this.hitDetectionContext_=er(1,1),this.hitDetectionTransform_=[1,0,0,1,0,0]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.addDeclutter=function(t){var e=null;return this.declutterTree_&&(t?(e=this.declutterGroup_)[4]++:(e=this.declutterGroup_=[1/0,1/0,-1/0,-1/0]).push(1)),e},e.prototype.clip=function(t,e){var i=this.getClipCoords(e);t.beginPath(),t.moveTo(i[0],i[1]),t.lineTo(i[2],i[3]),t.lineTo(i[4],i[5]),t.lineTo(i[6],i[7]),t.clip()},e.prototype.hasReplays=function(t){for(var e in this.replaysByZIndex_)for(var i=this.replaysByZIndex_[e],n=0,r=t.length;n<r;++n)if(t[n]in i)return!0;return!1},e.prototype.finish=function(){for(var t in this.replaysByZIndex_){var e=this.replaysByZIndex_[t];for(var i in e)e[i].finish()}},e.prototype.forEachFeatureAtCoordinate=function(t,e,i,n,r,o,s){var a,l=2*(n=Math.round(n))+1,u=cn(this.hitDetectionTransform_,n+.5,n+.5,1/e,-1/e,-i,-t[0],-t[1]),h=this.hitDetectionContext_;h.canvas.width!==l||h.canvas.height!==l?(h.canvas.width=l,h.canvas.height=l):h.clearRect(0,0,l,l),void 0!==this.renderBuffer_&&($e(a=[1/0,1/0,-1/0,-1/0],t),Ge(a,e*(this.renderBuffer_+n),a));var c,p,f=function(t){if(void 0!==ba[t])return ba[t];for(var e=2*t+1,i=new Array(e),n=0;n<e;n++)i[n]=new Array(e);var r=t,o=0,s=0;for(;r>=o;)Ea(i,t+r,t+o),Ea(i,t+o,t+r),Ea(i,t-o,t+r),Ea(i,t-r,t+o),Ea(i,t-r,t-o),Ea(i,t-o,t-r),Ea(i,t+o,t-r),Ea(i,t+r,t-o),2*((s+=1+2*++o)-r)+1>0&&(s+=1-2*(r-=1));return ba[t]=i,i}(n);function d(t){for(var e=h.getImageData(0,0,l,l).data,i=0;i<l;i++)for(var n=0;n<l;n++)if(f[i][n]&&e[4*(n*l+i)+3]>0){var r=void 0;return(!c||p!=ta.IMAGE&&p!=ta.TEXT||-1!==c.indexOf(t))&&(r=o(t)),r||void h.clearRect(0,0,l,l)}}this.declutterTree_&&(c=this.declutterTree_.all().map(function(t){return t.value}));var v,g,m,y,_,x=Object.keys(this.replaysByZIndex_).map(Number);for(x.sort(Ut),v=x.length-1;v>=0;--v){var b=x[v].toString();for(m=this.replaysByZIndex_[b],g=la.length-1;g>=0;--g)if(void 0!==(y=m[p=la[g]]))if(!s||p!=ta.IMAGE&&p!=ta.TEXT){if(_=y.replayHitDetection(h,u,i,r,d,a))return _}else{var E=s[b];E?E.push(y,u.slice(0)):s[b]=[y,u.slice(0)]}}},e.prototype.getClipCoords=function(t){var e=this.maxExtent_,i=e[0],n=e[1],r=e[2],o=e[3],s=[i,n,i,o,r,o,r,n];return _i(s,0,8,2,t,s),s},e.prototype.getReplay=function(t,e){var i=void 0!==t?t.toString():"0",n=this.replaysByZIndex_[i];void 0===n&&(n={},this.replaysByZIndex_[i]=n);var r=n[e];void 0===r&&(r=new(0,_a[e])(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_,this.overlaps_,this.declutterTree_),n[e]=r);return r},e.prototype.getReplays=function(){return this.replaysByZIndex_},e.prototype.isEmpty=function(){return f(this.replaysByZIndex_)},e.prototype.replay=function(t,e,i,n,r,o,s){var a=Object.keys(this.replaysByZIndex_).map(Number);a.sort(Ut),t.save(),this.clip(t,e);var l,u,h,c,p,f,d=o||la;for(l=0,u=a.length;l<u;++l){var v=a[l].toString();for(p=this.replaysByZIndex_[v],h=0,c=d.length;h<c;++h){var g=d[h];if(f=p[g],void 0!==f)if(!s||g!=ta.IMAGE&&g!=ta.TEXT)f.replay(t,e,i,n,r);else{var m=s[v];m?m.push(f,e.slice(0)):s[v]=[f,e.slice(0)]}}}t.restore()},e}($s),ba={0:[[!0]]};function Ea(t,e,i){var n,r=Math.floor(t.length/2);if(e>=r)for(n=r;n<e;n++)t[n][i]=!0;else if(e<r)for(n=e+1;n<r;n++)t[n][i]=!0}var wa=xa,ja=.5,Ca={Point:function(t,e,i,n){var r=i.getImage();if(r){if(r.getImageState()!=Po.LOADED)return;var o=t.getReplay(i.getZIndex(),ta.IMAGE);o.setImageStyle(r,t.addDeclutter(!1)),o.drawPoint(e,n)}var s=i.getText();if(s){var a=t.getReplay(i.getZIndex(),ta.TEXT);a.setTextStyle(s,t.addDeclutter(!!r)),a.drawText(e,n)}},LineString:function(t,e,i,n){var r=i.getStroke();if(r){var o=t.getReplay(i.getZIndex(),ta.LINE_STRING);o.setFillStrokeStyle(null,r),o.drawLineString(e,n)}var s=i.getText();if(s){var a=t.getReplay(i.getZIndex(),ta.TEXT);a.setTextStyle(s,t.addDeclutter(!1)),a.drawText(e,n)}},Polygon:function(t,e,i,n){var r=i.getFill(),o=i.getStroke();if(r||o){var s=t.getReplay(i.getZIndex(),ta.POLYGON);s.setFillStrokeStyle(r,o),s.drawPolygon(e,n)}var a=i.getText();if(a){var l=t.getReplay(i.getZIndex(),ta.TEXT);l.setTextStyle(a,t.addDeclutter(!1)),l.drawText(e,n)}},MultiPoint:function(t,e,i,n){var r=i.getImage();if(r){if(r.getImageState()!=Po.LOADED)return;var o=t.getReplay(i.getZIndex(),ta.IMAGE);o.setImageStyle(r,t.addDeclutter(!1)),o.drawMultiPoint(e,n)}var s=i.getText();if(s){var a=t.getReplay(i.getZIndex(),ta.TEXT);a.setTextStyle(s,t.addDeclutter(!!r)),a.drawText(e,n)}},MultiLineString:function(t,e,i,n){var r=i.getStroke();if(r){var o=t.getReplay(i.getZIndex(),ta.LINE_STRING);o.setFillStrokeStyle(null,r),o.drawMultiLineString(e,n)}var s=i.getText();if(s){var a=t.getReplay(i.getZIndex(),ta.TEXT);a.setTextStyle(s,t.addDeclutter(!1)),a.drawText(e,n)}},MultiPolygon:function(t,e,i,n){var r=i.getFill(),o=i.getStroke();if(o||r){var s=t.getReplay(i.getZIndex(),ta.POLYGON);s.setFillStrokeStyle(r,o),s.drawMultiPolygon(e,n)}var a=i.getText();if(a){var l=t.getReplay(i.getZIndex(),ta.TEXT);l.setTextStyle(a,t.addDeclutter(!1)),l.drawText(e,n)}},GeometryCollection:function(t,e,i,n){var r,o,s=e.getGeometriesArray();for(r=0,o=s.length;r<o;++r){var a=Ca[s[r].getType()];a(t,s[r],i,n)}},Circle:function(t,e,i,n){var r=i.getFill(),o=i.getStroke();if(r||o){var s=t.getReplay(i.getZIndex(),ta.CIRCLE);s.setFillStrokeStyle(r,o),s.drawCircle(e,n)}var a=i.getText();if(a){var l=t.getReplay(i.getZIndex(),ta.TEXT);l.setTextStyle(a,t.addDeclutter(!1)),l.drawText(e,n)}}};function Sa(t,e){return parseInt(P(t),10)-parseInt(P(e),10)}function Ta(t,e){var i=Ra(t,e);return i*i}function Ra(t,e){return ja*t/e}function Ia(t,e,i,n,r,o){var s=!1,a=i.getImage();if(a){var l=a.getImageState();l==Po.LOADED||l==Po.ERROR?a.unlistenImageChange(r,o):(l==Po.IDLE&&a.load(),l=a.getImageState(),a.listenImageChange(r,o),s=!0)}return function(t,e,i,n){var r=i.getGeometryFunction()(e);if(!r)return;var o=r.getSimplifiedGeometry(n);if(i.getRenderer())!function t(e,i,n,r){if(i.getType()==mi.GEOMETRY_COLLECTION){for(var o=i.getGeometries(),s=0,a=o.length;s<a;++s)t(e,o[s],n,r);return}var l=e.getReplay(n.getZIndex(),ta.DEFAULT);l.drawCustom(i,r,n.getRenderer())}(t,o,i,e);else{var s=Ca[o.getType()];s(t,o,i,e)}}(t,e,i,n),s}var Oa=function(t){function e(e){t.call(this,e),this.declutterTree_=e.getDeclutter()?ws()(9,void 0):null,this.dirty_=!1,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=[1/0,1/0,-1/0,-1/0],this.renderedRenderOrder_=null,this.replayGroup_=null,this.replayGroupChanged=!0,this.context=er(),y(zo,A.CLEAR,this.handleFontsChanged_,this)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.disposeInternal=function(){x(zo,A.CLEAR,this.handleFontsChanged_,this),t.prototype.disposeInternal.call(this)},e.prototype.compose=function(t,e,i){var n=e.extent,r=e.pixelRatio,o=i.managed?e.skippedFeatureUids:{},s=e.viewState,a=s.projection,l=s.rotation,u=a.getExtent(),h=this.getLayer().getSource(),c=this.getTransform(e,0),p=i.extent,f=void 0!==p;f&&this.clip(t,e,p);var d=this.replayGroup_;if(d&&!d.isEmpty()){this.declutterTree_&&this.declutterTree_.clear();var v,g=this.getLayer(),m=0,y=0,_=1!==i.opacity,x=g.hasListener(le.RENDER);if(_||x){var b=t.canvas.width,E=t.canvas.height;if(l){var w=Math.round(Math.sqrt(b*b+E*E));m=(w-b)/2,y=(w-E)/2,b=E=w}this.context.canvas.width=b,this.context.canvas.height=E,v=this.context}else v=t;var j=v.globalAlpha;_||(v.globalAlpha=i.opacity),v!=t&&v.translate(m,y);var C=e.viewHints,S=!(C[je]||C[Ce]),T=e.size[0]*r,R=e.size[1]*r;if(qo(v,-l,T/2,R/2),d.replay(v,c,l,o,S),h.getWrapX()&&a.canWrapX()&&!Ye(u,n)){for(var I,O=n[0],A=pi(u),L=0;O<u[0];)I=A*--L,c=this.getTransform(e,I),d.replay(v,c,l,o,S),O+=A;for(L=0,O=n[2];O>u[2];)I=A*++L,c=this.getTransform(e,I),d.replay(v,c,l,o,S),O-=A}if(qo(v,l,T/2,R/2),x&&this.dispatchRenderEvent(v,e,c),v!=t){if(_){var M=t.globalAlpha;t.globalAlpha=i.opacity,t.drawImage(v.canvas,-m,-y),t.globalAlpha=M}else t.drawImage(v.canvas,-m,-y);v.translate(-m,-y)}_||(v.globalAlpha=j)}f&&t.restore()},e.prototype.composeFrame=function(t,e,i){var n=this.getTransform(t,0);this.preCompose(i,t,n),this.compose(i,t,e),this.postCompose(i,t,e,n)},e.prototype.forEachFeatureAtCoordinate=function(t,e,i,n,r){if(this.replayGroup_){var o=e.viewState.resolution,s=e.viewState.rotation,a=this.getLayer(),l={};return this.replayGroup_.forEachFeatureAtCoordinate(t,o,s,i,{},function(t){var e=P(t);if(!(e in l))return l[e]=!0,n.call(r,t,a)},null)}},e.prototype.handleFontsChanged_=function(t){var e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()},e.prototype.handleStyleImageChange_=function(t){this.renderIfReadyAndVisible()},e.prototype.prepareFrame=function(t,e){var i=this.getLayer(),n=i.getSource(),r=t.viewHints[je],o=t.viewHints[Ce],s=i.getUpdateWhileAnimating(),a=i.getUpdateWhileInteracting();if(!this.dirty_&&!s&&r||!a&&o)return!0;var l=t.extent,u=t.viewState,h=u.projection,c=u.resolution,p=t.pixelRatio,f=i.getRevision(),d=i.getRenderBuffer(),v=i.getRenderOrder();void 0===v&&(v=Sa);var g=Ge(l,d*c),m=u.projection.getExtent();if(n.getWrapX()&&u.projection.canWrapX()&&!Ye(m,t.extent)){var y=pi(m),_=Math.max(pi(g)/2,y);g[0]=m[0]-_,g[2]=m[2]+_}if(!this.dirty_&&this.renderedResolution_==c&&this.renderedRevision_==f&&this.renderedRenderOrder_==v&&Ye(this.renderedExtent_,g))return this.replayGroupChanged=!1,!0;this.replayGroup_=null,this.dirty_=!1;var x=new wa(Ra(c,p),g,c,p,n.getOverlaps(),this.declutterTree_,i.getRenderBuffer());n.loadFeatures(g,c,h);var b=function(t){var e,n=t.getStyleFunction()||i.getStyleFunction();if(n&&(e=n(t,c)),e){var r=this.renderFeature(t,c,p,e,x);this.dirty_=this.dirty_||r}}.bind(this);if(v){var E=[];n.forEachFeatureInExtent(g,function(t){E.push(t)}),E.sort(v);for(var w=0,j=E.length;w<j;++w)b(E[w])}else n.forEachFeatureInExtent(g,b);return x.finish(),this.renderedResolution_=c,this.renderedRevision_=f,this.renderedRenderOrder_=v,this.renderedExtent_=g,this.replayGroup_=x,this.replayGroupChanged=!0,!0},e.prototype.renderFeature=function(t,e,i,n,r){if(!n)return!1;var o=!1;if(Array.isArray(n))for(var s=0,a=n.length;s<a;++s)o=Ia(r,t,n[s],Ta(e,i),this.handleStyleImageChange_,this)||o;else o=Ia(r,t,n,Ta(e,i),this.handleStyleImageChange_,this);return o},e}(Ys);Oa.handles=function(t){return t.getType()===So.VECTOR},Oa.create=function(t,e){return new Oa(e)};var Aa=Oa,La={IMAGE:"image",HYBRID:"hybrid",VECTOR:"vector"},Ma={image:[ta.POLYGON,ta.CIRCLE,ta.LINE_STRING,ta.IMAGE,ta.TEXT],hybrid:[ta.POLYGON,ta.LINE_STRING]},ka={image:[ta.DEFAULT],hybrid:[ta.IMAGE,ta.TEXT,ta.DEFAULT],vector:la},Pa=function(t){function e(e){t.call(this,e,!0),this.declutterTree_=e.getDeclutter()?ws()(9,void 0):null,this.dirty_=!1,this.renderedLayerRevision_,this.tmpTransform_=[1,0,0,1,0,0];var i=e.getRenderMode();this.zDirection=i===La.VECTOR?1:0,i!==La.VECTOR&&(this.context=er()),y(zo,A.CLEAR,this.handleFontsChanged_,this)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.disposeInternal=function(){x(zo,A.CLEAR,this.handleFontsChanged_,this),t.prototype.disposeInternal.call(this)},e.prototype.getTile=function(e,i,n,r,o){var s=t.prototype.getTile.call(this,e,i,n,r,o);return s.getState()===ue.LOADED&&(this.createReplayGroup_(s,r,o),this.context&&this.renderTileImage_(s,r,o)),s},e.prototype.getTileImage=function(t){var e=this.getLayer();return t.getImage(e)},e.prototype.prepareFrame=function(e,i){var n=this.getLayer().getRevision();return this.renderedLayerRevision_!=n&&(this.renderedTiles.length=0),this.renderedLayerRevision_=n,t.prototype.prepareFrame.call(this,e,i)},e.prototype.createReplayGroup_=function(t,e,i){var n=this,r=this.getLayer(),o=r.getRevision(),s=r.getRenderOrder()||null,a=t.getReplayState(r);if(a.dirty||a.renderedRevision!=o||a.renderedRenderOrder!=s){for(var l=r.getSource(),u=l.getTileGrid(),h=l.getTileGridForProjection(i).getResolution(t.tileCoord[0]),c=t.extent,p=function(o,p){var f=t.getTile(t.tileKeys[o]);if(f.getState()==ue.LOADED){var d=f.tileCoord,v=u.getTileCoordExtent(d),g=ui(c,v),m=qe(v,g)?null:Ge(g,r.getRenderBuffer()*h,n.tmpExtent),y=f.getProjection(),_=!1;Qi(i,y)||(_=!0,f.setProjection(i)),a.dirty=!1;var x=new wa(0,g,h,e,l.getOverlaps(),n.declutterTree_,r.getRenderBuffer()),b=Ta(h,e),E=function(t){var e,i=t.getStyleFunction()||r.getStyleFunction();if(i&&(e=i(t,h)),e){var n=this.renderFeature(t,b,e,x);this.dirty_=this.dirty_||n,a.dirty=a.dirty||n}},w=f.getFeatures();s&&s!==a.renderedRenderOrder&&w.sort(s);for(var j=0,C=w.length;j<C;++j){var S=w[j];_&&(y.getUnits()==ji.TILE_PIXELS&&(y.setWorldExtent(v),y.setExtent(f.getExtent())),S.getGeometry().transform(y,i)),m&&!fi(m,S.getGeometry().getExtent())||E.call(n,S)}x.finish(),f.setReplayGroup(r,t.tileCoord.toString(),x)}},f=0,d=t.tileKeys.length;f<d;++f)p(f);a.renderedRevision=o,a.renderedRenderOrder=s}},e.prototype.forEachFeatureAtCoordinate=function(t,e,i,n,r){var o=e.viewState.resolution,s=e.viewState.rotation;i=void 0==i?0:i;var a,l,u,h,c=this.getLayer(),p={},f=this.renderedTiles;for(u=0,h=f.length;u<h;++u){var d=f[u];if(Be(a=Ge(d.extent,i*o,a),t))for(var v=0,g=d.tileKeys.length;v<g;++v){var m=d.getTile(d.tileKeys[v]);if(m.getState()==ue.LOADED){var y=m.getReplayGroup(c,d.tileCoord.toString());l=l||y.forEachFeatureAtCoordinate(t,o,s,i,{},function(t){var e=P(t);if(!(e in p))return p[e]=!0,n.call(r,t,c)},null)}}}return l},e.prototype.getReplayTransform_=function(t,e){var i=this.getLayer().getSource().getTileGrid(),n=t.tileCoord,r=i.getResolution(n[0]),o=e.viewState,s=e.pixelRatio,a=o.resolution/s,l=i.getTileCoordExtent(n,this.tmpExtent),u=o.center,h=hi(l),c=e.size,p=Math.round(s*c[0]/2),f=Math.round(s*c[1]/2);return cn(this.tmpTransform_,p,f,r/a,r/a,o.rotation,(h[0]-u[0])/r,(u[1]-h[1])/r)},e.prototype.handleFontsChanged_=function(t){var e=this.getLayer();e.getVisible()&&void 0!==this.renderedLayerRevision_&&e.changed()},e.prototype.handleStyleImageChange_=function(t){this.renderIfReadyAndVisible()},e.prototype.postCompose=function(e,i,n){var r=this.getLayer(),o=r.getRenderMode();if(o!=La.IMAGE){var s,a,l=r.getDeclutter()?{}:null,u=r.getSource(),h=ka[o],c=i.pixelRatio,p=i.viewState.rotation,f=i.size;p&&qo(e,-p,s=Math.round(c*f[0]/2),a=Math.round(c*f[1]/2)),l&&this.declutterTree_.clear();for(var d=i.viewHints,v=!(d[je]||d[Ce]),g=this.renderedTiles,m=u.getTileGridForProjection(i.viewState.projection),y=[],_=[],x=g.length-1;x>=0;--x){var b=g[x];if(b.getState()!=ue.ABORT)for(var E=b.tileCoord,w=m.getTileCoordExtent(E,this.tmpExtent)[0]-b.extent[0],j=void 0,C=0,S=b.tileKeys.length;C<S;++C){var T=b.getTile(b.tileKeys[C]);if(T.getState()==ue.LOADED){var R=T.getReplayGroup(r,E.toString());if(R&&R.hasReplays(h)){j||(j=this.getTransform(i,w));var I=T.tileCoord[0],O=R.getClipCoords(j);e.save(),e.globalAlpha=n.opacity;for(var A=0,L=y.length;A<L;++A){var M=y[A];I<_[A]&&(e.beginPath(),e.moveTo(O[0],O[1]),e.lineTo(O[2],O[3]),e.lineTo(O[4],O[5]),e.lineTo(O[6],O[7]),e.moveTo(M[6],M[7]),e.lineTo(M[4],M[5]),e.lineTo(M[2],M[3]),e.lineTo(M[0],M[1]),e.clip())}R.replay(e,j,p,{},v,h,l),e.restore(),y.push(O),_.push(I)}}}}l&&function(t,e,i,n){for(var r=Object.keys(t).map(Number).sort(Ut),o={},s=0,a=r.length;s<a;++s)for(var l=t[r[s].toString()],u=0,h=l.length;u<h;){var c=l[u++],p=l[u++];c.replay(e,p,i,o,n)}}(l,e,p,v),p&&qo(e,p,s,a)}t.prototype.postCompose.call(this,e,i,n)},e.prototype.renderFeature=function(t,e,i,n){if(!i)return!1;var r=!1;if(Array.isArray(i))for(var o=0,s=i.length;o<s;++o)r=Ia(n,t,i[o],e,this.handleStyleImageChange_,this)||r;else r=Ia(n,t,i,e,this.handleStyleImageChange_,this);return r},e.prototype.renderTileImage_=function(t,e,i){var n=this.getLayer(),r=t.getReplayState(n),o=n.getRevision(),s=Ma[n.getRenderMode()];if(s&&r.renderedTileRevision!==o){r.renderedTileRevision=o;var a=t.wrappedTileCoord,l=a[0],u=n.getSource(),h=u.getTileGridForProjection(i),c=h.getResolution(l),p=t.getContext(n),f=u.getTilePixelSize(l,e,i);p.canvas.width=f[0],p.canvas.height=f[1];for(var d=h.getTileCoordExtent(a,this.tmpExtent),v=0,g=t.tileKeys.length;v<g;++v){var m=t.getTile(t.tileKeys[v]);if(m.getState()==ue.LOADED){var y=e/c,_=rn(this.tmpTransform_);un(_,y,-y),hn(_,-d[0],-d[3]),m.getReplayGroup(n,t.tileCoord.toString()).replay(p,_,0,{},!0,s)}}}},e}(qs);Pa.handles=function(t){return t.getType()===So.VECTOR_TILE},Pa.create=function(t,e){return new Pa(e)};var Da=Pa,Fa=function(t){function e(e){(e=h({},e)).controls||(e.controls=Rr()),e.interactions||(e.interactions=Rs()),t.call(this,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createRenderer=function(){var t=new Bs(this);return t.registerLayerRenderers([Xs,qs,Aa,Da]),t},e}(cr),Na={BOTTOM_LEFT:"bottom-left",BOTTOM_CENTER:"bottom-center",BOTTOM_RIGHT:"bottom-right",CENTER_LEFT:"center-left",CENTER_CENTER:"center-center",CENTER_RIGHT:"center-right",TOP_LEFT:"top-left",TOP_CENTER:"top-center",TOP_RIGHT:"top-right"},Ga={ELEMENT:"element",MAP:"map",OFFSET:"offset",POSITION:"position",POSITIONING:"positioning"},Wa=function(t){function e(e){t.call(this),this.options=e,this.id=e.id,this.insertFirst=void 0===e.insertFirst||e.insertFirst,this.stopEvent=void 0===e.stopEvent||e.stopEvent,this.element=document.createElement("div"),this.element.className=void 0!==e.className?e.className:"ol-overlay-container "+gr,this.element.style.position="absolute",this.autoPan=void 0!==e.autoPan&&e.autoPan,this.autoPanAnimation=e.autoPanAnimation||{},this.autoPanMargin=void 0!==e.autoPanMargin?e.autoPanMargin:20,this.rendered={bottom_:"",left_:"",right_:"",top_:"",visible:!0},this.mapPostrenderListenerKey=null,y(this,B(Ga.ELEMENT),this.handleElementChanged,this),y(this,B(Ga.MAP),this.handleMapChanged,this),y(this,B(Ga.OFFSET),this.handleOffsetChanged,this),y(this,B(Ga.POSITION),this.handlePositionChanged,this),y(this,B(Ga.POSITIONING),this.handlePositioningChanged,this),void 0!==e.element&&this.setElement(e.element),this.setOffset(void 0!==e.offset?e.offset:[0,0]),this.setPositioning(void 0!==e.positioning?e.positioning:Na.TOP_LEFT),void 0!==e.position&&this.setPosition(e.position)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getElement=function(){return this.get(Ga.ELEMENT)},e.prototype.getId=function(){return this.id},e.prototype.getMap=function(){return this.get(Ga.MAP)},e.prototype.getOffset=function(){return this.get(Ga.OFFSET)},e.prototype.getPosition=function(){return this.get(Ga.POSITION)},e.prototype.getPositioning=function(){return this.get(Ga.POSITIONING)},e.prototype.handleElementChanged=function(){rr(this.element);var t=this.getElement();t&&this.element.appendChild(t)},e.prototype.handleMapChanged=function(){this.mapPostrenderListenerKey&&(nr(this.element),b(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);var t=this.getMap();if(t){this.mapPostrenderListenerKey=y(t,re,this.render,this),this.updatePixelPosition();var e=this.stopEvent?t.getOverlayContainerStopEvent():t.getOverlayContainer();this.insertFirst?e.insertBefore(this.element,e.childNodes[0]||null):e.appendChild(this.element)}},e.prototype.render=function(){this.updatePixelPosition()},e.prototype.handleOffsetChanged=function(){this.updatePixelPosition()},e.prototype.handlePositionChanged=function(){this.updatePixelPosition(),this.get(Ga.POSITION)&&this.autoPan&&this.panIntoView()},e.prototype.handlePositioningChanged=function(){this.updatePixelPosition()},e.prototype.setElement=function(t){this.set(Ga.ELEMENT,t)},e.prototype.setMap=function(t){this.set(Ga.MAP,t)},e.prototype.setOffset=function(t){this.set(Ga.OFFSET,t)},e.prototype.setPosition=function(t){this.set(Ga.POSITION,t)},e.prototype.panIntoView=function(){var t=this.getMap();if(t&&t.getTargetElement()){var e=this.getRect(t.getTargetElement(),t.getSize()),i=this.getElement(),n=this.getRect(i,[function(t){var e=t.offsetWidth,i=getComputedStyle(t);return e+=parseInt(i.marginLeft,10)+parseInt(i.marginRight,10)}(i),function(t){var e=t.offsetHeight,i=getComputedStyle(t);return e+=parseInt(i.marginTop,10)+parseInt(i.marginBottom,10)}(i)]),r=this.autoPanMargin;if(!Ye(e,n)){var o=n[0]-e[0],s=e[2]-n[2],a=n[1]-e[1],l=e[3]-n[3],u=[0,0];if(o<0?u[0]=o-r:s<0&&(u[0]=Math.abs(s)+r),a<0?u[1]=a-r:l<0&&(u[1]=Math.abs(l)+r),0!==u[0]||0!==u[1]){var h=t.getView().getCenter(),c=t.getPixelFromCoordinate(h),p=[c[0]+u[0],c[1]+u[1]];t.getView().animate({center:t.getCoordinateFromPixel(p),duration:this.autoPanAnimation.duration,easing:this.autoPanAnimation.easing})}}}},e.prototype.getRect=function(t,e){var i=t.getBoundingClientRect(),n=i.left+window.pageXOffset,r=i.top+window.pageYOffset;return[n,r,n+e[0],r+e[1]]},e.prototype.setPositioning=function(t){this.set(Ga.POSITIONING,t)},e.prototype.setVisible=function(t){this.rendered.visible!==t&&(this.element.style.display=t?"":"none",this.rendered.visible=t)},e.prototype.updatePixelPosition=function(){var t=this.getMap(),e=this.getPosition();if(t&&t.isRendered()&&e){var i=t.getPixelFromCoordinate(e),n=t.getSize();this.updateRenderedPosition(i,n)}else this.setVisible(!1)},e.prototype.updateRenderedPosition=function(t,e){var i=this.element.style,n=this.getOffset(),r=this.getPositioning();this.setVisible(!0);var o=n[0],s=n[1];if(r==Na.BOTTOM_RIGHT||r==Na.CENTER_RIGHT||r==Na.TOP_RIGHT){""!==this.rendered.left_&&(this.rendered.left_=i.left="");var a=Math.round(e[0]-t[0]-o)+"px";this.rendered.right_!=a&&(this.rendered.right_=i.right=a)}else{""!==this.rendered.right_&&(this.rendered.right_=i.right=""),r!=Na.BOTTOM_CENTER&&r!=Na.CENTER_CENTER&&r!=Na.TOP_CENTER||(o-=this.element.offsetWidth/2);var l=Math.round(t[0]+o)+"px";this.rendered.left_!=l&&(this.rendered.left_=i.left=l)}if(r==Na.BOTTOM_LEFT||r==Na.BOTTOM_CENTER||r==Na.BOTTOM_RIGHT){""!==this.rendered.top_&&(this.rendered.top_=i.top="");var u=Math.round(e[1]-t[1]-s)+"px";this.rendered.bottom_!=u&&(this.rendered.bottom_=i.bottom=u)}else{""!==this.rendered.bottom_&&(this.rendered.bottom_=i.bottom=""),r!=Na.CENTER_LEFT&&r!=Na.CENTER_CENTER&&r!=Na.CENTER_RIGHT||(s-=this.element.offsetHeight/2);var h=Math.round(t[1]+s)+"px";this.rendered.top_!=h&&(this.rendered.top_=i.top=h)}},e.prototype.getOptions=function(){return this.options},e}(Y),za={FRACTION:"fraction",PIXELS:"pixels"},Ba=function(t){function e(e,i,n,r,o,s){t.call(this),this.hitDetectionImage_=null,this.image_=e||new Image,null!==r&&(this.image_.crossOrigin=r),this.canvas_=s?document.createElement("canvas"):null,this.color_=s,this.imageListenerKeys_=null,this.imageState_=o,this.size_=n,this.src_=i,this.tainted_}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isTainted_=function(){if(void 0===this.tainted_&&this.imageState_===Po.LOADED){this.tainted_=!1;var t=er(1,1);try{t.drawImage(this.image_,0,0),t.getImageData(0,0,1,1)}catch(t){this.tainted_=!0}}return!0===this.tainted_},e.prototype.dispatchChangeEvent_=function(){this.dispatchEvent(A.CHANGE)},e.prototype.handleImageError_=function(){this.imageState_=Po.ERROR,this.unlistenImage_(),this.dispatchChangeEvent_()},e.prototype.handleImageLoad_=function(){this.imageState_=Po.LOADED,this.size_&&(this.image_.width=this.size_[0],this.image_.height=this.size_[1]),this.size_=[this.image_.width,this.image_.height],this.unlistenImage_(),this.replaceColor_(),this.dispatchChangeEvent_()},e.prototype.getImage=function(t){return this.canvas_?this.canvas_:this.image_},e.prototype.getImageState=function(){return this.imageState_},e.prototype.getHitDetectionImage=function(t){if(!this.hitDetectionImage_)if(this.isTainted_()){var e=this.size_[0],i=this.size_[1],n=er(e,i);n.fillRect(0,0,e,i),this.hitDetectionImage_=n.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_},e.prototype.getSize=function(){return this.size_},e.prototype.getSrc=function(){return this.src_},e.prototype.load=function(){if(this.imageState_==Po.IDLE){this.imageState_=Po.LOADING,this.imageListenerKeys_=[_(this.image_,A.ERROR,this.handleImageError_,this),_(this.image_,A.LOAD,this.handleImageLoad_,this)];try{this.image_.src=this.src_}catch(t){this.handleImageError_()}}},e.prototype.replaceColor_=function(){if(this.color_&&!this.isTainted_()){this.canvas_.width=this.image_.width,this.canvas_.height=this.image_.height;var t=this.canvas_.getContext("2d");t.drawImage(this.image_,0,0);for(var e=t.getImageData(0,0,this.image_.width,this.image_.height),i=e.data,n=this.color_[0]/255,r=this.color_[1]/255,o=this.color_[2]/255,s=0,a=i.length;s<a;s+=4)i[s]*=n,i[s+1]*=r,i[s+2]*=o;t.putImageData(e,0,0)}},e.prototype.unlistenImage_=function(){this.imageListenerKeys_.forEach(b),this.imageListenerKeys_=null},e}(O);var Ya={BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",TOP_LEFT:"top-left",TOP_RIGHT:"top-right"},Ua=function(t){function e(e){var i=e||{},n=void 0!==i.opacity?i.opacity:1,r=void 0!==i.rotation?i.rotation:0,o=void 0!==i.scale?i.scale:1,s=void 0!==i.rotateWithView&&i.rotateWithView;t.call(this,{opacity:n,rotation:r,scale:o,rotateWithView:s}),this.anchor_=void 0!==i.anchor?i.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=void 0!==i.anchorOrigin?i.anchorOrigin:Ya.TOP_LEFT,this.anchorXUnits_=void 0!==i.anchorXUnits?i.anchorXUnits:za.FRACTION,this.anchorYUnits_=void 0!==i.anchorYUnits?i.anchorYUnits:za.FRACTION,this.crossOrigin_=void 0!==i.crossOrigin?i.crossOrigin:null;var a=void 0!==i.img?i.img:null,l=void 0!==i.imgSize?i.imgSize:null,u=i.src;he(!(void 0!==u&&a),4),he(!a||a&&l,5),void 0!==u&&0!==u.length||!a||(u=a.src||P(a)),he(void 0!==u&&u.length>0,6);var h,c=void 0!==i.src?Po.IDLE:Po.LOADED;this.color_=void 0!==i.color?(h=i.color,Array.isArray(h)?h:Ao(h)):null,this.iconImage_=function(t,e,i,n,r,o){var s=Ns.get(e,n,o);return s||(s=new Ba(t,e,i,n,r,o),Ns.set(e,n,o,s)),s}(a,u,l,this.crossOrigin_,c,this.color_),this.offset_=void 0!==i.offset?i.offset:[0,0],this.offsetOrigin_=void 0!==i.offsetOrigin?i.offsetOrigin:Ya.TOP_LEFT,this.origin_=null,this.size_=void 0!==i.size?i.size:null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){return new e({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,crossOrigin:this.crossOrigin_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,src:this.getSrc(),offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,size:null!==this.size_?this.size_.slice():void 0,opacity:this.getOpacity(),scale:this.getScale(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView()})},e.prototype.getAnchor=function(){if(this.normalizedAnchor_)return this.normalizedAnchor_;var t=this.anchor_,e=this.getSize();if(this.anchorXUnits_==za.FRACTION||this.anchorYUnits_==za.FRACTION){if(!e)return null;t=this.anchor_.slice(),this.anchorXUnits_==za.FRACTION&&(t[0]*=e[0]),this.anchorYUnits_==za.FRACTION&&(t[1]*=e[1])}if(this.anchorOrigin_!=Ya.TOP_LEFT){if(!e)return null;t===this.anchor_&&(t=this.anchor_.slice()),this.anchorOrigin_!=Ya.TOP_RIGHT&&this.anchorOrigin_!=Ya.BOTTOM_RIGHT||(t[0]=-t[0]+e[0]),this.anchorOrigin_!=Ya.BOTTOM_LEFT&&this.anchorOrigin_!=Ya.BOTTOM_RIGHT||(t[1]=-t[1]+e[1])}return this.normalizedAnchor_=t,this.normalizedAnchor_},e.prototype.setAnchor=function(t){this.anchor_=t,this.normalizedAnchor_=null},e.prototype.getColor=function(){return this.color_},e.prototype.getImage=function(t){return this.iconImage_.getImage(t)},e.prototype.getImageSize=function(){return this.iconImage_.getSize()},e.prototype.getHitDetectionImageSize=function(){return this.getImageSize()},e.prototype.getImageState=function(){return this.iconImage_.getImageState()},e.prototype.getHitDetectionImage=function(t){return this.iconImage_.getHitDetectionImage(t)},e.prototype.getOrigin=function(){if(this.origin_)return this.origin_;var t=this.offset_;if(this.offsetOrigin_!=Ya.TOP_LEFT){var e=this.getSize(),i=this.iconImage_.getSize();if(!e||!i)return null;t=t.slice(),this.offsetOrigin_!=Ya.TOP_RIGHT&&this.offsetOrigin_!=Ya.BOTTOM_RIGHT||(t[0]=i[0]-e[0]-t[0]),this.offsetOrigin_!=Ya.BOTTOM_LEFT&&this.offsetOrigin_!=Ya.BOTTOM_RIGHT||(t[1]=i[1]-e[1]-t[1])}return this.origin_=t,this.origin_},e.prototype.getSrc=function(){return this.iconImage_.getSrc()},e.prototype.getSize=function(){return this.size_?this.size_:this.iconImage_.getSize()},e.prototype.listenImageChange=function(t,e){return y(this.iconImage_,A.CHANGE,t,e)},e.prototype.load=function(){this.iconImage_.load()},e.prototype.unlistenImageChange=function(t,e){x(this.iconImage_,A.CHANGE,t,e)},e}(es);var Va=function(t){function e(e){var i=e||{};t.call(this,i),this.type=So.IMAGE}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Er);Va.prototype.getSource;var Xa=Va,Ha="preload",Za="useInterimTilesOnError",Ka=function(t){function e(e){var i=e||{},n=h({},i);delete n.preload,delete n.useInterimTilesOnError,t.call(this,n),this.setPreload(void 0!==i.preload?i.preload:0),this.setUseInterimTilesOnError(void 0===i.useInterimTilesOnError||i.useInterimTilesOnError),this.type=So.TILE}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getPreload=function(){return this.get(Ha)},e.prototype.setPreload=function(t){this.set(Ha,t)},e.prototype.getUseInterimTilesOnError=function(){return this.get(Za)},e.prototype.setUseInterimTilesOnError=function(t){this.set(Za,t)},e}(Er);Ka.prototype.getSource;var Ja=Ka,qa=function(t){function e(e){var i=e||{},n=i.renderMode||La.HYBRID;he(void 0==n||n==La.IMAGE||n==La.HYBRID||n==La.VECTOR,28),i.declutter&&n==La.IMAGE&&(n=La.HYBRID),i.renderMode=n;var r=h({},i);delete r.preload,delete r.useInterimTilesOnError,t.call(this,r),this.setPreload(i.preload?i.preload:0),this.setUseInterimTilesOnError(void 0===i.useInterimTilesOnError||i.useInterimTilesOnError),this.type=So.VECTOR_TILE}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getPreload=function(){return this.get(Ha)},e.prototype.getUseInterimTilesOnError=function(){return this.get(Za)},e.prototype.setPreload=function(t){this.set(Ha,t)},e.prototype.setUseInterimTilesOnError=function(t){this.set(Za,t)},e}(vs);qa.prototype.getSource;var Qa=function(t){function e(e,i,n,r,o,s){t.call(this,e,i,n,Po.IDLE),this.src_=r,this.image_=new Image,null!==o&&(this.image_.crossOrigin=o),this.imageListenerKeys_=null,this.state=Po.IDLE,this.imageLoadFunction_=s}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getImage=function(){return this.image_},e.prototype.handleImageError_=function(){this.state=Po.ERROR,this.unlistenImage_(),this.changed()},e.prototype.handleImageLoad_=function(){void 0===this.resolution&&(this.resolution=li(this.extent)/this.image_.height),this.state=Po.LOADED,this.unlistenImage_(),this.changed()},e.prototype.load=function(){this.state!=Po.IDLE&&this.state!=Po.ERROR||(this.state=Po.LOADING,this.changed(),this.imageListenerKeys_=[_(this.image_,A.ERROR,this.handleImageError_,this),_(this.image_,A.LOAD,this.handleImageLoad_,this)],this.imageLoadFunction_(this,this.src_))},e.prototype.setImage=function(t){this.image_=t},e.prototype.unlistenImage_=function(){this.imageListenerKeys_.forEach(b),this.imageListenerKeys_=null},e}(Os);function $a(t,e,i,n){var r=en(i,e,t),o=Ki(e,n,i),s=e.getMetersPerUnit();void 0!==s&&(o*=s);var a=t.getMetersPerUnit();void 0!==a&&(o/=a);var l=t.getExtent();if(!l||Be(l,r)){var u=Ki(t,o,r)/o;isFinite(u)&&u>0&&(o/=u)}return o}function tl(t,e,i,n){var r=i-t,o=n-e,s=Math.sqrt(r*r+o*o);return[Math.round(i+r/s),Math.round(n+o/s)]}function el(t,e,i,n,r,o,s,a,l,u,h){var c=er(Math.round(i*t),Math.round(i*e));if(0===l.length)return c.canvas;c.scale(i,i);var p=[1/0,1/0,-1/0,-1/0];l.forEach(function(t,e,i){Qe(p,t.extent)});var f=pi(p),d=li(p),v=er(Math.round(i*f/n),Math.round(i*d/n)),g=i/n;l.forEach(function(t,e,i){var n=t.extent[0]-p[0],r=-(t.extent[3]-p[3]),o=pi(t.extent),s=li(t.extent);v.drawImage(t.image,u,u,t.image.width-2*u,t.image.height-2*u,n*g,r*g,o*g,s*g)});var m=hi(s);return a.getTriangles().forEach(function(t,e,r){var s=t.source,a=t.target,l=s[0][0],u=s[0][1],h=s[1][0],f=s[1][1],d=s[2][0],g=s[2][1],y=(a[0][0]-m[0])/o,_=-(a[0][1]-m[1])/o,x=(a[1][0]-m[0])/o,b=-(a[1][1]-m[1])/o,E=(a[2][0]-m[0])/o,w=-(a[2][1]-m[1])/o,j=l,C=u;l=0,u=0;var S=function(t){for(var e=t.length,i=0;i<e;i++){for(var n=i,r=Math.abs(t[i][i]),o=i+1;o<e;o++){var s=Math.abs(t[o][i]);s>r&&(r=s,n=o)}if(0===r)return null;var a=t[n];t[n]=t[i],t[i]=a;for(var l=i+1;l<e;l++)for(var u=-t[l][i]/t[i][i],h=i;h<e+1;h++)i==h?t[l][h]=0:t[l][h]+=u*t[i][h]}for(var c=new Array(e),p=e-1;p>=0;p--){c[p]=t[p][e]/t[p][p];for(var f=p-1;f>=0;f--)t[f][e]-=t[f][p]*c[p]}return c}([[h-=j,f-=C,0,0,x-y],[d-=j,g-=C,0,0,E-y],[0,0,h,f,b-_],[0,0,d,g,w-_]]);if(S){c.save(),c.beginPath();var T=(y+x+E)/3,R=(_+b+w)/3,I=tl(T,R,y,_),O=tl(T,R,x,b),A=tl(T,R,E,w);c.moveTo(O[0],O[1]),c.lineTo(I[0],I[1]),c.lineTo(A[0],A[1]),c.clip(),c.transform(S[0],S[2],S[1],S[3],y,_),c.translate(p[0]-j,p[3]-C),c.scale(n/i,-n/i),c.drawImage(v.canvas,0,0),c.restore()}}),h&&(c.save(),c.strokeStyle="black",c.lineWidth=1,a.getTriangles().forEach(function(t,e,i){var n=t.target,r=(n[0][0]-m[0])/o,s=-(n[0][1]-m[1])/o,a=(n[1][0]-m[0])/o,l=-(n[1][1]-m[1])/o,u=(n[2][0]-m[0])/o,h=-(n[2][1]-m[1])/o;c.beginPath(),c.moveTo(a,l),c.lineTo(r,s),c.lineTo(u,h),c.closePath(),c.stroke()}),c.restore()),c.canvas}var il=function(t,e,i,n,r){this.sourceProj_=t,this.targetProj_=e;var o={},s=tn(this.targetProj_,this.sourceProj_);this.transformInv_=function(t){var e=t[0]+"/"+t[1];return o[e]||(o[e]=s(t)),o[e]},this.maxSourceExtent_=n,this.errorThresholdSquared_=r*r,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!n&&!!this.sourceProj_.getExtent()&&pi(n)==pi(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?pi(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?pi(this.targetProj_.getExtent()):null;var a=hi(i),l=ci(i),u=oi(i),h=ri(i),c=this.transformInv_(a),p=this.transformInv_(l),f=this.transformInv_(u),d=this.transformInv_(h);if(this.addQuad_(a,l,u,h,c,p,f,d,10),this.wrapsXInSource_){var v=1/0;this.triangles_.forEach(function(t,e,i){v=Math.min(v,t.source[0][0],t.source[1][0],t.source[2][0])}),this.triangles_.forEach(function(t){if(Math.max(t.source[0][0],t.source[1][0],t.source[2][0])-v>this.sourceWorldWidth_/2){var e=[[t.source[0][0],t.source[0][1]],[t.source[1][0],t.source[1][1]],[t.source[2][0],t.source[2][1]]];e[0][0]-v>this.sourceWorldWidth_/2&&(e[0][0]-=this.sourceWorldWidth_),e[1][0]-v>this.sourceWorldWidth_/2&&(e[1][0]-=this.sourceWorldWidth_),e[2][0]-v>this.sourceWorldWidth_/2&&(e[2][0]-=this.sourceWorldWidth_);var i=Math.min(e[0][0],e[1][0],e[2][0]);Math.max(e[0][0],e[1][0],e[2][0])-i<this.sourceWorldWidth_/2&&(t.source=e)}}.bind(this))}o={}};il.prototype.addTriangle_=function(t,e,i,n,r,o){this.triangles_.push({source:[n,r,o],target:[t,e,i]})},il.prototype.addQuad_=function(t,e,i,n,r,o,s,a,l){var u=Ne([r,o,s,a]),h=this.sourceWorldWidth_?pi(u)/this.sourceWorldWidth_:null,c=this.sourceWorldWidth_,p=this.sourceProj_.canWrapX()&&h>.5&&h<1,f=!1;if(l>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_)f=pi(Ne([t,e,i,n]))/this.targetWorldWidth_>.25||f;!p&&this.sourceProj_.isGlobal()&&h&&(f=h>.25||f)}if(f||!this.maxSourceExtent_||fi(u,this.maxSourceExtent_)){if(!(f||isFinite(r[0])&&isFinite(r[1])&&isFinite(o[0])&&isFinite(o[1])&&isFinite(s[0])&&isFinite(s[1])&&isFinite(a[0])&&isFinite(a[1]))){if(!(l>0))return;f=!0}if(l>0){if(!f){var d,v=[(t[0]+i[0])/2,(t[1]+i[1])/2],g=this.transformInv_(v);if(p)d=(_e(r[0],c)+_e(s[0],c))/2-_e(g[0],c);else d=(r[0]+s[0])/2-g[0];var m=(r[1]+s[1])/2-g[1];f=d*d+m*m>this.errorThresholdSquared_}if(f){if(Math.abs(t[0]-i[0])<=Math.abs(t[1]-i[1])){var y=[(e[0]+i[0])/2,(e[1]+i[1])/2],_=this.transformInv_(y),x=[(n[0]+t[0])/2,(n[1]+t[1])/2],b=this.transformInv_(x);this.addQuad_(t,e,y,x,r,o,_,b,l-1),this.addQuad_(x,y,i,n,b,_,s,a,l-1)}else{var E=[(t[0]+e[0])/2,(t[1]+e[1])/2],w=this.transformInv_(E),j=[(i[0]+n[0])/2,(i[1]+n[1])/2],C=this.transformInv_(j);this.addQuad_(t,E,j,n,r,w,C,a,l-1),this.addQuad_(E,e,i,j,w,o,s,C,l-1)}return}}if(p){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}this.addTriangle_(t,i,n,r,s,a),this.addTriangle_(t,e,i,r,o,s)}},il.prototype.calculateSourceExtent=function(){var t=[1/0,1/0,-1/0,-1/0];return this.triangles_.forEach(function(e,i,n){var r=e.source;$e(t,r[0]),$e(t,r[1]),$e(t,r[2])}),t},il.prototype.getTriangles=function(){return this.triangles_};var nl=il,rl=function(t){function e(e,i,n,r,o,s){var a=e.getExtent(),l=i.getExtent(),u=l?ui(n,l):n,h=$a(e,i,si(u),r),c=new nl(e,i,u,a,h*Is),p=s(c.calculateSourceExtent(),h,o),f=Po.LOADED;p&&(f=Po.IDLE);var d=p?p.getPixelRatio():1;t.call(this,n,r,d,f),this.targetProj_=i,this.maxSourceExtent_=a,this.triangulation_=c,this.targetResolution_=r,this.targetExtent_=n,this.sourceImage_=p,this.sourcePixelRatio_=d,this.canvas_=null,this.sourceListenerKey_=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.disposeInternal=function(){this.state==Po.LOADING&&this.unlistenSource_(),t.prototype.disposeInternal.call(this)},e.prototype.getImage=function(){return this.canvas_},e.prototype.getProjection=function(){return this.targetProj_},e.prototype.reproject_=function(){var t=this.sourceImage_.getState();if(t==Po.LOADED){var e=pi(this.targetExtent_)/this.targetResolution_,i=li(this.targetExtent_)/this.targetResolution_;this.canvas_=el(e,i,this.sourcePixelRatio_,this.sourceImage_.getResolution(),this.maxSourceExtent_,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0)}this.state=t,this.changed()},e.prototype.load=function(){if(this.state==Po.IDLE){this.state=Po.LOADING,this.changed();var t=this.sourceImage_.getState();t==Po.LOADED||t==Po.ERROR?this.reproject_():(this.sourceListenerKey_=y(this.sourceImage_,A.CHANGE,function(t){var e=this.sourceImage_.getState();e!=Po.LOADED&&e!=Po.ERROR||(this.unlistenSource_(),this.reproject_())},this),this.sourceImage_.load())}},e.prototype.unlistenSource_=function(){b(this.sourceListenerKey_),this.sourceListenerKey_=null},e}(Os),ol="imageloadstart",sl="imageloadend",al="imageloaderror",ll=function(t){function e(e,i){t.call(this,e),this.image=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(I);function ul(t,e){t.getImage().src=e}var hl="carmentaserver",cl="geoserver",pl="mapserver",fl="qgis";var dl=[101,101],vl=function(t){function e(e){var i=e||{};t.call(this,{attributions:i.attributions,projection:i.projection,resolutions:i.resolutions}),this.crossOrigin_=void 0!==i.crossOrigin?i.crossOrigin:null,this.url_=i.url,this.imageLoadFunction_=void 0!==i.imageLoadFunction?i.imageLoadFunction:ul,this.params_=i.params||{},this.v13_=!0,this.updateV13_(),this.serverType_=i.serverType,this.hidpi_=void 0===i.hidpi||i.hidpi,this.image_=null,this.imageSize_=[0,0],this.renderedRevision_=0,this.ratio_=void 0!==i.ratio?i.ratio:1.5}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getGetFeatureInfoUrl=function(t,e,i,n){if(void 0!==this.url_){var r=Zi(i),o=this.getProjection();o&&o!==r&&(e=$a(o,r,t,e),t=en(t,r,o));var s=ai(t,e,0,dl),a={SERVICE:"WMS",VERSION:"1.3.0",REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.params_.LAYERS};h(a,this.params_,n);var l=Math.floor((t[0]-s[0])/e),u=Math.floor((s[3]-t[1])/e);return a[this.v13_?"I":"X"]=l,a[this.v13_?"J":"Y"]=u,this.getRequestUrl_(s,dl,1,o||r,a)}},e.prototype.getParams=function(){return this.params_},e.prototype.getImageInternal=function(t,e,i,n){if(void 0===this.url_)return null;e=this.findNearestResolution(e),1==i||this.hidpi_&&void 0!==this.serverType_||(i=1);var r=e/i,o=si(t),s=ai(o,r,0,[Math.ceil(pi(t)/r),Math.ceil(li(t)/r)]),a=ai(o,r,0,[Math.ceil(this.ratio_*pi(t)/r),Math.ceil(this.ratio_*li(t)/r)]),l=this.image_;if(l&&this.renderedRevision_==this.getRevision()&&l.getResolution()==e&&l.getPixelRatio()==i&&Ye(l.getExtent(),s))return l;var u={SERVICE:"WMS",VERSION:"1.3.0",REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};h(u,this.params_),this.imageSize_[0]=Math.round(pi(a)/r),this.imageSize_[1]=Math.round(li(a)/r);var c=this.getRequestUrl_(a,this.imageSize_,i,n,u);return this.image_=new Qa(a,e,i,c,this.crossOrigin_,this.imageLoadFunction_),this.renderedRevision_=this.getRevision(),y(this.image_,A.CHANGE,this.handleImageChange,this),this.image_},e.prototype.getImageLoadFunction=function(){return this.imageLoadFunction_},e.prototype.getRequestUrl_=function(t,e,i,n,r){if(he(void 0!==this.url_,9),r[this.v13_?"CRS":"SRS"]=n.getCode(),"STYLES"in this.params_||(r.STYLES=""),1!=i)switch(this.serverType_){case cl:var o=90*i+.5|0;"FORMAT_OPTIONS"in r?r.FORMAT_OPTIONS+=";dpi:"+o:r.FORMAT_OPTIONS="dpi:"+o;break;case pl:r.MAP_RESOLUTION=90*i;break;case hl:case fl:r.DPI=90*i;break;default:he(!1,8)}r.WIDTH=e[0],r.HEIGHT=e[1];var s,a=n.getAxisOrientation();return s=this.v13_&&"ne"==a.substr(0,2)?[t[1],t[0],t[3],t[2]]:t,r.BBOX=s.join(","),function(t,e){var i=[];Object.keys(e).forEach(function(t){null!==e[t]&&void 0!==e[t]&&i.push(t+"="+encodeURIComponent(e[t]))});var n=i.join("&");return(t=-1===(t=t.replace(/[?&]$/,"")).indexOf("?")?t+"?":t+"&")+n}(this.url_,r)},e.prototype.getUrl=function(){return this.url_},e.prototype.setImageLoadFunction=function(t){this.image_=null,this.imageLoadFunction_=t,this.changed()},e.prototype.setUrl=function(t){t!=this.url_&&(this.url_=t,this.image_=null,this.changed())},e.prototype.updateParams=function(t){h(this.params_,t),this.updateV13_(),this.image_=null,this.changed()},e.prototype.updateV13_=function(){var t=this.params_.VERSION||"1.3.0";this.v13_=function(t,e){for(var i=(""+t).split("."),n=(""+e).split("."),r=0;r<Math.max(i.length,n.length);r++){var o=parseInt(i[r]||"0",10),s=parseInt(n[r]||"0",10);if(o>s)return 1;if(s>o)return-1}return 0}(t,"1.3")>=0},e}(function(t){function e(e){t.call(this,{attributions:e.attributions,projection:e.projection,state:e.state}),this.resolutions_=void 0!==e.resolutions?e.resolutions:null,this.reprojectedImage_=null,this.reprojectedRevision_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getResolutions=function(){return this.resolutions_},e.prototype.findNearestResolution=function(t){if(this.resolutions_){var e=Xt(this.resolutions_,t,0);t=this.resolutions_[e]}return t},e.prototype.getImage=function(t,e,i,n){var r=this.getProjection();if(r&&n&&!Qi(r,n)){if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&Qi(this.reprojectedImage_.getProjection(),n)&&this.reprojectedImage_.getResolution()==e&&qe(this.reprojectedImage_.getExtent(),t))return this.reprojectedImage_;this.reprojectedImage_.dispose(),this.reprojectedImage_=null}return this.reprojectedImage_=new rl(r,n,t,e,i,function(t,e,i){return this.getImageInternal(t,e,i,r)}.bind(this)),this.reprojectedRevision_=this.getRevision(),this.reprojectedImage_}return r&&(n=r),this.getImageInternal(t,e,i,n)},e.prototype.getImageInternal=function(t,e,i,n){return M()},e.prototype.handleImageChange=function(t){var e=t.target;switch(e.getState()){case Po.LOADING:this.loading=!0,this.dispatchEvent(new ll(ol,e));break;case Po.LOADED:this.loading=!1,this.dispatchEvent(new ll(sl,e));break;case Po.ERROR:this.loading=!1,this.dispatchEvent(new ll(al,e))}},e}(xs)),gl=function(t,e){this.space_=e,this.emptyBlocks_=[{x:0,y:0,width:t,height:t}],this.entries_={},this.context_=er(t,t),this.canvas_=this.context_.canvas};gl.prototype.get=function(t){return this.entries_[t]||null},gl.prototype.add=function(t,e,i,n,r){for(var o=0,s=this.emptyBlocks_.length;o<s;++o){var a=this.emptyBlocks_[o];if(a.width>=e+this.space_&&a.height>=i+this.space_){var l={offsetX:a.x+this.space_,offsetY:a.y+this.space_,image:this.canvas_};return this.entries_[t]=l,n.call(r,this.context_,a.x+this.space_,a.y+this.space_),this.split_(o,a,e+this.space_,i+this.space_),l}}return null},gl.prototype.split_=function(t,e,i,n){var r,o;e.width-i>e.height-n?(r={x:e.x+i,y:e.y,width:e.width-i,height:e.height},o={x:e.x,y:e.y+n,width:i,height:e.height-n},this.updateBlocks_(t,r,o)):(r={x:e.x+i,y:e.y,width:e.width-i,height:n},o={x:e.x,y:e.y+n,width:e.width,height:e.height-n},this.updateBlocks_(t,r,o))},gl.prototype.updateBlocks_=function(t,e,i){var n=[t,1];e.width>0&&e.height>0&&n.push(e),i.width>0&&i.height>0&&n.push(i),this.emptyBlocks_.splice.apply(this.emptyBlocks_,n)};var ml=gl,yl=function(t){var e=t||{};this.currentSize_=void 0!==e.initialSize?e.initialSize:256,this.maxSize_=void 0!==e.maxSize?e.maxSize:void 0!==J?J:2048,this.space_=void 0!==e.space?e.space:1,this.atlases_=[new ml(this.currentSize_,this.space_)],this.currentHitSize_=this.currentSize_,this.hitAtlases_=[new ml(this.currentHitSize_,this.space_)]};yl.prototype.getInfo=function(t){var e=this.getInfo_(this.atlases_,t);if(!e)return null;var i=this.getInfo_(this.hitAtlases_,t);return this.mergeInfos_(e,i)},yl.prototype.getInfo_=function(t,e){for(var i=0,n=t.length;i<n;++i){var r=t[i].get(e);if(r)return r}return null},yl.prototype.mergeInfos_=function(t,e){return{offsetX:t.offsetX,offsetY:t.offsetY,image:t.image,hitImage:e.image}},yl.prototype.add=function(t,e,i,n,r,o){if(e+this.space_>this.maxSize_||i+this.space_>this.maxSize_)return null;var s=this.add_(!1,t,e,i,n,o);if(!s)return null;var a=void 0!==r?r:S,l=this.add_(!0,t,e,i,a,o);return this.mergeInfos_(s,l)},yl.prototype.add_=function(t,e,i,n,r,o){var s,a,l,u,h=t?this.hitAtlases_:this.atlases_;for(l=0,u=h.length;l<u;++l){if(a=(s=h[l]).add(e,i,n,r,o))return a;if(!a&&l===u-1){var c=void 0;t?(c=Math.min(2*this.currentHitSize_,this.maxSize_),this.currentHitSize_=c):(c=Math.min(2*this.currentSize_,this.maxSize_),this.currentSize_=c),s=new ml(c,this.space_),h.push(s),++u}}return null};var _l=function(t){var e=t||{};this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.scale_=e.scale,this.text_=e.text,this.textAlign_=e.textAlign,this.textBaseline_=e.textBaseline,this.fill_=void 0!==e.fill?e.fill:new os({color:"#333"}),this.maxAngle_=void 0!==e.maxAngle?e.maxAngle:Math.PI/4,this.placement_=void 0!==e.placement?e.placement:ma,this.overflow_=!!e.overflow,this.stroke_=void 0!==e.stroke?e.stroke:null,this.offsetX_=void 0!==e.offsetX?e.offsetX:0,this.offsetY_=void 0!==e.offsetY?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=void 0===e.padding?null:e.padding};_l.prototype.clone=function(){return new _l({font:this.getFont(),placement:this.getPlacement(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:this.getScale(),text:this.getText(),textAlign:this.getTextAlign(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0})},_l.prototype.getOverflow=function(){return this.overflow_},_l.prototype.getFont=function(){return this.font_},_l.prototype.getMaxAngle=function(){return this.maxAngle_},_l.prototype.getPlacement=function(){return this.placement_},_l.prototype.getOffsetX=function(){return this.offsetX_},_l.prototype.getOffsetY=function(){return this.offsetY_},_l.prototype.getFill=function(){return this.fill_},_l.prototype.getRotateWithView=function(){return this.rotateWithView_},_l.prototype.getRotation=function(){return this.rotation_},_l.prototype.getScale=function(){return this.scale_},_l.prototype.getStroke=function(){return this.stroke_},_l.prototype.getText=function(){return this.text_},_l.prototype.getTextAlign=function(){return this.textAlign_},_l.prototype.getTextBaseline=function(){return this.textBaseline_},_l.prototype.getBackgroundFill=function(){return this.backgroundFill_},_l.prototype.getBackgroundStroke=function(){return this.backgroundStroke_},_l.prototype.getPadding=function(){return this.padding_},_l.prototype.setOverflow=function(t){this.overflow_=t},_l.prototype.setFont=function(t){this.font_=t},_l.prototype.setMaxAngle=function(t){this.maxAngle_=t},_l.prototype.setOffsetX=function(t){this.offsetX_=t},_l.prototype.setOffsetY=function(t){this.offsetY_=t},_l.prototype.setPlacement=function(t){this.placement_=t},_l.prototype.setFill=function(t){this.fill_=t},_l.prototype.setRotation=function(t){this.rotation_=t},_l.prototype.setScale=function(t){this.scale_=t},_l.prototype.setStroke=function(t){this.stroke_=t},_l.prototype.setText=function(t){this.text_=t},_l.prototype.setTextAlign=function(t){this.textAlign_=t},_l.prototype.setTextBaseline=function(t){this.textBaseline_=t},_l.prototype.setBackgroundFill=function(t){this.backgroundFill_=t},_l.prototype.setBackgroundStroke=function(t){this.backgroundStroke_=t},_l.prototype.setPadding=function(t){this.padding_=t};var xl=_l;function bl(t,e,i,n){return void 0!==n?(n[0]=t,n[1]=e,n[2]=i,n):[t,e,i]}var El=[0,0,0],wl=function(t){var e,i,n,r;if(this.minZoom=void 0!==t.minZoom?t.minZoom:0,this.resolutions_=t.resolutions,he((e=this.resolutions_,i=!0,n=function(t,e){return e-t}||Ut,e.every(function(t,r){if(0===r)return!0;var o=n(e[r-1],t);return!(o>0||i&&0===o)})),17),!t.origins)for(var o=0,s=this.resolutions_.length-1;o<s;++o)if(r){if(this.resolutions_[o]/this.resolutions_[o+1]!==r){r=void 0;break}}else r=this.resolutions_[o]/this.resolutions_[o+1];this.zoomFactor_=r,this.maxZoom=this.resolutions_.length-1,this.origin_=void 0!==t.origin?t.origin:null,this.origins_=null,void 0!==t.origins&&(this.origins_=t.origins,he(this.origins_.length==this.resolutions_.length,20));var a=t.extent;void 0===a||this.origin_||this.origins_||(this.origin_=hi(a)),he(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,void 0!==t.tileSizes&&(this.tileSizes_=t.tileSizes,he(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=void 0!==t.tileSize?t.tileSize:this.tileSizes_?null:fe,he(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=void 0!==a?a:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],void 0!==t.sizes?this.fullTileRanges_=t.sizes.map(function(t,e){return new Ks(Math.min(0,t[0]),Math.max(t[0]-1,-1),Math.min(0,t[1]),Math.max(t[1]-1,-1))},this):a&&this.calculateTileRanges_(a)};wl.prototype.forEachTileCoord=function(t,e,i){for(var n=this.getTileRangeForExtentAndZ(t,e),r=n.minX,o=n.maxX;r<=o;++r)for(var s=n.minY,a=n.maxY;s<=a;++s)i([e,r,s])},wl.prototype.forEachTileCoordParentTileRange=function(t,e,i,n,r){var o,s,a,l=null,u=t[0]-1;for(2===this.zoomFactor_?(s=t[1],a=t[2]):l=this.getTileCoordExtent(t,r);u>=this.minZoom;){if(o=2===this.zoomFactor_?Zs(s=Math.floor(s/2),s,a=Math.floor(a/2),a,n):this.getTileRangeForExtentAndZ(l,u,n),e.call(i,u,o))return!0;--u}return!1},wl.prototype.getExtent=function(){return this.extent_},wl.prototype.getMaxZoom=function(){return this.maxZoom},wl.prototype.getMinZoom=function(){return this.minZoom},wl.prototype.getOrigin=function(t){return this.origin_?this.origin_:this.origins_[t]},wl.prototype.getResolution=function(t){return this.resolutions_[t]},wl.prototype.getResolutions=function(){return this.resolutions_},wl.prototype.getTileCoordChildTileRange=function(t,e,i){if(t[0]<this.maxZoom){if(2===this.zoomFactor_){var n=2*t[1],r=2*t[2];return Zs(n,n+1,r,r+1,e)}var o=this.getTileCoordExtent(t,i);return this.getTileRangeForExtentAndZ(o,t[0]+1,e)}return null},wl.prototype.getTileRangeExtent=function(t,e,i){var n=this.getOrigin(t),r=this.getResolution(t),o=hr(this.getTileSize(t),this.tmpSize_),s=n[0]+e.minX*o[0]*r,a=n[0]+(e.maxX+1)*o[0]*r;return He(s,n[1]+e.minY*o[1]*r,a,n[1]+(e.maxY+1)*o[1]*r,i)},wl.prototype.getTileRangeForExtentAndZ=function(t,e,i){var n=El;this.getTileCoordForXYAndZ_(t[0],t[1],e,!1,n);var r=n[1],o=n[2];return this.getTileCoordForXYAndZ_(t[2],t[3],e,!0,n),Zs(r,n[1],o,n[2],i)},wl.prototype.getTileCoordCenter=function(t){var e=this.getOrigin(t[0]),i=this.getResolution(t[0]),n=hr(this.getTileSize(t[0]),this.tmpSize_);return[e[0]+(t[1]+.5)*n[0]*i,e[1]+(t[2]+.5)*n[1]*i]},wl.prototype.getTileCoordExtent=function(t,e){var i=this.getOrigin(t[0]),n=this.getResolution(t[0]),r=hr(this.getTileSize(t[0]),this.tmpSize_),o=i[0]+t[1]*r[0]*n,s=i[1]+t[2]*r[1]*n;return He(o,s,o+r[0]*n,s+r[1]*n,e)},wl.prototype.getTileCoordForCoordAndResolution=function(t,e,i){return this.getTileCoordForXYAndResolution_(t[0],t[1],e,!1,i)},wl.prototype.getTileCoordForXYAndResolution_=function(t,e,i,n,r){var o=this.getZForResolution(i),s=i/this.getResolution(o),a=this.getOrigin(o),l=hr(this.getTileSize(o),this.tmpSize_),u=n?.5:0,h=n?0:.5,c=Math.floor((t-a[0])/i+u),p=Math.floor((e-a[1])/i+h),f=s*c/l[0],d=s*p/l[1];return n?(f=Math.ceil(f)-1,d=Math.ceil(d)-1):(f=Math.floor(f),d=Math.floor(d)),bl(o,f,d,r)},wl.prototype.getTileCoordForXYAndZ_=function(t,e,i,n,r){var o=this.getOrigin(i),s=this.getResolution(i),a=hr(this.getTileSize(i),this.tmpSize_),l=n?.5:0,u=n?0:.5,h=Math.floor((t-o[0])/s+l),c=Math.floor((e-o[1])/s+u),p=h/a[0],f=c/a[1];return n?(p=Math.ceil(p)-1,f=Math.ceil(f)-1):(p=Math.floor(p),f=Math.floor(f)),bl(i,p,f,r)},wl.prototype.getTileCoordForCoordAndZ=function(t,e,i){return this.getTileCoordForXYAndZ_(t[0],t[1],e,!1,i)},wl.prototype.getTileCoordResolution=function(t){return this.resolutions_[t[0]]},wl.prototype.getTileSize=function(t){return this.tileSize_?this.tileSize_:this.tileSizes_[t]},wl.prototype.getFullTileRange=function(t){return this.fullTileRanges_?this.fullTileRanges_[t]:null},wl.prototype.getZForResolution=function(t,e){return de(Xt(this.resolutions_,t,e||0),this.minZoom,this.maxZoom)},wl.prototype.calculateTileRanges_=function(t){for(var e=this.resolutions_.length,i=new Array(e),n=this.minZoom;n<e;++n)i[n]=this.getTileRangeForExtentAndZ(t,n);this.fullTileRanges_=i};var jl=function(){this.dataProjection=null,this.defaultFeatureProjection=null};function Cl(t,e,i){var n,r=i?Zi(i.featureProjection):null,o=i?Zi(i.dataProjection):null;if(n=r&&o&&!Qi(r,o)?Array.isArray(t)?gi(t,tn(o,r)):(e?t.clone():t).transform(e?r:o,e?o:r):t,e&&i&&void 0!==i.decimals&&!Array.isArray(n)){var s=Math.pow(10,i.decimals);n===t&&(n=t.clone()),n.applyTransform(function(t){for(var e=0,i=t.length;e<i;++e)t[e]=Math.round(t[e]*s)/s;return t})}return n}function Sl(t){return"string"==typeof t?t:""}jl.prototype.getReadOptions=function(t,e){var i;return e&&(i={dataProjection:e.dataProjection?e.dataProjection:this.readProjection(t),featureProjection:e.featureProjection}),this.adaptOptions(i)},jl.prototype.adaptOptions=function(t){return h({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection},t)},jl.prototype.getLastExtent=function(){return null},jl.prototype.getType=function(){return M()},jl.prototype.readFeature=function(t,e){return M()},jl.prototype.readFeatures=function(t,e){return M()},jl.prototype.readGeometry=function(t,e){return M()},jl.prototype.readProjection=function(t){return M()},jl.prototype.writeFeature=function(t,e){return M()},jl.prototype.writeFeatures=function(t,e){return M()},jl.prototype.writeGeometry=function(t,e){return M()};var Tl=function(t){function e(){t.call(this)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getType=function(){return gs.TEXT},e.prototype.readFeature=function(t,e){return this.readFeatureFromText(Sl(t),this.adaptOptions(e))},e.prototype.readFeatureFromText=function(t,e){return M()},e.prototype.readFeatures=function(t,e){return this.readFeaturesFromText(Sl(t),this.adaptOptions(e))},e.prototype.readFeaturesFromText=function(t,e){return M()},e.prototype.readGeometry=function(t,e){return this.readGeometryFromText(Sl(t),this.adaptOptions(e))},e.prototype.readGeometryFromText=function(t,e){return M()},e.prototype.readProjection=function(t){return this.readProjectionFromText(Sl(t))},e.prototype.readProjectionFromText=function(t){return this.dataProjection},e.prototype.writeFeature=function(t,e){return this.writeFeatureText(t,this.adaptOptions(e))},e.prototype.writeFeatureText=function(t,e){return M()},e.prototype.writeFeatures=function(t,e){return this.writeFeaturesText(t,this.adaptOptions(e))},e.prototype.writeFeaturesText=function(t,e){return M()},e.prototype.writeGeometry=function(t,e){return this.writeGeometryText(t,this.adaptOptions(e))},e.prototype.writeGeometryText=function(t,e){return M()},e}(jl);function Rl(t){for(var e=[],i=0,n=t.length;i<n;++i)e.push(t[i].clone());return e}var Il=function(t){function e(e){t.call(this),this.geometries_=e||null,this.listenGeometriesChange_()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.unlistenGeometriesChange_=function(){if(this.geometries_)for(var t=0,e=this.geometries_.length;t<e;++t)x(this.geometries_[t],A.CHANGE,this.changed,this)},e.prototype.listenGeometriesChange_=function(){if(this.geometries_)for(var t=0,e=this.geometries_.length;t<e;++t)y(this.geometries_[t],A.CHANGE,this.changed,this)},e.prototype.clone=function(){var t=new e(null);return t.setGeometries(this.geometries_),t},e.prototype.closestPointXY=function(t,e,i,n){if(n<ze(this.getExtent(),t,e))return n;for(var r=this.geometries_,o=0,s=r.length;o<s;++o)n=r[o].closestPointXY(t,e,i,n);return n},e.prototype.containsXY=function(t,e){for(var i=this.geometries_,n=0,r=i.length;n<r;++n)if(i[n].containsXY(t,e))return!0;return!1},e.prototype.computeExtent=function(t){Ze(t);for(var e=this.geometries_,i=0,n=e.length;i<n;++i)Qe(t,e[i].getExtent());return t},e.prototype.getGeometries=function(){return Rl(this.geometries_)},e.prototype.getGeometriesArray=function(){return this.geometries_},e.prototype.getSimplifiedGeometry=function(t){if(this.simplifiedGeometryRevision!=this.getRevision()&&(c(this.simplifiedGeometryCache),this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<this.simplifiedGeometryMaxMinSquaredTolerance)return this;var i=t.toString();if(this.simplifiedGeometryCache.hasOwnProperty(i))return this.simplifiedGeometryCache[i];for(var n=[],r=this.geometries_,o=!1,s=0,a=r.length;s<a;++s){var l=r[s],u=l.getSimplifiedGeometry(t);n.push(u),u!==l&&(o=!0)}if(o){var h=new e(null);return h.setGeometriesArray(n),this.simplifiedGeometryCache[i]=h,h}return this.simplifiedGeometryMaxMinSquaredTolerance=t,this},e.prototype.getType=function(){return mi.GEOMETRY_COLLECTION},e.prototype.intersectsExtent=function(t){for(var e=this.geometries_,i=0,n=e.length;i<n;++i)if(e[i].intersectsExtent(t))return!0;return!1},e.prototype.isEmpty=function(){return 0===this.geometries_.length},e.prototype.rotate=function(t,e){for(var i=this.geometries_,n=0,r=i.length;n<r;++n)i[n].rotate(t,e);this.changed()},e.prototype.scale=function(t,e,i){var n=i;n||(n=si(this.getExtent()));for(var r=this.geometries_,o=0,s=r.length;o<s;++o)r[o].scale(t,e,n);this.changed()},e.prototype.setGeometries=function(t){this.setGeometriesArray(Rl(t))},e.prototype.setGeometriesArray=function(t){this.unlistenGeometriesChange_(),this.geometries_=t,this.listenGeometriesChange_(),this.changed()},e.prototype.applyTransform=function(t){for(var e=this.geometries_,i=0,n=e.length;i<n;++i)e[i].applyTransform(t);this.changed()},e.prototype.translate=function(t,e){for(var i=this.geometries_,n=0,r=i.length;n<r;++n)i[n].translate(t,e);this.changed()},e.prototype.disposeInternal=function(){this.unlistenGeometriesChange_(),t.prototype.disposeInternal.call(this)},e}(fn),Ol={POINT:Pn,LINESTRING:Eo,POLYGON:Kn,MULTIPOINT:jo,MULTILINESTRING:wo,MULTIPOLYGON:Co},Al="EMPTY",Ll="Z",Ml="M",kl=1,Pl=2,Dl=3,Fl=4,Nl=5,Gl=6,Wl={};for(var zl in mi)Wl[zl]=mi[zl].toUpperCase();var Bl=function(t){this.wkt=t,this.index_=-1};Bl.prototype.isAlpha_=function(t){return t>="a"&&t<="z"||t>="A"&&t<="Z"},Bl.prototype.isNumeric_=function(t,e){return t>="0"&&t<="9"||"."==t&&!(void 0!==e&&e)},Bl.prototype.isWhiteSpace_=function(t){return" "==t||"\t"==t||"\r"==t||"\n"==t},Bl.prototype.nextChar_=function(){return this.wkt.charAt(++this.index_)},Bl.prototype.nextToken=function(){var t,e=this.nextChar_(),i=this.index_,n=e;if("("==e)t=Pl;else if(","==e)t=Nl;else if(")"==e)t=Dl;else if(this.isNumeric_(e)||"-"==e)t=Fl,n=this.readNumber_();else if(this.isAlpha_(e))t=kl,n=this.readText_();else{if(this.isWhiteSpace_(e))return this.nextToken();if(""!==e)throw new Error("Unexpected character: "+e);t=Gl}return{position:i,value:n,type:t}},Bl.prototype.readNumber_=function(){var t,e=this.index_,i=!1,n=!1;do{"."==t?i=!0:"e"!=t&&"E"!=t||(n=!0),t=this.nextChar_()}while(this.isNumeric_(t,i)||!n&&("e"==t||"E"==t)||n&&("-"==t||"+"==t));return parseFloat(this.wkt.substring(e,this.index_--))},Bl.prototype.readText_=function(){var t,e=this.index_;do{t=this.nextChar_()}while(this.isAlpha_(t));return this.wkt.substring(e,this.index_--).toUpperCase()};var Yl=function(t){this.lexer_=t,this.token_,this.layout_=yi.XY};function Ul(t){var e=t.getCoordinates();return 0===e.length?"":e.join(" ")}function Vl(t){for(var e=t.getCoordinates(),i=[],n=0,r=e.length;n<r;++n)i.push(e[n].join(" "));return i.join(",")}function Xl(t){for(var e=[],i=t.getLinearRings(),n=0,r=i.length;n<r;++n)e.push("("+Vl(i[n])+")");return e.join(",")}Yl.prototype.consume_=function(){this.token_=this.lexer_.nextToken()},Yl.prototype.isTokenType=function(t){return this.token_.type==t},Yl.prototype.match=function(t){var e=this.isTokenType(t);return e&&this.consume_(),e},Yl.prototype.parse=function(){return this.consume_(),this.parseGeometry_()},Yl.prototype.parseGeometryLayout_=function(){var t=yi.XY,e=this.token_;if(this.isTokenType(kl)){var i=e.value;i===Ll?t=yi.XYZ:i===Ml?t=yi.XYM:"ZM"===i&&(t=yi.XYZM),t!==yi.XY&&this.consume_()}return t},Yl.prototype.parseGeometryCollectionText_=function(){if(this.match(Pl)){var t=[];do{t.push(this.parseGeometry_())}while(this.match(Nl));if(this.match(Dl))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())},Yl.prototype.parsePointText_=function(){if(this.match(Pl)){var t=this.parsePoint_();if(this.match(Dl))return t}else if(this.isEmptyGeometry_())return null;throw new Error(this.formatErrorMessage_())},Yl.prototype.parseLineStringText_=function(){if(this.match(Pl)){var t=this.parsePointList_();if(this.match(Dl))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())},Yl.prototype.parsePolygonText_=function(){if(this.match(Pl)){var t=this.parseLineStringTextList_();if(this.match(Dl))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())},Yl.prototype.parseMultiPointText_=function(){var t;if(this.match(Pl)){if(t=this.token_.type==Pl?this.parsePointTextList_():this.parsePointList_(),this.match(Dl))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())},Yl.prototype.parseMultiLineStringText_=function(){if(this.match(Pl)){var t=this.parseLineStringTextList_();if(this.match(Dl))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())},Yl.prototype.parseMultiPolygonText_=function(){if(this.match(Pl)){var t=this.parsePolygonTextList_();if(this.match(Dl))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())},Yl.prototype.parsePoint_=function(){for(var t=[],e=this.layout_.length,i=0;i<e;++i){var n=this.token_;if(!this.match(Fl))break;t.push(n.value)}if(t.length==e)return t;throw new Error(this.formatErrorMessage_())},Yl.prototype.parsePointList_=function(){for(var t=[this.parsePoint_()];this.match(Nl);)t.push(this.parsePoint_());return t},Yl.prototype.parsePointTextList_=function(){for(var t=[this.parsePointText_()];this.match(Nl);)t.push(this.parsePointText_());return t},Yl.prototype.parseLineStringTextList_=function(){for(var t=[this.parseLineStringText_()];this.match(Nl);)t.push(this.parseLineStringText_());return t},Yl.prototype.parsePolygonTextList_=function(){for(var t=[this.parsePolygonText_()];this.match(Nl);)t.push(this.parsePolygonText_());return t},Yl.prototype.isEmptyGeometry_=function(){var t=this.isTokenType(kl)&&this.token_.value==Al;return t&&this.consume_(),t},Yl.prototype.formatErrorMessage_=function(){return"Unexpected `"+this.token_.value+"` at position "+this.token_.position+" in `"+this.lexer_.wkt+"`"},Yl.prototype.parseGeometry_=function(){var t=this.token_;if(this.match(kl)){var e=t.value;if(this.layout_=this.parseGeometryLayout_(),"GEOMETRYCOLLECTION"==e){var i=this.parseGeometryCollectionText_();return new Il(i)}var n,r=Ol[e];if(!r)throw new Error("Invalid geometry type: "+e);switch(e){case"POINT":n=this.parsePointText_();break;case"LINESTRING":n=this.parseLineStringText_();break;case"POLYGON":n=this.parsePolygonText_();break;case"MULTIPOINT":n=this.parseMultiPointText_();break;case"MULTILINESTRING":n=this.parseMultiLineStringText_();break;case"MULTIPOLYGON":n=this.parseMultiPolygonText_();break;default:throw new Error("Invalid geometry type: "+e)}return n||(n=r===Ol.POINT?[NaN,NaN]:[]),new r(n,this.layout_)}throw new Error(this.formatErrorMessage_())};var Hl={Point:Ul,LineString:Vl,Polygon:Xl,MultiPoint:function(t){for(var e=[],i=t.getPoints(),n=0,r=i.length;n<r;++n)e.push("("+Ul(i[n])+")");return e.join(",")},MultiLineString:function(t){for(var e=[],i=t.getLineStrings(),n=0,r=i.length;n<r;++n)e.push("("+Vl(i[n])+")");return e.join(",")},MultiPolygon:function(t){for(var e=[],i=t.getPolygons(),n=0,r=i.length;n<r;++n)e.push("("+Xl(i[n])+")");return e.join(",")},GeometryCollection:function(t){for(var e=[],i=t.getGeometries(),n=0,r=i.length;n<r;++n)e.push(Zl(i[n]));return e.join(",")}};function Zl(t){var e=t.getType(),i=(0,Hl[e])(t);if(e=e.toUpperCase(),"function"==typeof t.getFlatCoordinates){var n=function(t){var e=t.getLayout(),i="";return e!==yi.XYZ&&e!==yi.XYZM||(i+=Ll),e!==yi.XYM&&e!==yi.XYZM||(i+=Ml),i}(t);n.length>0&&(e+=" "+n)}return 0===i.length?e+" "+Al:e+"("+i+")"}var Kl=function(t){function e(e){t.call(this);var i=e||{};this.splitCollection_=void 0!==i.splitCollection&&i.splitCollection}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.parse_=function(t){var e=new Bl(t);return new Yl(e).parse()},e.prototype.readFeatureFromText=function(t,e){var i=this.readGeometryFromText(t,e);if(i){var n=new go;return n.setGeometry(i),n}return null},e.prototype.readFeaturesFromText=function(t,e){for(var i=[],n=this.readGeometryFromText(t,e),r=[],o=0,s=(i=this.splitCollection_&&n.getType()==mi.GEOMETRY_COLLECTION?n.getGeometriesArray():[n]).length;o<s;++o){var a=new go;a.setGeometry(i[o]),r.push(a)}return r},e.prototype.readGeometryFromText=function(t,e){var i=this.parse_(t);return i?Cl(i,!1,e):null},e.prototype.writeFeatureText=function(t,e){var i=t.getGeometry();return i?this.writeGeometryText(i,e):""},e.prototype.writeFeaturesText=function(t,e){if(1==t.length)return this.writeFeatureText(t[0],e);for(var i=[],n=0,r=t.length;n<r;++n)i.push(t[n].getGeometry());var o=new Il(i);return this.writeGeometryText(o,e)},e.prototype.writeGeometryText=function(t,e){return Zl(Cl(t,!0,e))},e}(Tl);function Jl(t,e,i,n,r,o,s){var a=new Wa({id:t,position:[i,n],positioning:"center-center",element:e,offset:o||[0,0],stopEvent:!1,className:r}),l=s.getOverlayById(t);null!=l&&s.removeOverlay(l),s.addOverlay(a)}function ql(t,e,i){if(!u.a.isEmpty(t))for(var n=t.getLayers(),r=n.getLength(),o=0;o<r;o++){var s=n.item(o);i==s.get(e)&&t.removeLayer(s)}}function Ql(t,e,i,n,r){var o=new go(new Pn([t,e]));o.setId(i),o.setStyle(n);var s=r.getSource().getFeatureById(i);null!=s&&r.getSource().removeFeature(s),r.getSource().addFeature(o)}function $l(t,e,i,n,r,o,s,a){return new Ua({src:t||"@/assets/images/geolocation_marker.png",size:e||[22,22],rotation:i||0,rotateWithView:n||!1,opacity:r||1,offset:o||[0,0],scale:s||1,anchor:a||[.5,.5]})}function tu(t,e,i,n,r,o,s,a,l,u){return new xl({text:t,font:e||'bold 14px "Open Sans", "Arial Unicode MS", "sans-serif"',placement:i||"line",offsetX:n,offsetY:r,fill:new os({color:o||"white"}),backgroundFill:new os({color:a||"black"}),stroke:s,backgroundStroke:l,padding:u||[0,0,0,0]})}function eu(t){return new os({color:t||"red"})}function iu(t,e,i,n,r,o,s){return new as({color:t||"red",lineCap:e||"round",lineJoin:i||"round",lineDash:n,lineDashOffset:r||0,miterLimit:o||10,width:s})}var nu={name:"TusvnMap",props:["targetId","overlayContainerId"],data:function(){return{isLoading:!1,orderStatus:-1,map:null,project:"EPSG:4326",center:[120.80224989415075,31.28000259048651],zoom:10,planLineTracks:[],realLineTracks:[],pageHeight:400,carLayerId:"carLayer",currentDivPolygon:null,popupDatas:{},overlays:{}}},watch:{},methods:{initMap:function(){this.$data.map=new Fa({controls:Rr({attribution:!1,zoom:!1}).extend([]),interactions:Rs().extend([]),layers:[new Ja({})],target:this.targetId,view:new tr({projection:this.$data.project,center:this.$data.center,zoom:this.$data.zoom})}),this.$data.map.getView().on("change:resolution",this.viewLevelChange),this.$data.map.on("moveend",this.moveEnd),this.$data.map.on("rendercomplete",this.rendercomplete),function(t){if(Array.isArray(t))for(var e=0,i=t.length;e<i;++e)b(t[e]);else b(t)}(this.clickEventKey),this.addVectorLayer("vectorLayer_01")},getCoordinateFromPixel:function(t){return this.$data.map.getCoordinateFromPixel(t)},getPixelFromCoordinate:function(t){return this.$data.map.getPixelFromCoordinate(t)},addInfoWindow:function(t){this.$set(this.$data.popupDatas,t.id,t),this.$nextTick(function(){var e=document.getElementById(t.id+"-popup"),i=new Wa({element:e,autoPan:!0,autoPanAnimation:{duration:250}});this.$data.overlays[t.id]=i,this.$data.map.addOverlay(i),i.setPosition([t.lon,t.lat])})},addMyInfoWindow:function(t,e){if(this.pointData=t,this.trafficInfo.id=t.id,this.trafficInfo.eventName=t.trafficInfo.eventName,this.circleLon=t.lon,this.circleLat=t.lat,t.isEdit)this.initDetail(t,e),this.trafficInfo.isEdit=!0;else{t.trafficInfo.longitude=this.toFixedLen(t.trafficInfo.longitude),t.trafficInfo.latitude=this.toFixedLen(t.trafficInfo.latitude);var i=this.trafficInfo.alertCategory;this.trafficInfo=t.trafficInfo,this.trafficInfo.alertCategory=i,this.trafficInfo.isEdit=!1,this.initDatasourceList();var n=t.trafficInfo.affectRange;this.drawBgCircle(t.lon,t.lat,n)}this.showTrafficInfoPop=!0,this.$refs.ruleFormMap.clearValidate(),this.$nextTick(function(){var e=document.getElementById("traffic-info-release-popup"),i=new Wa({element:e,autoPan:!0,autoPanAnimation:{duration:250}});this.$data.overlays[t.id]=i,this.$data.map.addOverlay(i),i.setPosition([t.lon,t.lat]),i.setOffset([0,-29])}),t.isEdit||(this.pubMsgIconID="pub_msg_ico_"+t.id,this.drawPubMsgIcon(t.lon,t.lat,t.icon))},drawBgCircle:function(t,e,i){this.addCircle(t,e,i,this.circleRangeID,[245,147,7,.1],"#F59307",null,null,null,null,null,null,this.MessageTempLayer)},clearCircle:function(){this.removeFeature(this.circleRangeID,this.MessageTempLayer)},drawPubMsgIcon:function(t,e,i){var n="bg_"+this.pubMsgIconID;this.addImg(t,e,n,this.MessageTempLayer,"static/images/sign-bg.png",[44,87],null,null,null,[0,15]),this.addImg(t,e,this.pubMsgIconID,this.MessageTempLayer,i,[22,66],null,null,null,[0,15])},clearPubMsgIcon:function(){if(this.pubMsgIconID){var t="bg_"+this.pubMsgIconID;this.removeFeature(t,this.MessageTempLayer),this.removeFeature(this.pubMsgIconID,this.MessageTempLayer)}},closeMyInfoWindow:function(t){this.clearCircle(),this.clearPubMsgIcon();var e=this.$data.overlays["traffic-info-release"];return this.$data.map.removeOverlay(e),this.showTrafficInfoPop=!1,!1},closePopup:function(t){var e=t.target.attributes.overlayid.value,i=this.$data.overlays[e];return this.$data.map.removeOverlay(i),t.target.blur(),!1},mapClick:function(t){if("normal"==this.mapStatus)this.$emit("MapClick",this,t),this.removeClickEvent();else if("TempLayerInteraction"==this.mapStatus){var e=t.coordinate[0],i=t.coordinate[1];this.pathPoint.newVal.lon=e,this.pathPoint.newVal.lat=i,this.pathPoint.pointList=[],this.pathPoint.newVal.lon!=this.pathPoint.oldVal.lon&&this.pathPoint.newVal.lat!=this.pathPoint.oldVal.lat&&(this.addPathLine(this.pathPoint.newVal.lon,this.pathPoint.newVal.lat,this.pathPoint.oldVal.lon,this.pathPoint.oldVal.lat),this.addPathIco(this.pathPoint.newVal.lon,this.pathPoint.newVal.lat,"new"),this.removeClickEvent())}},viewLevelChange:function(t){var e=parseInt(this.$data.map.getView().getZoom());this.$data.zoom!=e&&(this.$emit("ViewLevelChange",this,e),this.$data.zoom=e)},moveEnd:function(t){this.$emit("ExtentChange",this,this.getCurrentExtent())},rendercomplete:function(){this.$emit("MapRenderComplete",this)},forbidZoom:function(t){var e=this.$data.map.getView();e.setZoom(t),e.setMaxZoom(t),e.setMinZoom(t)},rotateMap:function(t){this.$data.map.getView().animate({rotation:t});var e=this.getCurrentExtent();this.$data.currentDivPolygon=new Kn([[[e[2],e[3]],[e[2],e[1]],[e[0],e[1]],[e[0],e[3]],[e[2],e[3]]]]),this.$data.currentDivPolygon.rotate(t,[(e[0]+e[2])/2,(e[1]+e[3])/2])},isInDivPolygon:function(t,e){if(null==this.$data.currentDivPolygon){var i=this.getCurrentExtent();this.$data.currentDivPolygon=new Kn([[[i[2],i[3]],[i[2],i[1]],[i[0],i[1]],[i[0],i[3]],[i[2],i[3]]]])}return this.$data.currentDivPolygon.intersectsCoordinate([t,e])},forbidDrag:function(){this.$data.map.getControls();for(var t=this.$data.map.getInteractions(),e=0;e<t.getArray().length;e++)this.$data.map.removeInteraction(t.getArray()[e])},addOverlay:function(t,e,i,n,r,o){Jl(t,e,i,n,r,o,this.$data.map)},addImgOverlay:function(t,e,i,n,r,o,s,a){var l=document.getElementById(this.overlayContainerId),u=document.createElement("img");u.setAttribute("src",e),u.setAttribute("id",t),u.setAttribute("bdata",o),null!=i&&(u.style.transform="rotate("+i+"deg)"),null!=a&&(u.onclick=a),l.appendChild(u),Jl(t,u,n,r,null,s,this.$data.map)},setOverlayPosition:function(t,e,i){!function(t,e,i,n){var r=n.getOverlayById(t);null!=r&&r.setPosition([e,i])}(t,e,i,this.$data.map)},clearOverlays:function(){var t,e;t=this.$data.map,null!=(e=t.getOverlays())&&e.forEach(function(e){var i=e.getElement();t.removeOverlay(e),i.parentNode.removeChild(i)})},removeOverlayById:function(t){!function(t,e){var i=e.getOverlayById(t);if(null!=i){var n=i.getElement();e.removeOverlay(i),n.parentNode.removeChild(n)}}(t,this.$data.map)},addVectorLayer:function(t){var e,i,n=function(t){var e=new Ts({wrapX:!1}),i=new vs({source:e,style:new ps({fill:new os({color:"rgba(0, 0, 0, 0.2)"}),stroke:new as({color:"#ffcc33",width:2}),image:new ns({radius:3,fill:new os({color:"#ff0000"}),stroke:new as({color:"#ffcc33",width:1})})})});return i.set("id",t),i}(t);e=this.$data.map,i=n,u.a.isEmpty(e)||(ql(e,"id",i.get("id")),e.addLayer(i))},getLayerById:function(t){return function(t,e,i){if(!u.a.isEmpty(t))for(var n=t.getLayers(),r=n.getLength(),o=0;o<r;o++){var s=n.item(o);if(i==s.get(e))return s}return null}(this.$data.map,"id",t)},removeLayerById:function(t){var e=this.getLayerById(t);void 0!=e&&this.$data.map.removeLayer(e)},addImg:function(t,e,i,n,r,o,s,a,l,u,h,c){Ql(t,e,i,new ps({image:$l(r||"../../static/assets/images/geolocation_marker_heading.png",o||[22,37],s||0,a||!0,l||1,u||[0,0],h,c)}),this.getLayerById(n))},addRegularShapePoint:function(t,e,i,n,r,o,s,a,l,u,h,c,p){Ql(t,e,i,new ps({image:function(t,e,i,n,r,o,s,a,l){return new is({fill:t,points:e,radius:i||5,radius1:n,radius2:r,angle:o||0,stroke:s,rotation:a||0,rotateWithView:l||!1})}(r,o,s,a,l,u,h,c,p)}),this.getLayerById(n))},addNormalPoint:function(t,e,i,n,r,o,s,a){var l=new ns({radius:r||5,fill:new os({color:o||"red"}),stroke:new as({color:s||"green",width:a||3})});Ql(t,e,i,new ps({image:l}),this.getLayerById(n))},addText:function(t,e,i,n,r,o,s,a,l,u,h,c,p,f,d,v,g,m,y){Ql(t,e,i,new ps(d?{image:$l(v||"../../static/assets/images/geolocation_marker_heading.png",g||[22,37],0,!0,1,m||[0,0],y),text:tu(r,o,s,a,l,u,h,c,p,f||[0,0,0,0])}:{text:tu(r,o,s,a,l,u,h,c,p,f||[0,0,0,0])}),this.getLayerById(n))},addLineString:function(t,e,i,n,r,o,s,a,l,u){!function(t,e,i,n){var r=null;r="string"==typeof t?(new Kl).readFeature(t,null):new go(new Eo(t)),r.setId(e),r.setStyle(i);var o=n.getSource().getFeatureById(e);null!=o&&n.getSource().removeFeature(o),n.getSource().addFeature(r)}(t,e,new ps({stroke:iu(i,n,r,o,s,a,l)}),this.getLayerById(u))},addCircle:function(t,e,i,n,r,o,s,a,l,u,h,c,p){!function(t,e,i,n,r,o){var s=new yo(en([t,e],"EPSG:4326","EPSG:3857"),i,"XY").transform("EPSG:3857","EPSG:4326"),a=new go(s);a.setId(n),a.setStyle(r);var l=o.getSource().getFeatureById(n);null!=l&&o.getSource().removeFeature(l),o.getSource().addFeature(a)}(t,e,i,n,new ps({stroke:iu(o,s,a,l,u,h,c),fill:eu(r)}),this.getLayerById(p))},addMultiPolygon:function(t,e,i,n,r,o,s,a,l,u,h){!function(t,e,i,n){var r=new Co(t),o=new go(r);o.setId(e),o.setStyle(i);var s=n.getSource().getFeatureById(e);null!=s&&n.getSource().removeFeature(s),n.getSource().addFeature(o)}(t,e,new ps({stroke:iu(n,r,o,s,a,l,u),fill:eu(i)}),this.getLayerById(h))},addArrow:function(t,e,i,n,r,o,s,a,l,u,h,c){!function(t,e,i,n,r,o){if(null==t||t.length<2)return null;var s=new go(new Eo(t));s.setId(e),s.setStyle(i);var a=o.getSource().getFeatureById(e);null!=a&&o.getSource().removeFeature(a),o.getSource().addFeature(s);var l=new go(new Pn(t[0])),u=e+"_tail";l.setId(u);var h=new ps({image:new Ua({src:n||"@/assets/images/geolocation_marker.png",anchor:[.5,.5],rotateWithView:!0,rotation:0})});l.setStyle(h);var c=o.getSource().getFeatureById(u);null!=c&&o.getSource().removeFeature(c),o.getSource().addFeature(l);var p=new go(new Pn(t[t.length-1])),f=e+"_head";p.setId(f);var d=t[t.length-1][0]-t[t.length-2][0],v=t[t.length-1][1]-t[t.length-2][1],g=Math.atan2(v,d),m=new ps({image:new Ua({src:r||"@/assets/images/geolocation_marker_heading.png",anchor:[.5,.5],rotateWithView:!0,rotation:Math.PI/2-g})});p.setStyle(m);var y=o.getSource().getFeatureById(f);null!=y&&o.getSource().removeFeature(y),o.getSource().addFeature(p)}(t,e,new ps({stroke:iu(i,n,r,o,s,a,l)}),u||"../../static/assets/images/geolocation_marker.png",h||"../../static/assets/images/geolocation_marker_heading.png",this.getLayerById(c))},centerAt:function(t,e){this.$data.map.getView().setCenter([t,e])},zoomTo:function(t){this.$data.map.getView().setZoom(t)},getCurrentExtent:function(){return this.$data.map.getView().calculateExtent(this.$data.map.getSize())},getCurrentLevel:function(){return parseInt(this.$data.map.getView().getZoom())},removeFeature:function(t,e){var i=this.getLayerById(e).getSource(),n=i.getFeatureById(t);null!=n&&i.removeFeature(n)},removeAllFeature:function(t){var e=this.getLayerById(t).getSource();null!=e&&e.clear()},storkeLine:function(t){},addWms:function(t,e,i,n,r,o,s){!function(t,e,i,n,r,o,s,a){var l=new Xa({source:new vl({wrapX:!1,url:e,params:{LAYERS:i,STYLES:n||"",VERSION:s||"1.1.0"},serverType:"geoserver",transition:0}),opacity:r||0,visible:o||!0});l.set("id",t),a.addLayer(l)}(t,e,i,n,r,o,s,this.$data.map)},translateCallback:function(t,e){},pageResize:function(){var t=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;this.pageHeight=t-64},resize:function(t){this.$data.map.setSize(t)}},created:function(){},mounted:function(){var t=this;this.pageResize(),window.onresize=function(){},setTimeout(function(){t.initMap(),t.$emit("MapInitComplete",t)},100)},destroyed:function(){}},ru={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticStyle:{height:"100%"}},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.isLoading,expression:"isLoading"}],staticStyle:{height:"100%"},attrs:{id:t.targetId}}),t._v(" "),i("div",{staticStyle:{display:"none"},attrs:{id:t.overlayContainerId}}),t._v(" "),t._l(t.popupDatas,function(e,n,r){return[i("div",{key:r,ref:e.id+"-popup",refInFor:!0,staticClass:"ol-popup",attrs:{id:e.id+"-popup"}},[i("a",{staticClass:"ol-popup-closer",attrs:{href:"#",overlayid:e.id,id:e.id+"-popup-closer"},on:{click:function(e){return t.closePopup(e)}}}),t._v(" "),i("div",{attrs:{id:e.id+"-popup-content"}},[i("span",{domProps:{innerHTML:t._s(e.content)}})])])]})],2)},staticRenderFns:[]};var ou=i("VU/8")(nu,ru,!1,function(t){i("6WPV"),i("S7jy")},"data-v-42cdfd05",null).exports,su=i("j9Rz"),au=i("xT6B"),lu=i("hZ4t"),uu=i("8q+q"),hu=function(t){return axios.post(uu.a+"lc/realData/getCamRealData",t).then(function(t){return t.data})},cu={data:function(){return{spatCount:0,signCount:0,center:[],mapOption:{center:[121.262939,31.245149],zoom:18,mapStyle:"amap://styles/bc5a63d154ee0a5221a1ee7197607a00"},weather:{},cameraParam:{},step:5,step1:1,mapTime1:0,mapTime2:0,mapTime3:0,mapTime4:0,viewTime:0,isConMov:!1,source:"",platformWebsocke:null,perceptionWebsocket:null,spatWebsocket:null,warningCancelWebsocket:null,warningWebsocket:null,param:1,time:"",time1:"",x:0,y:0,waitingtime:this.$route.params.waitingtime,isActive:0,crossId:"",vehData:[],alertCount:0,warningData:{},warningCount:0,lastLightObj:{},processDataTime:"",removeEventObj:{},mapShow:!1,mapInitTime:"",currentExtent:[],mapParam:{},camList:[],requestVideoUrl:hu,tabIsExist:!0,isMin:!1,warningConnectCount:0,cancelConnectCount:0,platformConnectCount:0,perceptionConnectCount:0,spatConnectCount:0}},props:{realData:{type:Object,default:function(){return{}}},warningSign:{type:Object,default:function(){return{}}}},components:{TusvnMap:su.default,TusvnMap1:ou,LivePlayer:lu.a},watch:{"$store.getters.getRealData":{handler:function(t,e){this.moveMap()},deep:!0},$route:{handler:function(t,e){this.isShow=t.params.isShow},deep:!0,immediate:!0}},filters:{dateFormat:function(t){if(""!=t){var e=t%1e3;return au.a.formatTime(t)+"."+e}}},mounted:function(){var t=this;t.mapParam=window.mapParam,t.rsId=t.$route.params.crossId;var e=parseFloat(t.$route.params.lon),i=parseFloat(t.$route.params.lat),n=parseFloat(t.$route.params.extend);if(e||i){var r=t.$refs.perceptionMap.coordinateTransfer("EPSG:4326","+proj=utm +zone=51 +ellps=WGS84 +datum=WGS84 +units=m +no_defs",e,i);t.x=r[0],t.y=r[1],t.getExtend(e,i,n),t.center=[e,i]}else t.currentExtent=window.currentExtent,t.getExtentCenter();t.getCameraByRsId(),document.addEventListener("visibilitychange",function(){"hidden"==document.visibilityState?t.tabIsExist=!1:"visible"==document.visibilityState&&(t.tabIsExist=!0)})},methods:{videoLoadCompleted:function(t){for(var e=0;e<this.camList.length;e++){var i=this.camList[e];if(i.sn==t.serialNum){i.videoUrl=t.videoUrl;break}}},onMapComplete:function(){var t=this,e=0,i=void 0;if(this.camList.length>0&&this.camList[0].camParam)return i=this.camList[0].camParam,this.$refs.perceptionMap.updateCameraPosition(i.x,i.y,i.z,i.radius,i.pitch,i.yaw),this.getData(),void(this.mapShow=!0);this.mapInitTime=setInterval(function(){if(t.camList.length>0&&t.camList[0].camParam)return i=t.camList[0].camParam,t.$refs.perceptionMap.updateCameraPosition(i.x,i.y,i.z,i.radius,i.pitch,i.yaw),t.getData(),clearInterval(t.mapInitTime),void(t.mapShow=!0);10==++e&&(t.$refs.perceptionMap.updateCameraPosition(window.defaultMapParam.x,window.defaultMapParam.y,window.defaultMapParam.z,window.defaultMapParam.radius,window.defaultMapParam.pitch,window.defaultMapParam.yaw),t.getData(),t.mapShow=!0,clearInterval(t.mapInitTime))},100)},getData:function(){this.typeRoadData(),this.initPlatformWebSocket(),this.initPerceptionWebSocket(),this.initSpatWebSocket(),this.initWarningWebSocket(),this.initWarningCancelWebSocket(),this.getMap()},map1InitComplete:function(){this.$refs.map1.centerAt(window.mapOption.center),this.$refs.map1.zoomTo(10),this.$refs.map1.addWms(window.dlWmsOption.LAYERS_withoutz,window.dlWmsDefaultOption.url,window.dlWmsOption.LAYERS_withoutz,window.dlWmsOption.GD_ROAD_CENTERLINE,1,!0,null)},getMap:function(){var t=this.$refs.map1;null!=t.getLayerById("overviewLayer")?t.removeAllFeature("overviewLayer"):t.addVectorLayer("overviewLayer");var e=this.currentExtent;t.addMultiPolygon([[e]],"rectangle",[255,0,0,.4],[255,0,0,1],"round","round",[5,0],null,null,1,"overviewLayer"),t.centerAt((e[0][0]+e[2][0])/2,(e[0][1]+e[2][1])/2)},getTime:function(t,e,i){""!=t&&(this.time1=t),""!=e&&(this.processDataTime=e),this.$parent.perceptionData=i},getCameraByRsId:function(){var t,e=this;(t={rsId:this.rsId},axios.post(uu.a+"/ehb/road/sTypeRoad",t).then(function(t){return t.data})).then(function(t){var i=t.data,n=i.camLst;e.camList=n,e.camList.length>0&&e.camList.forEach(function(t){var n={serialNum:t.sn,protocal:t.protocal};t.params=n,t.rsPtName=i.rsName,e.$set(t,"videoShow",!1)})})},loadComplete:function(t){this.camList.forEach(function(e,i){t.serialNum==e.serialNum&&(e.videoUrl=params.videoUrl)})},getCurrentExtent:function(){this.currentExtent=[];var t=this.$refs.perceptionMap.getExtent(),e=this.$refs.perceptionMap.coordinateTransfer("+proj=utm +zone=51 +ellps=WGS84 +datum=WGS84 +units=m +no_defs","EPSG:4326",t.max.x,t.max.y),i=this.$refs.perceptionMap.coordinateTransfer("+proj=utm +zone=51 +ellps=WGS84 +datum=WGS84 +units=m +no_defs","EPSG:4326",t.min.x,t.min.y);e[0],e[1],i[0],i[1];this.currentExtent=[[121.431,31.113],[121.063,31.113],[121.063,31.371],[121.431,31.371]]},getCenter:function(){this.center=[];var t=this.$refs.perceptionMap.getExtent(),e=this.$refs.perceptionMap.coordinateTransfer("+proj=utm +zone=51 +ellps=WGS84 +datum=WGS84 +units=m +no_defs","EPSG:4326",t.max.x,t.max.y),i=this.$refs.perceptionMap.coordinateTransfer("+proj=utm +zone=51 +ellps=WGS84 +datum=WGS84 +units=m +no_defs","EPSG:4326",t.min.x,t.min.y),n=e[0],r=e[1];i[0],i[0];this.center=[121.247,31.242]},getExtentCenter:function(){var t=window.currentExtent;this.center=[];var e=(t[1][0]+t[3][0])/2,i=(t[1][1]+t[3][1])/2;this.center.push(e),this.center.push(i)},typeRoadData:function(){var t,e=this;(t=[{polygon:this.currentExtent}],axios.post(uu.a+"ehb/road/typeRoadData",t).then(function(t){return t.data})).then(function(t){var i=t.data[0].baseData.signs,n=t.data[0].baseData.spats;e.signCount=0,e.spatCount=0,i&&i.length>0&&i.forEach(function(t){e.signCount++}),n&&n.length>0&&n.forEach(function(t){t.spats.forEach(function(t){e.spatCount++})}),e.$parent.spatCount=e.spatCount,e.$parent.signCount=e.signCount})},moveMap:function(){var t=this,e=this.realData.direction,i=this.realData.status;this.cameraParam.x,this.cameraParam.y;if(this.source="mapMove","0"==i){if(this.isConMov=!1,clearInterval(this.mapTime1),clearInterval(this.mapTime2),clearInterval(this.mapTime3),clearInterval(this.mapTime4),"0"==e)return this.isConMov=!1,this.getPerceptionAreaInfo(),void this.typeRoadData();if("1"==e){if(this.cameraParam.y<=this.$refs.perceptionMap.minY)return;this.$refs.perceptionMap.move(0,this.step,0)}if("2"==e){if(this.cameraParam.y>=this.$refs.perceptionMap.maxY)return;this.$refs.perceptionMap.move(0,-this.step,0)}if("3"==e){if(this.cameraParam.x>=this.$refs.perceptionMap.maxX)return;this.$refs.perceptionMap.move(-this.step,0,0)}if("4"==e){if(this.cameraParam.x<=this.$refs.perceptionMap.minX)return;this.$refs.perceptionMap.move(this.step,0,0)}}else this.isConMov=!0,"1"==e&&(clearInterval(this.mapTime1),clearInterval(this.mapTime2),clearInterval(this.mapTime3),clearInterval(this.mapTime4),this.mapTime1=setInterval(function(){t.cameraParam.y<=t.$refs.perceptionMap.minY?clearInterval(t.mapTime1):t.$refs.perceptionMap.move(0,t.step1,0)},100)),"2"==e&&(clearInterval(this.mapTime1),clearInterval(this.mapTime2),clearInterval(this.mapTime3),clearInterval(this.mapTime4),this.mapTime2=setInterval(function(){t.cameraParam.y>=t.$refs.perceptionMap.maxY?clearInterval(t.mapTime2):t.$refs.perceptionMap.move(0,-t.step1,0)},100)),"3"==e&&(clearInterval(this.mapTime1),clearInterval(this.mapTime2),clearInterval(this.mapTime3),clearInterval(this.mapTime4),this.mapTime3=setInterval(function(){t.cameraParam.x>=t.$refs.perceptionMap.maxX?clearInterval(t.mapTime3):t.$refs.perceptionMap.move(-t.step,0,0)},100)),"4"==e&&(clearInterval(this.mapTime1),clearInterval(this.mapTime2),clearInterval(this.mapTime3),clearInterval(this.mapTime4),this.mapTime4=setInterval(function(){t.cameraParam.x<=t.$refs.perceptionMap.minX?clearInterval(t.mapTime4):t.$refs.perceptionMap.move(t.step,0,0)},100))},getNumPng:function(t,e){var i=void 0;return"RED"==t&&(0==e&&(i="./static/images/light/0.png"),1==e&&(i="./static/images/light/1.png"),2==e&&(i="./static/images/light/2.png"),3==e&&(i="./static/images/light/3.png"),4==e&&(i="./static/images/light/4.png"),5==e&&(i="./static/images/light/5.png"),6==e&&(i="./static/images/light/6.png"),7==e&&(i="./static/images/light/7.png"),8==e&&(i="./static/images/light/8.png"),9==e&&(i="./static/images/light/9.png")),"YELLOW"==t&&(0==e&&(i="./static/images/light/0-2.png"),1==e&&(i="./static/images/light/1-2.png"),2==e&&(i="./static/images/light/2-2.png"),3==e&&(i="./static/images/light/3-2.png"),4==e&&(i="./static/images/light/4-2.png"),5==e&&(i="./static/images/light/5-2.png"),6==e&&(i="./static/images/light/6-2.png"),7==e&&(i="./static/images/light/7-2.png"),8==e&&(i="./static/images/light/8-2.png"),9==e&&(i="./static/images/light/9-2.png")),"GREEN"==t&&(0==e&&(i="./static/images/light/0-1.png"),1==e&&(i="./static/images/light/1-1.png"),2==e&&(i="./static/images/light/2-1.png"),3==e&&(i="./static/images/light/3-1.png"),4==e&&(i="./static/images/light/4-1.png"),5==e&&(i="./static/images/light/5-1.png"),6==e&&(i="./static/images/light/6-1.png"),7==e&&(i="./static/images/light/7-1.png"),8==e&&(i="./static/images/light/8-1.png"),9==e&&(i="./static/images/light/9-1.png")),i},changeMap:function(t){if(-1==t)return this.param=-1,this.isActive=-1,void this.$refs.perceptionMap.updateCameraPosition(this.x,this.y,window.defaultRoadParam.z,window.defaultRoadParam.radius,window.defaultRoadParam.pitch,window.defaultRoadParam.yaw);if(this.camList.length>0){var e=this.camList[t].camParam;e?this.$refs.perceptionMap.updateCameraPosition(e.x,e.y,e.z,e.radius,e.pitch,e.yaw):this.$refs.perceptionMap.updateCameraPosition(window.defaultMapParam.x,window.defaultMapParam.y,window.defaultMapParam.z,window.defaultMapParam.radius,window.defaultMapParam.pitch,window.defaultMapParam.yaw)}else this.$refs.perceptionMap.updateCameraPosition(window.defaultMapParam.x,window.defaultMapParam.y,window.defaultMapParam.z,window.defaultMapParam.radius,window.defaultMapParam.pitch,window.defaultMapParam.yaw);this.isActive=t,this.param=t},screenMagnify:function(t){""!=this.camList[t].videoUrl&&(this.camList[t].videoShow=!0)},screenShrink:function(t){this.$refs["bigPlayer"+t][0].player.pause(),this.camList[t].videoShow=!1},initWarningWebSocket:function(){try{"WebSocket"in window?(this.warningWebsocket=new WebSocket(window.config.socketUrl),this.warningWebsocket.onmessage=this.onWarningMessage,this.warningWebsocket.onclose=this.onWarningClose,this.warningWebsocket.onopen=this.onWarningOpen,this.warningWebsocket.onerror=this.onWarningError):this.$message("此浏览器不支持websocket")}catch(t){this.warningReconnect()}},onWarningMessage:function(t){var e=this,i=JSON.parse(t.data),n=i.result.data,r=void 0;"CLOUD"==i.result.type&&(n.forEach(function(t){for(var i in r=(r=t.warnId).substring(0,r.lastIndexOf("_")),e.removeEventObj);if(!e.removeEventObj[r]){var n=t.warnMsg,o={longitude:t.longitude,latitude:t.latitude},s=e.hashcode(a()(o));if(e.warningData[r]){var l=e.warningData[r];l.hash!=s&&(e.$refs.perceptionMap.removeModel(l.id),e.$refs.perceptionMap.add3DInfoLabel(l.id,l.msg,l.longitude,l.latitude,20))}else{e.warningCount++;var u={id:"alert"+e.alertCount,msg:n,longitude:t.longitude,latitude:t.latitude,hash:s};e.warningData[r]=u,e.alertCount++,e.$refs.perceptionMap.add3DInfoLabel(u.id,u.msg,u.longitude,u.latitude,20)}}}),e.$parent.warningCount=e.warningCount)},onWarningClose:function(t){this.warningReconnect()},onWarningError:function(){this.warningReconnect()},onWarningOpen:function(t){var e={action:"clod_event",region:this.currentExtent},i=a()(e);this.sendWarningMsg(i)},sendWarningMsg:function(t){window.WebSocket&&this.warningWebsocket.readyState==WebSocket.OPEN&&this.warningWebsocket.send(t)},warningReconnect:function(){this._isDestroyed||this.warningConnectCount>=10||(this.initWarningWebSocket(),this.warningConnectCount++)},initWarningCancelWebSocket:function(){try{"WebSocket"in window?(this.warningCancelWebsocket=new WebSocket(window.config.websocketUrl),this.warningCancelWebsocket.onmessage=this.onWarningCancelMessage,this.warningCancelWebsocket.onclose=this.onWarningCancelClose,this.warningCancelWebsocket.onopen=this.onWarningCancelOpen,this.warningCancelWebsocket.onerror=this.onWarningCancelError):this.$message("此浏览器不支持websocket")}catch(t){this.warningCancelReconnect()}},onWarningCancelMessage:function(t){var e=this,i=JSON.parse(t.data).result,n=void 0;JSON.parse(i).forEach(function(t){if((n=e.warningData[t])&&n.id){e.$refs.perceptionMap.removeModel(n.id),delete e.warningData[t];var i={id:t,time:null};i.time=setTimeout(function(){delete e.removeEventObj[t]},2e3),e.removeEventObj[t]=i}})},onWarningCancelClose:function(t){this.warningCancelReconnect()},onWarningCancelError:function(){this.warningCancelReconnect()},onWarningCancelOpen:function(t){var e=a()({action:"event_cancel",token:"tusvn"});this.sendWarningCancelMsg(e)},sendWarningCancelMsg:function(t){window.WebSocket&&this.warningCancelWebsocket.readyState==WebSocket.OPEN&&this.warningCancelWebsocket.send(t)},warningCancelReconnect:function(){this._isDestroyed||this.cancelConnectCount>=10||(this.initWarningCancelWebSocket(),this.cancelConnectCount++)},hashcode:function(t){var e,i=0,n=void 0;if(0===t.length)return i;for(n=0,e=t.length;n<e;n++)i=(i<<5)-i+t.charCodeAt(n),i|=0;return i},initPlatformWebSocket:function(){try{"WebSocket"in window?(this.platformWebsocket=new WebSocket(window.config.websocketUrl),this.platformWebsocket.onmessage=this.onPlatformMessage,this.platformWebsocket.onclose=this.onPlatformClose,this.platformWebsocket.onopen=this.onPlatformOpen,this.platformWebsocket.onerror=this.onPlatformError):this.$message("此浏览器不支持websocket")}catch(t){this.platformReconnect()}},onPlatformMessage:function(t){this.$refs.perceptionMap.onCarMessage(t);var e=JSON.parse(t.data);this.$parent.vehData=e.result.vehDataStat},onPlatformClose:function(t){this.platformReconnect()},onPlatformError:function(){this.platformReconnect()},onPlatformOpen:function(t){var e={action:"road_real_data_reg",data:{polygon:window.currentExtent}},i=a()(e);this.sendPlatformMsg(i)},sendPlatformMsg:function(t){window.WebSocket&&this.platformWebsocket.readyState==WebSocket.OPEN&&this.platformWebsocket.send(t)},platformReconnect:function(){this._isDestroyed||this.platformConnectCount>=10||(this.initPlatformWebSocket(),this.platformConnectCount++)},initPerceptionWebSocket:function(){try{"WebSocket"in window?(this.perceptionWebsocket=new WebSocket(window.config.websocketUrl),this.perceptionWebsocket.onmessage=this.onPerceptionMessage,this.perceptionWebsocket.onclose=this.onPerceptionClose,this.perceptionWebsocket.onopen=this.onPerceptionOpen,this.perceptionWebsocket.onerror=this.onPerceptionError):this.$message("此浏览器不支持websocket")}catch(t){this.perceptionReconnect()}},onPerceptionMessage:function(t){this.tabIsExist?this.$refs.perceptionMap.addPerceptionData(t):this.$refs.perceptionMap.cachePerceptionQueue.length>0&&(this.$refs.perceptionMap.cachePerceptionQueue=new Array)},onPerceptionClose:function(t){this.perceptionReconnect()},onPerceptionError:function(){this.perceptionReconnect()},onPerceptionOpen:function(t){var e={action:"road_real_data_per",data:{polygon:this.currentExtent}},i=a()(e);this.sendPerceptionMsg(i)},sendPerceptionMsg:function(t){window.WebSocket&&this.perceptionWebsocket.readyState==WebSocket.OPEN&&this.perceptionWebsocket.send(t)},perceptionReconnect:function(){this._isDestroyed||this.perceptionConnectCount>=10||(this.initPerceptionWebSocket(),this.perceptionConnectCount++)},initSpatWebSocket:function(){try{"WebSocket"in window?(this.spatWebsocket=new WebSocket(window.config.websocketUrl),this.spatWebsocket.onmessage=this.onSpatMessage,this.spatWebsocket.onclose=this.onSpatClose,this.spatWebsocket.onopen=this.onSpatOpen,this.spatWebsocket.onerror=this.onSpatError):this.$message("此浏览器不支持websocket")}catch(t){this.spatReconnect()}},onSpatMessage:function(t){var e=this,i=JSON.parse(t.data),n=i.result.spatDataDTO;e.time=i.time;var r=[];n&&n.length>0&&(n.forEach(function(t){var e={leftTime:t.leftTime,light:t.status,direction:t.direction,spatId:t.spatId};r.push(e)}),r.forEach(function(t,i,n){var r={},o=(t.leftTime+"").split(""),s=void 0,a=void 0,l=void 0;1==t.direction&&("RED"==t.light&&(s="./static/images/light/cross-red.png",s="./static/images/light/cross-red.png",a=e.getNumPng("RED",o[0]),o[1]&&(l=e.getNumPng("RED",o[1]))),"YELLOW"==t.light&&(s="./static/images/light/cross-yellow.png",a=e.getNumPng("YELLOW",o[0]),o[1]&&(l=e.getNumPng("YELLOW",o[1]))),"GREEN"==t.light&&(s="./static/images/light/cross-green.png",a=e.getNumPng("GREEN",o[0]),o[1]&&(l=e.getNumPng("GREEN",o[1])))),2==t.direction&&("RED"==t.light&&(s="./static/images/light/left-red.png",a=e.getNumPng("RED",o[0]),o[1]&&(l=e.getNumPng("RED",o[1]))),"YELLOW"==t.light&&(s="./static/images/light/left-yellow.png",a=e.getNumPng("YELLOW",o[0]),o[1]&&(l=e.getNumPng("YELLOW",o[1]))),"GREEN"==t.light&&(s="./static/images/light/left-green.png",a=e.getNumPng("GREEN",o[0]),o[1]&&(l=e.getNumPng("GREEN",o[1])))),3==t.direction&&("RED"==t.light&&(s="./static/images/light/turn-red.png",a=e.getNumPng("RED",o[0]),o[1]&&(l=e.getNumPng("RED",o[1]))),"YELLOW"==t.light&&(s="./static/images/light/turn-yellow.png",a=e.getNumPng("YELLOW",o[0]),o[1]&&(l=e.getNumPng("YELLOW",o[1]))),"GREEN"==t.light&&(s="./static/images/light/turn-green.png",a=e.getNumPng("GREEN",o[0]),o[1]&&(l=e.getNumPng("GREEN",o[1])))),4==t.direction&&("RED"==t.light&&(s="./static/images/light/right-red.png",a=e.getNumPng("RED",o[0]),o[1]&&(l=e.getNumPng("RED",o[1]))),"YELLOW"==t.light&&(s="./static/images/light/right-yellow.png",a=e.getNumPng("YELLOW",o[0]),o[1]&&(l=e.getNumPng("YELLOW",o[1]))),"GREEN"==t.light&&(s="./static/images/light/right-green.png",a=e.getNumPng("GREEN",o[0]),o[1]&&(l=e.getNumPng("GREEN",o[1])))),r.id=t.spatId,r.img1=s,r.img2=a,r.img3=l,e.lastLightObj[t.spatId]=t,e.$refs.perceptionMap.addStaticModel_light_1(r)}))},onSpatClose:function(t){this.spatReconnect()},onSpatError:function(){this.spatReconnect()},onSpatOpen:function(t){var e={action:"road_real_data_spat",data:{polygon:this.currentExtent}},i=a()(e);this.sendSpatMsg(i)},sendSpatMsg:function(t){window.WebSocket&&this.spatWebsocket.readyState==WebSocket.OPEN&&this.spatWebsocket.send(t)},spatReconnect:function(){this._isDestroyed||this.spatConnectCount>=10||(this.initSpatWebSocket(),this.spatConnectCount++)},getExtend:function(t,e,i){var n=t+i,r=e+i,o=t-i,s=e-i;this.currentExtent.push([o,r]),this.currentExtent.push([n,r]),this.currentExtent.push([n,s]),this.currentExtent.push([o,s])}},destroyed:function(){clearInterval(this.mapTime1),clearInterval(this.mapTime2),clearInterval(this.mapTime3),clearInterval(this.mapTime4),clearTimeout(this.time),clearInterval(this.mapInitTime),this.$refs.perceptionMap&&this.$refs.perceptionMap.reset3DMap(),this.warningWebsocket&&this.warningWebsocket.close(),this.warningCancelWebsocket&&this.warningCancelWebsocket.close(),this.platformWebsocket&&this.platformWebsocket.close(),this.perceptionWebsocket&&this.perceptionWebsocket.close(),this.spatWebsocket&&this.spatWebsocket.close()}},pu={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"fusion-right-style",attrs:{id:"fusionRight"}},[n("img",{directives:[{name:"show",rawName:"v-show",value:-1==t.param,expression:"param==-1"}],staticClass:"img-style",attrs:{src:i("6Bgf")},on:{click:function(e){return t.changeMap(0)}}}),t._v(" "),n("img",{directives:[{name:"show",rawName:"v-show",value:-1!=t.param&&t.mapShow,expression:"param!=-1&&mapShow"}],staticClass:"img-style",attrs:{src:i("PlOi")},on:{click:function(e){return t.changeMap(-1)}}}),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:"true"==t.isShow,expression:"isShow=='true'"}],staticClass:"map-time"},[t._v(t._s(t._f("dateFormat")(t.time)))]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:"true"==t.isShow,expression:"isShow=='true'"}],staticClass:"map-time map-time1"},[t._v(t._s(t.time1))]),t._v(" "),n("div",{staticClass:"map-real-time"},[t._v(t._s(t._f("dateFormat")(t.processDataTime)))]),t._v(" "),n("div",{staticClass:"video-style"},[t._l(t.camList,function(e,i){return t.camList.length>0?n("div",{staticClass:"video-position"},[n("div",{staticClass:"style"},[n("div",{staticClass:"video-mask",on:{click:function(e){return t.screenMagnify(i)}}}),t._v(" "),n("live-player",{attrs:{requestVideoUrl:t.requestVideoUrl,params:e.params,type:"flvUrl",autoplay:!1},on:{videoLoadCompleted:t.videoLoadCompleted}},[n("div",{staticClass:"video-num",on:{click:function(e){return t.changeMap(i)}}},[n("span",{staticClass:"device-num"},[t._v("摄像头编号:"+t._s(e.devId))]),t._v(" "),n("span",{staticClass:"active-circle",class:{"active-style":t.isActive==i}}),t._v(" "),n("span",[t._v(t._s(e.rsPtName))])])])],1),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.videoShow,expression:"item.videoShow"}],staticClass:"big-video"},[n("div",{staticClass:"video-mask",on:{click:function(e){return t.screenShrink(i)}}}),t._v(" "),n("live-player",{ref:"bigPlayer"+i,refInFor:!0,attrs:{requestVideoUrl:e.videoUrl,params:e.params,type:"flvUrl",autoplay:!1}},[n("div",{staticClass:"video-num",on:{click:function(e){return t.changeMap(i)}}},[n("span",{staticClass:"device-num"},[t._v("摄像头编号:"+t._s(e.devId))]),t._v(" "),n("span",[t._v(t._s(e.rsPtName))])])])],1)]):t._e()}),t._v(" "),t._l(new Array(2),function(e){return 0==t.camList.length?n("div",{staticClass:"video-position style"},[t._m(0,!0)]):t._e()})],2),t._v(" "),n("div",{staticClass:"c-fusion-right map-right"},[n("div",{staticClass:"perception-road",attrs:{id:"mapRoad"}},[n("tusvn-map1",{ref:"map1",attrs:{targetId:"map1",overlayContainerId:"overlay1",isMasker:!1,isCircle:!1},on:{MapInitComplete:t.map1InitComplete}})],1)]),t._v(" "),n("div",{staticClass:"map-left"}),t._v(" "),n("div",{staticClass:"c-map",attrs:{id:"map"}},[n("tusvn-map",{ref:"perceptionMap",attrs:{"target-id":"mapFusion",background:"mapParam.background",minX:"mapParam.minX",minY:"mapParam.minY",minZ:"mapParam.minZ",maxX:"mapParam.maxX",maxY:"mapParam.maxY",maxZ:"mapParam.maxZ",waitingtime:t.waitingtime},on:{mapcomplete:t.onMapComplete,processPerceptionDataTime:t.getTime}})],1)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"c-video-16-9 "},[e("div",{staticClass:"video-tip"},[this._v("\n                    暂无数据\n                ")])])}]};var fu=i("VU/8")(cu,pu,!1,function(t){i("Y3rK")},"data-v-b60290f0",null).exports,du={data:function(){return{currentExtent:[],spatCount:0,signCount:0,time:0,perceptionData:{},vehData:{}}},components:{HeaderTop:i("JCuE").a,Left:o,Right:fu},watch:{"$route.params":function(t,e){this.$router.replace("/refresh")}},methods:{},mounted:function(){},destroyed:function(){clearInterval(this.time)}},vu={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"fusion-style"},[e("div",{staticClass:"fusion-layout"},[e("div",{staticClass:"c-fusion-left fusion-left"},[e("div",{staticClass:"c-scroll-wrap"},[e("div",{staticClass:"c-scroll-inner"},[e("left",{attrs:{currentExtent:this.currentExtent,spatCount:this.spatCount,signCount:this.signCount,perceptionData:this.perceptionData,warningCount:this.warningCount,vehData:this.vehData}})],1)])]),this._v(" "),e("right")],1)])},staticRenderFns:[]};var gu=i("VU/8")(du,vu,!1,function(t){i("X9X9")},"data-v-488fd8d2",null);e.default=gu.exports},S7jy:function(t,e){},SpdK:function(t,e,i){var n;n=function(){"use strict";function t(t,e,i){var n=t[e];t[e]=t[i],t[i]=n}function e(t,e){return t<e?-1:t>e?1:0}return function(i,n,r,o,s){!function e(i,n,r,o,s){for(;o>r;){if(o-r>600){var a=o-r+1,l=n-r+1,u=Math.log(a),h=.5*Math.exp(2*u/3),c=.5*Math.sqrt(u*h*(a-h)/a)*(l-a/2<0?-1:1),p=Math.max(r,Math.floor(n-l*h/a+c)),f=Math.min(o,Math.floor(n+(a-l)*h/a+c));e(i,n,p,f,s)}var d=i[n],v=r,g=o;for(t(i,r,n),s(i[o],d)>0&&t(i,r,o);v<g;){for(t(i,v,g),v++,g--;s(i[v],d)<0;)v++;for(;s(i[g],d)>0;)g--}0===s(i[r],d)?t(i,r,g):t(i,++g,o),g<=n&&(r=g+1),n<=g&&(o=g-1)}}(i,n,r||0,o||i.length-1,s||e)}},t.exports=n()},X9X9:function(t,e){},Y3rK:function(t,e){},eAMf:function(t,e,i){var n;n=function(){return function(t){function e(n){if(i[n])return i[n].exports;var r=i[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var i={};return e.m=t,e.c=i,e.d=function(t,i,n){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=0)}({"/TTR":function(t,e,i){var n=i("g38Z");"string"==typeof n&&(n=[[t.i,n,""]]);var r={hmr:!0,transform:void 0};i("uOJK")(n,r),n.locals&&(t.exports=n.locals)},0:function(t,e,i){t.exports=i("v7nT")},"2sCs":function(t,e,i){t.exports=i("rBbO")},"5SCX":function(t,e){function i(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}t.exports=function(t){return null!=t&&(i(t)||function(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&i(t.slice(0,0))}(t)||!!t._isBuffer)}},"5Srp":function(t,e,i){"use strict";var n=i("gvuQ"),r=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];t.exports=function(t){var e,i,o,s={};return t?(n.forEach(t.split("\n"),function(t){if(o=t.indexOf(":"),e=n.trim(t.substr(0,o)).toLowerCase(),i=n.trim(t.substr(o+1)),e){if(s[e]&&r.indexOf(e)>=0)return;s[e]="set-cookie"===e?(s[e]?s[e]:[]).concat([i]):s[e]?s[e]+", "+i:i}}),s):s}},"5p4y":function(t,e){t.exports=function(t,e){for(var i=[],n={},r=0;r<e.length;r++){var o=e[r],s=o[0],a={id:t+":"+r,css:o[1],media:o[2],sourceMap:o[3]};n[s]?n[s].parts.push(a):i.push(n[s]={id:s,parts:[a]})}return i}},"68ub":function(t,e,i){"use strict";function n(t){if("function"!=typeof t)throw new TypeError("executor must be a function.");var e;this.promise=new Promise(function(t){e=t});var i=this;t(function(t){i.reason||(i.reason=new r(t),e(i.reason))})}var r=i("DkjP");n.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},n.source=function(){var t;return{token:new n(function(e){t=e}),cancel:t}},t.exports=n},"8bZh":function(t,e,i){"use strict";var n=i("gvuQ");t.exports=n.isStandardBrowserEnv()?function(){function t(t){var e=t;return i&&(r.setAttribute("href",e),e=r.href),r.setAttribute("href",e),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:"/"===r.pathname.charAt(0)?r.pathname:"/"+r.pathname}}var e,i=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");return e=t(window.location.href),function(i){var r=n.isString(i)?t(i):i;return r.protocol===e.protocol&&r.host===e.host}}():function(){return!0}},BJD5:function(t,e,i){"use strict";function n(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var r=i("gvuQ");t.exports=function(t,e,i){if(!e)return t;var o;if(i)o=i(e);else if(r.isURLSearchParams(e))o=e.toString();else{var s=[];r.forEach(e,function(t,e){null!==t&&void 0!==t&&(r.isArray(t)&&(e+="[]"),r.isArray(t)||(t=[t]),r.forEach(t,function(t){r.isDate(t)?t=t.toISOString():r.isObject(t)&&(t=JSON.stringify(t)),s.push(n(e)+"="+n(t))}))}),o=s.join("&")}return o&&(t+=(-1===t.indexOf("?")?"?":"&")+o),t}},BkJT:function(t,e){function i(t,e){var i=t[1]||"",n=t[3];if(!n)return i;if(e&&"function"==typeof btoa){var r=function(t){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(t))))+" */"}(n);return[i].concat(n.sources.map(function(t){return"/*# sourceURL="+n.sourceRoot+t+" */"})).concat([r]).join("\n")}return[i].join("\n")}t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var n=i(e,t);return e[2]?"@media "+e[2]+"{"+n+"}":n}).join("")},e.i=function(t,i){"string"==typeof t&&(t=[[null,t,""]]);for(var n={},r=0;r<this.length;r++){var o=this[r][0];"number"==typeof o&&(n[o]=!0)}for(r=0;r<t.length;r++){var s=t[r];"number"==typeof s[0]&&n[s[0]]||(i&&!s[2]?s[2]=i:i&&(s[2]="("+s[2]+") and ("+i+")"),e.push(s))}},e}},BzCt:function(t,e,i){"use strict";var n=i("gvuQ"),r=i("T6bJ"),o=i("BJD5"),s=i("5Srp"),a=i("8bZh"),l=i("xxJ0"),u="undefined"!=typeof window&&window.btoa&&window.btoa.bind(window)||i("ehz/");t.exports=function(t){return new Promise(function(e,h){var c=t.data,p=t.headers;n.isFormData(c)&&delete p["Content-Type"];var f=new XMLHttpRequest,d="onreadystatechange",v=!1;if("undefined"==typeof window||!window.XDomainRequest||"withCredentials"in f||a(t.url)||(f=new window.XDomainRequest,d="onload",v=!0,f.onprogress=function(){},f.ontimeout=function(){}),t.auth){var g=t.auth.username||"",m=t.auth.password||"";p.Authorization="Basic "+u(g+":"+m)}if(f.open(t.method.toUpperCase(),o(t.url,t.params,t.paramsSerializer),!0),f.timeout=t.timeout,f[d]=function(){if(f&&(4===f.readyState||v)&&(0!==f.status||f.responseURL&&0===f.responseURL.indexOf("file:"))){var i="getAllResponseHeaders"in f?s(f.getAllResponseHeaders()):null,n={data:t.responseType&&"text"!==t.responseType?f.response:f.responseText,status:1223===f.status?204:f.status,statusText:1223===f.status?"No Content":f.statusText,headers:i,config:t,request:f};r(e,h,n),f=null}},f.onerror=function(){h(l("Network Error",t,null,f)),f=null},f.ontimeout=function(){h(l("timeout of "+t.timeout+"ms exceeded",t,"ECONNABORTED",f)),f=null},n.isStandardBrowserEnv()){var y=i("h1nK"),_=(t.withCredentials||a(t.url))&&t.xsrfCookieName?y.read(t.xsrfCookieName):void 0;_&&(p[t.xsrfHeaderName]=_)}if("setRequestHeader"in f&&n.forEach(p,function(t,e){void 0===c&&"content-type"===e.toLowerCase()?delete p[e]:f.setRequestHeader(e,t)}),t.withCredentials&&(f.withCredentials=!0),t.responseType)try{f.responseType=t.responseType}catch(e){if("json"!==t.responseType)throw e}"function"==typeof t.onDownloadProgress&&f.addEventListener("progress",t.onDownloadProgress),"function"==typeof t.onUploadProgress&&f.upload&&f.upload.addEventListener("progress",t.onUploadProgress),t.cancelToken&&t.cancelToken.promise.then(function(t){f&&(f.abort(),h(t),f=null)}),void 0===c&&(c=null),f.send(c)})}},C7Lr:function(t,e){t.exports=function(t,e,i,n,r,o){var s,a=t=t||{},l=typeof t.default;"object"!==l&&"function"!==l||(s=t,a=t.default);var u,h="function"==typeof a?a.options:a;if(e&&(h.render=e.render,h.staticRenderFns=e.staticRenderFns,h._compiled=!0),i&&(h.functional=!0),r&&(h._scopeId=r),o?(u=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),n&&n.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(o)},h._ssrRegister=u):n&&(u=n),u){var c=h.functional,p=c?h.render:h.beforeCreate;c?(h._injectStyles=u,h.render=function(t,e){return u.call(e),p(t,e)}):h.beforeCreate=p?[].concat(p,u):[u]}return{esModule:s,exports:a,options:h}}},DkjP:function(t,e,i){"use strict";function n(t){this.message=t}n.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},n.prototype.__CANCEL__=!0,t.exports=n},EW1H:function(t,e,i){"use strict";function n(t){t.cancelToken&&t.cancelToken.throwIfRequested()}var r=i("gvuQ"),o=i("cx5j"),s=i("eoZI"),a=i("XL/d"),l=i("LD7k"),u=i("cQJ/");t.exports=function(t){return n(t),t.baseURL&&!l(t.url)&&(t.url=u(t.baseURL,t.url)),t.headers=t.headers||{},t.data=o(t.data,t.headers,t.transformRequest),t.headers=r.merge(t.headers.common||{},t.headers[t.method]||{},t.headers||{}),r.forEach(["delete","get","head","post","put","patch","common"],function(e){delete t.headers[e]}),(t.adapter||a.adapter)(t).then(function(e){return n(t),e.data=o(e.data,e.headers,t.transformResponse),e},function(e){return s(e)||(n(t),e&&e.response&&(e.response.data=o(e.response.data,e.response.headers,t.transformResponse))),Promise.reject(e)})}},EZEp:function(t,e,i){"use strict";t.exports=function(t){return function(e){return t.apply(null,e)}}},FIqI:function(t,e,i){function n(t){for(var e=0;e<t.length;e++){var i=t[e],n=u[i.id];if(n){n.refs++;for(var r=0;r<n.parts.length;r++)n.parts[r](i.parts[r]);for(;r<i.parts.length;r++)n.parts.push(o(i.parts[r]));n.parts.length>i.parts.length&&(n.parts.length=i.parts.length)}else{var s=[];for(r=0;r<i.parts.length;r++)s.push(o(i.parts[r]));u[i.id]={id:i.id,refs:1,parts:s}}}}function r(){var t=document.createElement("style");return t.type="text/css",h.appendChild(t),t}function o(t){var e,i,n=document.querySelector("style["+g+'~="'+t.id+'"]');if(n){if(f)return d;n.parentNode.removeChild(n)}if(m){var o=p++;n=c||(c=r()),e=s.bind(null,n,o,!1),i=s.bind(null,n,o,!0)}else n=r(),e=function(t,e){var i=e.css,n=e.media,r=e.sourceMap;if(n&&t.setAttribute("media",n),v.ssrId&&t.setAttribute(g,e.id),r&&(i+="\n/*# sourceURL="+r.sources[0]+" */",i+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */"),t.styleSheet)t.styleSheet.cssText=i;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(i))}}.bind(null,n),i=function(){n.parentNode.removeChild(n)};return e(t),function(n){if(n){if(n.css===t.css&&n.media===t.media&&n.sourceMap===t.sourceMap)return;e(t=n)}else i()}}function s(t,e,i,n){var r=i?"":n.css;if(t.styleSheet)t.styleSheet.cssText=y(e,r);else{var o=document.createTextNode(r),s=t.childNodes;s[e]&&t.removeChild(s[e]),s.length?t.insertBefore(o,s[e]):t.appendChild(o)}}var a="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!a)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var l=i("5p4y"),u={},h=a&&(document.head||document.getElementsByTagName("head")[0]),c=null,p=0,f=!1,d=function(){},v=null,g="data-vue-ssr-id",m="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());t.exports=function(t,e,i,r){f=i,v=r||{};var o=l(t,e);return n(o),function(e){for(var i=[],r=0;r<o.length;r++){var s=o[r];(a=u[s.id]).refs--,i.push(a)}e?n(o=l(t,e)):o=[];for(r=0;r<i.length;r++){var a;if(0===(a=i[r]).refs){for(var h=0;h<a.parts.length;h++)a.parts[h]();delete u[a.id]}}}};var y=function(){var t=[];return function(e,i){return t[e]=i,t.filter(Boolean).join("\n")}}()},IKeO:function(t,e,i){"use strict";t.exports=function(t,e){return function(){for(var i=new Array(arguments.length),n=0;n<i.length;n++)i[n]=arguments[n];return t.apply(e,i)}}},LD7k:function(t,e,i){"use strict";t.exports=function(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)}},ME29:function(t,e,i){var n=i("ifc8");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals),i("FIqI")("2c6db638",n,!0,{})},N3gQ:function(t,e,i){(function(i){var n,r,o,s;s=function(){"use strict";function e(t,e,i){var n=new XMLHttpRequest;n.open("GET",t),n.responseType="blob",n.onload=function(){s(n.response,e,i)},n.onerror=function(){},n.send()}function n(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch(t){}return 200<=e.status&&299>=e.status}function r(t){try{t.dispatchEvent(new MouseEvent("click"))}catch(i){var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var o="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof i&&i.global===i?i:void 0,s=o.saveAs||("object"!=typeof window||window!==o?function(){}:"download"in HTMLAnchorElement.prototype?function(t,i,s){var a=o.URL||o.webkitURL,l=document.createElement("a");i=i||t.name||"download",l.download=i,l.rel="noopener","string"==typeof t?(l.href=t,l.origin===location.origin?r(l):n(l.href)?e(t,i,s):r(l,l.target="_blank")):(l.href=a.createObjectURL(t),setTimeout(function(){a.revokeObjectURL(l.href)},4e4),setTimeout(function(){r(l)},0))}:"msSaveOrOpenBlob"in navigator?function(t,i,o){if(i=i||t.name||"download","string"!=typeof t)navigator.msSaveOrOpenBlob(function(t,e){return void 0===e?e={autoBom:!1}:"object"!=typeof e&&(e={autoBom:!e}),e.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob(["\ufeff",t],{type:t.type}):t}(t,o),i);else if(n(t))e(t,i,o);else{var s=document.createElement("a");s.href=t,s.target="_blank",setTimeout(function(){r(s)})}}:function(t,i,n,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),"string"==typeof t)return e(t,i,n);var s="application/octet-stream"===t.type,a=/constructor/i.test(o.HTMLElement)||o.safari,l=/CriOS\/[\d]+/.test(navigator.userAgent);if((l||s&&a)&&"object"==typeof FileReader){var u=new FileReader;u.onloadend=function(){var t=u.result;t=l?t:t.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=t:location=t,r=null},u.readAsDataURL(t)}else{var h=o.URL||o.webkitURL,c=h.createObjectURL(t);r?r.location=c:location.href=c,r=null,setTimeout(function(){h.revokeObjectURL(c)},4e4)}});o.saveAs=s.saveAs=s,void 0!==t&&(t.exports=s)},r=[],void 0!==(o="function"==typeof(n=s)?n.apply(e,r):n)&&(t.exports=o)}).call(e,i("mFPK"))},NQr8:function(t,e,i){"use strict";function n(t){this.defaults=t,this.interceptors={request:new s,response:new s}}var r=i("XL/d"),o=i("gvuQ"),s=i("gvu/"),a=i("EW1H");n.prototype.request=function(t){"string"==typeof t&&(t=o.merge({url:arguments[0]},arguments[1])),(t=o.merge(r,this.defaults,{method:"get"},t)).method=t.method.toLowerCase();var e=[a,void 0],i=Promise.resolve(t);for(this.interceptors.request.forEach(function(t){e.unshift(t.fulfilled,t.rejected)}),this.interceptors.response.forEach(function(t){e.push(t.fulfilled,t.rejected)});e.length;)i=i.then(e.shift(),e.shift());return i},o.forEach(["delete","get","head","options"],function(t){n.prototype[t]=function(e,i){return this.request(o.merge(i||{},{method:t,url:e}))}}),o.forEach(["post","put","patch"],function(t){n.prototype[t]=function(e,i,n){return this.request(o.merge(n||{},{method:t,url:e,data:i}))}}),t.exports=n},OIH2:function(t,e,i){"use strict";t.exports=function(t,e,i,n,r){return t.config=e,i&&(t.code=i),t.request=n,t.response=r,t}},T6bJ:function(t,e,i){"use strict";var n=i("xxJ0");t.exports=function(t,e,i){var r=i.config.validateStatus;i.status&&r&&!r(i.status)?e(n("Request failed with status code "+i.status,i.config,null,i.request,i)):t(i)}},V0EG:function(t,e){function i(){throw new Error("setTimeout has not been defined")}function n(){throw new Error("clearTimeout has not been defined")}function r(t){if(u===setTimeout)return setTimeout(t,0);if((u===i||!u)&&setTimeout)return u=setTimeout,setTimeout(t,0);try{return u(t,0)}catch(e){try{return u.call(null,t,0)}catch(e){return u.call(this,t,0)}}}function o(){d&&p&&(d=!1,p.length?f=p.concat(f):v=-1,f.length&&s())}function s(){if(!d){var t=r(o);d=!0;for(var e=f.length;e;){for(p=f,f=[];++v<e;)p&&p[v].run();v=-1,e=f.length}p=null,d=!1,function(t){if(h===clearTimeout)return clearTimeout(t);if((h===n||!h)&&clearTimeout)return h=clearTimeout,clearTimeout(t);try{h(t)}catch(e){try{return h.call(null,t)}catch(e){return h.call(this,t)}}}(t)}}function a(t,e){this.fun=t,this.array=e}function l(){}var u,h,c=t.exports={};!function(){try{u="function"==typeof setTimeout?setTimeout:i}catch(t){u=i}try{h="function"==typeof clearTimeout?clearTimeout:n}catch(t){h=n}}();var p,f=[],d=!1,v=-1;c.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];f.push(new a(t,e)),1!==f.length||d||r(s)},a.prototype.run=function(){this.fun.apply(null,this.array)},c.title="browser",c.browser=!0,c.env={},c.argv=[],c.version="",c.versions={},c.on=l,c.addListener=l,c.once=l,c.off=l,c.removeListener=l,c.removeAllListeners=l,c.emit=l,c.prependListener=l,c.prependOnceListener=l,c.listeners=function(t){return[]},c.binding=function(t){throw new Error("process.binding is not supported")},c.cwd=function(){return"/"},c.chdir=function(t){throw new Error("process.chdir is not supported")},c.umask=function(){return 0}},"XL/d":function(t,e,i){"use strict";(function(e){function n(t,e){!r.isUndefined(t)&&r.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}var r=i("gvuQ"),o=i("vyL3"),s={"Content-Type":"application/x-www-form-urlencoded"},a={adapter:function(){var t;return"undefined"!=typeof XMLHttpRequest?t=i("BzCt"):void 0!==e&&(t=i("BzCt")),t}(),transformRequest:[function(t,e){return o(e,"Content-Type"),r.isFormData(t)||r.isArrayBuffer(t)||r.isBuffer(t)||r.isStream(t)||r.isFile(t)||r.isBlob(t)?t:r.isArrayBufferView(t)?t.buffer:r.isURLSearchParams(t)?(n(e,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):r.isObject(t)?(n(e,"application/json;charset=utf-8"),JSON.stringify(t)):t}],transformResponse:[function(t){if("string"==typeof t)try{t=JSON.parse(t)}catch(t){}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};r.forEach(["delete","get","head"],function(t){a.headers[t]={}}),r.forEach(["post","put","patch"],function(t){a.headers[t]=r.merge(s)}),t.exports=a}).call(e,i("V0EG"))},"ZMF+":function(t,e,i){"use strict";var n={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"player-wrapper"},[i("div",{staticClass:"video-wrapper",style:t.videoWrapperStyle},[i("div",{staticClass:"video-inner",class:{live:t.live,"hide-waiting":t.hideWaiting},staticStyle:{position:"absolute",top:"0",bottom:"0",left:"0",right:"0"}}),t._v(" "),i("span",{directives:[{name:"show",rawName:"v-show",value:t.videoTitle,expression:"videoTitle"}],staticClass:"video-title",attrs:{title:t.videoTitle}},[t._v(t._s(t.videoTitle))])])])},staticRenderFns:[]};e.a=n},"cQJ/":function(t,e,i){"use strict";t.exports=function(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}},cx5j:function(t,e,i){"use strict";var n=i("gvuQ");t.exports=function(t,e,i){return n.forEach(i,function(i){t=i(t,e)}),t}},"ehz/":function(t,e,i){"use strict";function n(){this.message="String contains an invalid character"}var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";n.prototype=new Error,n.prototype.code=5,n.prototype.name="InvalidCharacterError",t.exports=function(t){for(var e,i,o=String(t),s="",a=0,l=r;o.charAt(0|a)||(l="=",a%1);s+=l.charAt(63&e>>8-a%1*8)){if((i=o.charCodeAt(a+=.75))>255)throw new n;e=e<<8|i}return s}},eoZI:function(t,e,i){"use strict";t.exports=function(t){return!(!t||!t.__CANCEL__)}},g38Z:function(t,e,i){(t.exports=i("BkJT")(void 0)).push([t.i,'.video-js .vjs-big-play-button .vjs-icon-placeholder:before,.video-js .vjs-modal-dialog,.vjs-button>.vjs-icon-placeholder:before,.vjs-modal-dialog .vjs-modal-dialog-content{position:absolute;top:0;left:0;width:100%;height:100%}.video-js .vjs-big-play-button .vjs-icon-placeholder:before,.vjs-button>.vjs-icon-placeholder:before{text-align:center}@font-face{font-family:VideoJS;src:url(data:application/font-woff;charset=utf-8;base64,d09GRgABAAAAABDkAAsAAAAAG6gAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAADsAAABUIIslek9TLzIAAAFEAAAAPgAAAFZRiV3hY21hcAAAAYQAAADaAAADPv749/pnbHlmAAACYAAAC3AAABHQZg6OcWhlYWQAAA3QAAAAKwAAADYZw251aGhlYQAADfwAAAAdAAAAJA+RCLFobXR4AAAOHAAAABMAAACM744AAGxvY2EAAA4wAAAASAAAAEhF6kqubWF4cAAADngAAAAfAAAAIAE0AIFuYW1lAAAOmAAAASUAAAIK1cf1oHBvc3QAAA/AAAABJAAAAdPExYuNeJxjYGRgYOBiMGCwY2BycfMJYeDLSSzJY5BiYGGAAJA8MpsxJzM9kYEDxgPKsYBpDiBmg4gCACY7BUgAeJxjYGS7wTiBgZWBgaWQ5RkDA8MvCM0cwxDOeI6BgYmBlZkBKwhIc01hcPjI+FGJHcRdyA4RZgQRADK3CxEAAHic7dFZbsMgAEXRS0ycyZnnOeG7y+qC8pU1dHusIOXxuoxaOlwZYWQB0Aea4quIEN4E9LzKbKjzDeM6H/mua6Lmc/p8yhg0lvdYx15ZG8uOLQOGjMp3EzqmzJizYMmKNRu27Nhz4MiJMxeu3Ljz4Ekqm7T8P52G8PP3lnTOVk++Z6iN6QZzNN1F7ptuN7eGOjDUoaGODHVsuvU8MdTO9Hd5aqgzQ50b6sJQl4a6MtS1oW4MdWuoO0PdG+rBUI+GejLUs6FeDPVqqDdDvRvqw1CfhpqM9At0iFLaAAB4nJ1YDXBTVRZ+5/22TUlJ8we0pHlJm7RJf5O8F2j6EymlSPkpxaL8U2xpa3DKj0CBhc2IW4eWKSokIoLsuMqssM64f+jA4HSdWXXXscBq67IOs3FXZ1ZYWVyRFdo899yXtIBQZ90k7717zz3v3HPPOfd854YCCj9cL9dL0RQFOqCbGJnrHb5EayiKIWN8iA/hWBblo6hUWm8TtCDwE80WMJus/irwyxOdxeB0MDb14VNJHnXYoLLSl6FfCUYO9nYPTA8Epg9090LprfbBbZ2hY0UlJUXHQp3/vtWkS6EBv8+rPMq5u9692f/dNxJNiqwC1xPE9TCUgCsSdQWgE3XQD25lkG4CN2xmTcOXWBOyser6RN6KnGbKSbmQ3+d0OI1m2W8QzLLkI2sykrWAgJJEtA8vGGW/2Q+CmT3n8zS9wZwu2DCvtuZKZN3xkrLh36yCZuUomQSqGpY8t/25VfHVhw8z4ebGBtfLb0ya9PCaDc+8dGTvk2dsh6z7WzvowlXKUSWo9MJ15a3KrEP2loOr2Ojhw6iW6hf2BDdEccQvZGpaAy7YovSwq8kr7HGllxpd71rkS6G0Sf11sl9OvMK1+jwPPODxjUwkOim9CU3ix1wNjXDfmJSEn618Bs6lpWwUpU+8PCqLMY650zjq8VhCIP17NEKTx3eaLL+s5Pi6yJWaWjTHLR1jYzPSV9VF/6Ojdb/1kO3Mk3uhHC0x6gc1BjlKQ+nQFxTYdaJkZ7ySVxLBbhR1dsboNXp1tCYKW2LRaEzpYcIx2BKNxaL0ZaUnSqfFoiNhHKR/GkX6PWUSAaJelQaqZL1EpoHNsajSEyPSoJ9IjhIxTdjHLmwZvhRDOiFTY/YeQnvrVZmiTQtGncECXtFTBZLOVwwMRgoXHAkXzMzPn1nAJJ8jYSbMDaqN2waGLzNhih/bZynUBMpIWSg7VYi7DRx2m8ALkIdRCJwI6ArJx2EI8kaDWeTQKeAFk9fjl/1AvwktjQ1P7NjyMGQyfd4vjipX6M/i52D7Cq80kqlcxEcGXRr/FEcgs0u5uGgB4VWuMFfpdn2Re6Hi3PqzmxWKsz6+ae2Pn9hXXw/fqM859UiGC0oKYYILJBqJrsn1Z1E5qOs9rQCiUQRREjm8yJcbHF5cUJufX1vAHlefw0XgUoboS3ETfQlTxBC4SOtuE8VPRJTBSCQSjZCpk7Gqzu+masaZ2y7Zjehho4F3g82BNDkAHpORG4+OCS+f6JTPmtRn/PH1kch6d04sp7AQb25aQ/pqUyXeQ8vrebG8OYQdXOQ+585u0sdW9rqalzRURiJ+9F4MweRFrKUjl1GUYhH1A27WOHw5cTFSFPMo9EeUIGnQTZHIaJ7AHLaOKsOODaNF9jkBjYG2QEsQ2xjMUAx2bBEbeTBWMHwskBjngq56S/yfgkBnWBa4K9sqKtq2t1UI8S9He5XuBRbawAdatrQEAi30Aks2+LM8WeCbalVZkWNylvJ+dqJnzVb+OHlSoKW8nPCP7Rd+CcZ2DdWAGqJ2CBFOphgywFFCFBNtfAbGtNPBCwxvygHeYMZMY9ZboBqwq/pVrsbgN5tkv152ODlbMfiqwGMBgxa4Exz3QhovRIUp6acqZmQzRq0ypDXS2TPLT02YIkQETnOE445oOGxOmXAqUJNNG7XgupMjPq2ua9asrj5yY/yuKteO1Kx0YNJTufrirLe1mZnat7OL6rnUdCWenpW6I8mAnbsY8KWs1PuSovCW9A/Z25PQ24a7cNOqgmTkLmBMgh4THgc4b9k2IVv1/g/F5nGljwPLfOgHAzJzh45V/4+WenTzmMtR5Z7us2Tys909UHqrPY7KbckoxRvRHhmVc3cJGE97uml0R1S0jdULVl7EvZtDFVBF35N9cEdjpgmAiOlFZ+Dtoh93+D3zzHr8RRNZQhnCNMNbcegOvpEwZoL+06cJQ07h+th3fZ/7PVbVC6ngTAV/KoLFuO6+2KFcU651gEb5ugPSIb1D+Xp8V4+k3sEIGnw5mYe4If4k1lFYr6SCzmM2EQ8iWtmwjnBI9kTwe1TlfAmXh7H02by9fW2gsjKwtv0aaURKil4OdV7rDL1MXIFNrhdxohcZXYTnq47WisrKitaObbf5+yvkLi5J6lCNZZ+B6GC38VNBZBDidSS/+mSvh6s+srgC8pyKMvDtt+de3c9fU76ZPfuM8ud4Kv0fyP/LqfepMT/3oZxSqpZaTa1DaQYLY8TFsHYbWYsPoRhRWfL5eSSQbhUGgGC3YLbVMk6PitTFNGpAsNrC6D1VNBKgBHMejaiuRWEWGgsSDBTJjqWIl8kJLlsaLJ2tXDr6xGfT85bM2Q06a46x2HTgvdnV8z5YDy/27J4zt6x2VtkzjoYpkq36kaBr4eQSg7tyiVweWubXZugtadl58ydapfbORfKsDTuZ0OBgx4cfdjCf5tbWNITnL120fdOi1RV1C3uKGzNdwYLcMvZ3BxoPyTOCD1XvXTp7U10gWCVmTV9b3r2z0SkGWovb2hp9I89O8a2smlyaO8muMU+dRmtzp60IzAoFpjLr1n388boLyf0dRvxhsHZ0qbWqDkwqvvpkj4l0fY6EIXRi5sQSrAvsVYwXRy4qJ2EVtD1AN7a0HWth9ymvL1xc3WTUKK/TAHA/bXDVtVWfOMfuGxGZv4Ln/jVr9jc3j1yMv0tndmyt9Vq88Y9gH1wtLX3KWjot5++jWHgAoZZkQ14wGQ20Fli71UmKJAy4xKMSTGbVdybW7FDDAut9XpD5AzWrYO7zQ8qffqF8+Ynd/clrHcdyxGy3a/3+mfNnzC/cBsveTjnTvXf1o6vzOlZw7WtqtdmPK/Errz/6NNtD72zmNOZfbmYdTGHfoofqI79Oc+R2n1lrnL6pOm0Up7kwxhTW12Amm7WYkXR2qYrF2AmgmbAsxZjwy1xpg/m1Je2vrp8v/nz2xpmlBg4E9hrMU341wVpTOh/OfmGvAnra8q6uctr60ZQHV3Q+WMQJykMj8ZsWn2QBOmmHMB+m5pDIpTFonYigiaKAhGEiAHF7EliVnQkjoLVIMPtJpBKHYd3A8GYH9jJzrWwmHx5Qjp7vDAX0suGRym1vtm/9W1/HyR8vczfMs6Sk8DSv855/5dlX9oQq52hT8syyp2rx5Id17IAyAM3wIjQPMOHzytEB64q6D5zT91yNbnx3V/nqnd017S9Y0605k3izoXLpsxde2n38yoOV9s1LcjwzNjbdX6asnBVaBj/6/DwKwPkpcqbDG7BnsXoSqWnUAmottYF6jMSdVyYZh3zVXCjwTiwwHH6sGuRiEHQGzuRX6whZkp123oy1BWE2mEfJ/tvIRtM4ZM5bDXiMsPMaAKOTyc5uL57rqyyc5y5JE5pm1i2S2iUX0CcaQ6lC6Zog7JqSqZmYlosl2K6pwNA84zRnQW6SaALYZQGW5lhCtU/W34N6o+bKfZ8cf3/Cl/+iTX3wBzpOY4mRkeNf3rptycGSshQWgGbYt5jFc2e0+DglIrwl6DVWQ7BuwaJ3Xk1J4VL5urnLl/Wf+gHU/hZoZdKNym6lG+I34FaNeZKcSpJIo2IeCVvpdsDGfKvzJnAwmeD37Ow65ZWwSowpgwX5T69s/rB55dP5BcpgDKFV8p7q2sn/1uc93bVzT/w6UrCqDTWvfCq/oCD/qZXNoUj8BL5Kp6GU017frfNXkAtiiyf/SOCEeLqnd8R/Ql9GlCRfctS6k5chvIBuQ1zCCjoCHL2DHNHIXxMJ3kQeO8lbsUXONeSfA5EjcG6/E+KdhN4bP04vBhdi883+BFBzQbxFbvZzQeY9LNBZc0FNfn5NwfDn6rCTnTw6R8o+gfpf5hCom33cRuiTlss3KHmZjD+BPN+5gXuA2ziS/Q73mLxUkpbKN/eqwz5uK0X9F3h2d1V4nGNgZGBgAOJd776+iue3+crAzc4AAje5Bfcg0xz9YHEOBiYQBQA8FQlFAHicY2BkYGBnAAGOPgaG//85+hkYGVCBMgBGGwNYAAAAeJxjYGBgYB8EmKOPgQEAQ04BfgAAAAAAAA4AaAB+AMwA4AECAUIBbAGYAcICGAJYArQC4AMwA7AD3gQwBJYE3AUkBWYFigYgBmYGtAbqB1gIEghYCG4IhAi2COh4nGNgZGBgUGYoZWBnAAEmIOYCQgaG/2A+AwAYCQG2AHicXZBNaoNAGIZfE5PQCKFQ2lUps2oXBfOzzAESyDKBQJdGR2NQR3QSSE/QE/QEPUUPUHqsvsrXjTMw83zPvPMNCuAWP3DQDAejdm1GjzwS7pMmwi75XngAD4/CQ/oX4TFe4Qt7uMMbOzjuDc0EmXCP/C7cJ38Iu+RP4QEe8CU8pP8WHmOPX2EPz87TPo202ey2OjlnQSXV/6arOjWFmvszMWtd6CqwOlKHq6ovycLaWMWVydXKFFZnmVFlZU46tP7R2nI5ncbi/dDkfDtFBA2DDXbYkhKc+V0Bqs5Zt9JM1HQGBRTm/EezTmZNKtpcAMs9Yu6AK9caF76zoLWIWcfMGOSkVduvSWechqZsz040Ib2PY3urxBJTzriT95lipz+TN1fmAAAAeJxtkMl2wjAMRfOAhABlKm2h80C3+ajgCKKDY6cegP59TYBzukAL+z1Zsq8ctaJTTKPrsUQLbXQQI0EXKXroY4AbDDHCGBNMcYsZ7nCPB8yxwCOe8IwXvOIN7/jAJ76wxHfUqWX+OzgumWAjJMV17i0Ndlr6irLKO+qftdT7i6y4uFSUvCknay+lFYZIZaQcmfH/xIFdYn98bqhra1aKTM/6lWMnyaYirx1rFUQZFBkb2zJUtoXeJCeg0WnLtHeSFc3OtrnozNwqi0TkSpBMDB1nSde5oJXW23hTS2/T0LilglXX7dmFVxLnq5U0vYATHFk3zX3BOisoQHNDFDeZnqKDy9hRNawN7Vh727hFzcJ5c8TILrKZfH7tIPxAFP0BpLeJPA==) format("woff");font-weight:400;font-style:normal}.video-js .vjs-big-play-button .vjs-icon-placeholder:before,.video-js .vjs-play-control .vjs-icon-placeholder,.vjs-icon-play{font-family:VideoJS;font-weight:400;font-style:normal}.video-js .vjs-big-play-button .vjs-icon-placeholder:before,.video-js .vjs-play-control .vjs-icon-placeholder:before,.vjs-icon-play:before{content:"\\F101"}.vjs-icon-play-circle{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-play-circle:before{content:"\\F102"}.video-js .vjs-play-control.vjs-playing .vjs-icon-placeholder,.vjs-icon-pause{font-family:VideoJS;font-weight:400;font-style:normal}.video-js .vjs-play-control.vjs-playing .vjs-icon-placeholder:before,.vjs-icon-pause:before{content:"\\F103"}.video-js .vjs-mute-control.vjs-vol-0 .vjs-icon-placeholder,.vjs-icon-volume-mute{font-family:VideoJS;font-weight:400;font-style:normal}.video-js .vjs-mute-control.vjs-vol-0 .vjs-icon-placeholder:before,.vjs-icon-volume-mute:before{content:"\\F104"}.video-js .vjs-mute-control.vjs-vol-1 .vjs-icon-placeholder,.vjs-icon-volume-low{font-family:VideoJS;font-weight:400;font-style:normal}.video-js .vjs-mute-control.vjs-vol-1 .vjs-icon-placeholder:before,.vjs-icon-volume-low:before{content:"\\F105"}.video-js .vjs-mute-control.vjs-vol-2 .vjs-icon-placeholder,.vjs-icon-volume-mid{font-family:VideoJS;font-weight:400;font-style:normal}.video-js .vjs-mute-control.vjs-vol-2 .vjs-icon-placeholder:before,.vjs-icon-volume-mid:before{content:"\\F106"}.video-js .vjs-mute-control .vjs-icon-placeholder,.vjs-icon-volume-high{font-family:VideoJS;font-weight:400;font-style:normal}.video-js .vjs-mute-control .vjs-icon-placeholder:before,.vjs-icon-volume-high:before{content:"\\F107"}.video-js .vjs-fullscreen-control .vjs-icon-placeholder,.vjs-icon-fullscreen-enter{font-family:VideoJS;font-weight:400;font-style:normal}.video-js .vjs-fullscreen-control .vjs-icon-placeholder:before,.vjs-icon-fullscreen-enter:before{content:"\\F108"}.video-js.vjs-fullscreen .vjs-fullscreen-control .vjs-icon-placeholder,.vjs-icon-fullscreen-exit{font-family:VideoJS;font-weight:400;font-style:normal}.video-js.vjs-fullscreen .vjs-fullscreen-control .vjs-icon-placeholder:before,.vjs-icon-fullscreen-exit:before{content:"\\F109"}.vjs-icon-square{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-square:before{content:"\\F10A"}.vjs-icon-spinner{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-spinner:before{content:"\\F10B"}.video-js.video-js:lang(en-AU) .vjs-subs-caps-button .vjs-icon-placeholder,.video-js.video-js:lang(en-GB) .vjs-subs-caps-button .vjs-icon-placeholder,.video-js.video-js:lang(en-IE) .vjs-subs-caps-button .vjs-icon-placeholder,.video-js.video-js:lang(en-NZ) .vjs-subs-caps-button .vjs-icon-placeholder,.video-js .vjs-subs-caps-button .vjs-icon-placeholder,.video-js .vjs-subtitles-button .vjs-icon-placeholder,.vjs-icon-subtitles{font-family:VideoJS;font-weight:400;font-style:normal}.video-js.video-js:lang(en-AU) .vjs-subs-caps-button .vjs-icon-placeholder:before,.video-js.video-js:lang(en-GB) .vjs-subs-caps-button .vjs-icon-placeholder:before,.video-js.video-js:lang(en-IE) .vjs-subs-caps-button .vjs-icon-placeholder:before,.video-js.video-js:lang(en-NZ) .vjs-subs-caps-button .vjs-icon-placeholder:before,.video-js .vjs-subs-caps-button .vjs-icon-placeholder:before,.video-js .vjs-subtitles-button .vjs-icon-placeholder:before,.vjs-icon-subtitles:before{content:"\\F10C"}.video-js .vjs-captions-button .vjs-icon-placeholder,.video-js:lang(en) .vjs-subs-caps-button .vjs-icon-placeholder,.video-js:lang(fr-CA) .vjs-subs-caps-button .vjs-icon-placeholder,.vjs-icon-captions{font-family:VideoJS;font-weight:400;font-style:normal}.video-js .vjs-captions-button .vjs-icon-placeholder:before,.video-js:lang(en) .vjs-subs-caps-button .vjs-icon-placeholder:before,.video-js:lang(fr-CA) .vjs-subs-caps-button .vjs-icon-placeholder:before,.vjs-icon-captions:before{content:"\\F10D"}.video-js .vjs-chapters-button .vjs-icon-placeholder,.vjs-icon-chapters{font-family:VideoJS;font-weight:400;font-style:normal}.video-js .vjs-chapters-button .vjs-icon-placeholder:before,.vjs-icon-chapters:before{content:"\\F10E"}.vjs-icon-share{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-share:before{content:"\\F10F"}.vjs-icon-cog{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-cog:before{content:"\\F110"}.video-js .vjs-play-progress,.video-js .vjs-volume-level,.vjs-icon-circle,.vjs-seek-to-live-control .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.video-js .vjs-play-progress:before,.video-js .vjs-volume-level:before,.vjs-icon-circle:before,.vjs-seek-to-live-control .vjs-icon-placeholder:before{content:"\\F111"}.vjs-icon-circle-outline{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-circle-outline:before{content:"\\F112"}.vjs-icon-circle-inner-circle{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-circle-inner-circle:before{content:"\\F113"}.vjs-icon-hd{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-hd:before{content:"\\F114"}.video-js .vjs-control.vjs-close-button .vjs-icon-placeholder,.vjs-icon-cancel{font-family:VideoJS;font-weight:400;font-style:normal}.video-js .vjs-control.vjs-close-button .vjs-icon-placeholder:before,.vjs-icon-cancel:before{content:"\\F115"}.video-js .vjs-play-control.vjs-ended .vjs-icon-placeholder,.vjs-icon-replay{font-family:VideoJS;font-weight:400;font-style:normal}.video-js .vjs-play-control.vjs-ended .vjs-icon-placeholder:before,.vjs-icon-replay:before{content:"\\F116"}.vjs-icon-facebook{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-facebook:before{content:"\\F117"}.vjs-icon-gplus{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-gplus:before{content:"\\F118"}.vjs-icon-linkedin{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-linkedin:before{content:"\\F119"}.vjs-icon-twitter{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-twitter:before{content:"\\F11A"}.vjs-icon-tumblr{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-tumblr:before{content:"\\F11B"}.vjs-icon-pinterest{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-pinterest:before{content:"\\F11C"}.video-js .vjs-descriptions-button .vjs-icon-placeholder,.vjs-icon-audio-description{font-family:VideoJS;font-weight:400;font-style:normal}.video-js .vjs-descriptions-button .vjs-icon-placeholder:before,.vjs-icon-audio-description:before{content:"\\F11D"}.video-js .vjs-audio-button .vjs-icon-placeholder,.vjs-icon-audio{font-family:VideoJS;font-weight:400;font-style:normal}.video-js .vjs-audio-button .vjs-icon-placeholder:before,.vjs-icon-audio:before{content:"\\F11E"}.vjs-icon-next-item{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-next-item:before{content:"\\F11F"}.vjs-icon-previous-item{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-previous-item:before{content:"\\F120"}.video-js .vjs-picture-in-picture-control .vjs-icon-placeholder,.vjs-icon-picture-in-picture-enter{font-family:VideoJS;font-weight:400;font-style:normal}.video-js .vjs-picture-in-picture-control .vjs-icon-placeholder:before,.vjs-icon-picture-in-picture-enter:before{content:"\\F121"}.video-js.vjs-picture-in-picture .vjs-picture-in-picture-control .vjs-icon-placeholder,.vjs-icon-picture-in-picture-exit{font-family:VideoJS;font-weight:400;font-style:normal}.video-js.vjs-picture-in-picture .vjs-picture-in-picture-control .vjs-icon-placeholder:before,.vjs-icon-picture-in-picture-exit:before{content:"\\F122"}.video-js{display:block;vertical-align:top;box-sizing:border-box;color:#fff;background-color:#000;position:relative;padding:0;font-size:10px;line-height:1;font-weight:400;font-style:normal;font-family:Arial,Helvetica,sans-serif;word-break:normal}.video-js:-moz-full-screen{position:absolute}.video-js:-webkit-full-screen{width:100%!important;height:100%!important}.video-js[tabindex="-1"]{outline:none}.video-js *,.video-js :after,.video-js :before{box-sizing:inherit}.video-js ul{font-family:inherit;font-size:inherit;line-height:inherit;list-style-position:outside;margin:0}.video-js.vjs-4-3,.video-js.vjs-16-9,.video-js.vjs-fluid{width:100%;max-width:100%;height:0}.video-js.vjs-16-9{padding-top:56.25%}.video-js.vjs-4-3{padding-top:75%}.video-js.vjs-fill,.video-js .vjs-tech{width:100%;height:100%}.video-js .vjs-tech{position:absolute;top:0;left:0}body.vjs-full-window{padding:0;margin:0;height:100%}.vjs-full-window .video-js.vjs-fullscreen{position:fixed;overflow:hidden;z-index:1000;left:0;top:0;bottom:0;right:0}.video-js.vjs-fullscreen{width:100%!important;height:100%!important;padding-top:0!important}.video-js.vjs-fullscreen.vjs-user-inactive{cursor:none}.vjs-hidden{display:none!important}.vjs-disabled{opacity:.5;cursor:default}.video-js .vjs-offscreen{height:1px;left:-9999px;position:absolute;top:0;width:1px}.vjs-lock-showing{display:block!important;opacity:1;visibility:visible}.vjs-no-js{padding:20px;color:#fff;background-color:#000;font-size:18px;font-family:Arial,Helvetica,sans-serif;text-align:center;width:300px;height:150px;margin:0 auto}.vjs-no-js a,.vjs-no-js a:visited{color:#66a8cc}.video-js .vjs-big-play-button{font-size:3em;line-height:1.5em;height:1.63332em;width:3em;display:block;position:absolute;top:10px;left:10px;padding:0;cursor:pointer;opacity:1;border:.06666em solid #fff;background-color:#2b333f;background-color:rgba(43,51,63,.7);border-radius:.3em;transition:all .4s}.vjs-big-play-centered .vjs-big-play-button{top:50%;left:50%;margin-top:-.81666em;margin-left:-1.5em}.video-js .vjs-big-play-button:focus,.video-js:hover .vjs-big-play-button{border-color:#fff;background-color:#73859f;background-color:rgba(115,133,159,.5);transition:all 0s}.vjs-controls-disabled .vjs-big-play-button,.vjs-error .vjs-big-play-button,.vjs-has-started .vjs-big-play-button,.vjs-using-native-controls .vjs-big-play-button{display:none}.vjs-has-started.vjs-paused.vjs-show-big-play-button-on-pause .vjs-big-play-button{display:block}.video-js button{background:none;border:none;color:inherit;display:inline-block;font-size:inherit;line-height:inherit;text-transform:none;text-decoration:none;transition:none;-webkit-appearance:none;-moz-appearance:none;appearance:none}.vjs-control .vjs-button{width:100%;height:100%}.video-js .vjs-control.vjs-close-button{cursor:pointer;height:3em;position:absolute;right:0;top:.5em;z-index:2}.video-js .vjs-modal-dialog{background:rgba(0,0,0,.8);background:linear-gradient(180deg,rgba(0,0,0,.8),hsla(0,0%,100%,0));overflow:auto}.video-js .vjs-modal-dialog>*{box-sizing:border-box}.vjs-modal-dialog .vjs-modal-dialog-content{font-size:1.2em;line-height:1.5;padding:20px 24px;z-index:1}.vjs-menu-button{cursor:pointer}.vjs-menu-button.vjs-disabled{cursor:default}.vjs-workinghover .vjs-menu-button.vjs-disabled:hover .vjs-menu{display:none}.vjs-menu .vjs-menu-content{display:block;padding:0;margin:0;font-family:Arial,Helvetica,sans-serif;overflow:auto}.vjs-menu .vjs-menu-content>*{box-sizing:border-box}.vjs-scrubbing .vjs-control.vjs-menu-button:hover .vjs-menu{display:none}.vjs-menu li{list-style:none;margin:0;padding:.2em 0;line-height:1.4em;font-size:1.2em;text-align:center;text-transform:lowercase}.js-focus-visible .vjs-menu li.vjs-menu-item:hover,.vjs-menu li.vjs-menu-item:focus,.vjs-menu li.vjs-menu-item:hover{background-color:#73859f;background-color:rgba(115,133,159,.5)}.js-focus-visible .vjs-menu li.vjs-selected:hover,.vjs-menu li.vjs-selected,.vjs-menu li.vjs-selected:focus,.vjs-menu li.vjs-selected:hover{background-color:#fff;color:#2b333f}.vjs-menu li.vjs-menu-title{text-align:center;text-transform:uppercase;font-size:1em;line-height:2em;padding:0;margin:0 0 .3em;font-weight:700;cursor:default}.vjs-menu-button-popup .vjs-menu{display:none;position:absolute;bottom:0;width:10em;left:-3em;height:0;margin-bottom:1.5em;border-top-color:rgba(43,51,63,.7)}.vjs-menu-button-popup .vjs-menu .vjs-menu-content{background-color:#2b333f;background-color:rgba(43,51,63,.7);position:absolute;width:100%;bottom:1.5em;max-height:15em}.vjs-layout-tiny .vjs-menu-button-popup .vjs-menu .vjs-menu-content,.vjs-layout-x-small .vjs-menu-button-popup .vjs-menu .vjs-menu-content{max-height:5em}.vjs-layout-small .vjs-menu-button-popup .vjs-menu .vjs-menu-content{max-height:10em}.vjs-layout-medium .vjs-menu-button-popup .vjs-menu .vjs-menu-content{max-height:14em}.vjs-layout-huge .vjs-menu-button-popup .vjs-menu .vjs-menu-content,.vjs-layout-large .vjs-menu-button-popup .vjs-menu .vjs-menu-content,.vjs-layout-x-large .vjs-menu-button-popup .vjs-menu .vjs-menu-content{max-height:25em}.vjs-menu-button-popup .vjs-menu.vjs-lock-showing,.vjs-workinghover .vjs-menu-button-popup.vjs-hover .vjs-menu{display:block}.video-js .vjs-menu-button-inline{transition:all .4s;overflow:hidden}.video-js .vjs-menu-button-inline:before{width:2.222222222em}.video-js .vjs-menu-button-inline.vjs-slider-active,.video-js .vjs-menu-button-inline:focus,.video-js .vjs-menu-button-inline:hover,.video-js.vjs-no-flex .vjs-menu-button-inline{width:12em}.vjs-menu-button-inline .vjs-menu{opacity:0;height:100%;width:auto;position:absolute;left:4em;top:0;padding:0;margin:0;transition:all .4s}.vjs-menu-button-inline.vjs-slider-active .vjs-menu,.vjs-menu-button-inline:focus .vjs-menu,.vjs-menu-button-inline:hover .vjs-menu{display:block;opacity:1}.vjs-no-flex .vjs-menu-button-inline .vjs-menu{display:block;opacity:1;position:relative;width:auto}.vjs-no-flex .vjs-menu-button-inline.vjs-slider-active .vjs-menu,.vjs-no-flex .vjs-menu-button-inline:focus .vjs-menu,.vjs-no-flex .vjs-menu-button-inline:hover .vjs-menu{width:auto}.vjs-menu-button-inline .vjs-menu-content{width:auto;height:100%;margin:0;overflow:hidden}.video-js .vjs-control-bar{display:none;width:100%;position:absolute;bottom:0;left:0;right:0;height:3em;background-color:#2b333f;background-color:rgba(43,51,63,.7)}.vjs-has-started .vjs-control-bar{display:flex;visibility:visible;opacity:1;transition:visibility .1s,opacity .1s}.vjs-has-started.vjs-user-inactive.vjs-playing .vjs-control-bar{visibility:visible;opacity:0;transition:visibility 1s,opacity 1s}.vjs-controls-disabled .vjs-control-bar,.vjs-error .vjs-control-bar,.vjs-using-native-controls .vjs-control-bar{display:none!important}.vjs-audio.vjs-has-started.vjs-user-inactive.vjs-playing .vjs-control-bar{opacity:1;visibility:visible}.vjs-has-started.vjs-no-flex .vjs-control-bar{display:table}.video-js .vjs-control{position:relative;text-align:center;margin:0;padding:0;height:100%;width:4em;flex:none}.vjs-button>.vjs-icon-placeholder:before{font-size:1.8em;line-height:1.67}.video-js .vjs-control:focus,.video-js .vjs-control:focus:before,.video-js .vjs-control:hover:before{text-shadow:0 0 1em #fff}.video-js .vjs-control-text{border:0;clip:rect(0 0 0 0);height:1px;overflow:hidden;padding:0;position:absolute;width:1px}.vjs-no-flex .vjs-control{display:table-cell;vertical-align:middle}.video-js .vjs-custom-control-spacer{display:none}.video-js .vjs-progress-control{cursor:pointer;flex:auto;display:flex;align-items:center;min-width:4em;touch-action:none}.video-js .vjs-progress-control.disabled{cursor:default}.vjs-live .vjs-progress-control{display:none}.vjs-liveui .vjs-progress-control{display:flex;align-items:center}.vjs-no-flex .vjs-progress-control{width:auto}.video-js .vjs-progress-holder{flex:auto;transition:all .2s;height:.3em}.video-js .vjs-progress-control .vjs-progress-holder{margin:0 10px}.video-js .vjs-progress-control:hover .vjs-progress-holder{font-size:1.6666666667em}.video-js .vjs-progress-control:hover .vjs-progress-holder.disabled{font-size:1em}.video-js .vjs-progress-holder .vjs-load-progress,.video-js .vjs-progress-holder .vjs-load-progress div,.video-js .vjs-progress-holder .vjs-play-progress{position:absolute;display:block;height:100%;margin:0;padding:0;width:0}.video-js .vjs-play-progress{background-color:#fff}.video-js .vjs-play-progress:before{font-size:.9em;position:absolute;right:-.5em;top:-.3333333333em;z-index:1}.video-js .vjs-load-progress{background:rgba(115,133,159,.5)}.video-js .vjs-load-progress div{background:rgba(115,133,159,.75)}.video-js .vjs-time-tooltip{background-color:#fff;background-color:hsla(0,0%,100%,.8);border-radius:.3em;color:#000;float:right;font-family:Arial,Helvetica,sans-serif;font-size:1em;padding:6px 8px 8px;pointer-events:none;position:absolute;top:-3.4em;visibility:hidden;z-index:1}.video-js .vjs-progress-holder:focus .vjs-time-tooltip{display:none}.video-js .vjs-progress-control:hover .vjs-progress-holder:focus .vjs-time-tooltip,.video-js .vjs-progress-control:hover .vjs-time-tooltip{display:block;font-size:.6em;visibility:visible}.video-js .vjs-progress-control.disabled:hover .vjs-time-tooltip{font-size:1em}.video-js .vjs-progress-control .vjs-mouse-display{display:none;position:absolute;width:1px;height:100%;background-color:#000;z-index:1}.vjs-no-flex .vjs-progress-control .vjs-mouse-display{z-index:0}.video-js .vjs-progress-control:hover .vjs-mouse-display{display:block}.video-js.vjs-user-inactive .vjs-progress-control .vjs-mouse-display{visibility:hidden;opacity:0;transition:visibility 1s,opacity 1s}.video-js.vjs-user-inactive.vjs-no-flex .vjs-progress-control .vjs-mouse-display{display:none}.vjs-mouse-display .vjs-time-tooltip{color:#fff;background-color:#000;background-color:rgba(0,0,0,.8)}.video-js .vjs-slider{position:relative;cursor:pointer;padding:0;margin:0 .45em;-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;background-color:#73859f;background-color:rgba(115,133,159,.5)}.video-js .vjs-slider.disabled{cursor:default}.video-js .vjs-slider:focus{text-shadow:0 0 1em #fff;box-shadow:0 0 1em #fff}.video-js .vjs-mute-control{cursor:pointer;flex:none}.video-js .vjs-volume-control{cursor:pointer;margin-right:1em;display:flex}.video-js .vjs-volume-control.vjs-volume-horizontal{width:5em}.video-js .vjs-volume-panel .vjs-volume-control{visibility:visible;opacity:0;width:1px;height:1px;margin-left:-1px}.video-js .vjs-volume-panel{transition:width 1s}.video-js .vjs-volume-panel.vjs-hover .vjs-mute-control~.vjs-volume-control,.video-js .vjs-volume-panel.vjs-hover .vjs-volume-control,.video-js .vjs-volume-panel .vjs-volume-control.vjs-slider-active,.video-js .vjs-volume-panel .vjs-volume-control:active,.video-js .vjs-volume-panel:active .vjs-volume-control,.video-js .vjs-volume-panel:focus .vjs-volume-control{visibility:visible;opacity:1;position:relative;transition:visibility .1s,opacity .1s,height .1s,width .1s,left 0s,top 0s}.video-js .vjs-volume-panel.vjs-hover .vjs-mute-control~.vjs-volume-control.vjs-volume-horizontal,.video-js .vjs-volume-panel.vjs-hover .vjs-volume-control.vjs-volume-horizontal,.video-js .vjs-volume-panel .vjs-volume-control.vjs-slider-active.vjs-volume-horizontal,.video-js .vjs-volume-panel .vjs-volume-control:active.vjs-volume-horizontal,.video-js .vjs-volume-panel:active .vjs-volume-control.vjs-volume-horizontal,.video-js .vjs-volume-panel:focus .vjs-volume-control.vjs-volume-horizontal{width:5em;height:3em}.video-js .vjs-volume-panel.vjs-hover .vjs-mute-control~.vjs-volume-control.vjs-volume-vertical,.video-js .vjs-volume-panel.vjs-hover .vjs-volume-control.vjs-volume-vertical,.video-js .vjs-volume-panel .vjs-volume-control.vjs-slider-active.vjs-volume-vertical,.video-js .vjs-volume-panel .vjs-volume-control:active.vjs-volume-vertical,.video-js .vjs-volume-panel:active .vjs-volume-control.vjs-volume-vertical,.video-js .vjs-volume-panel:focus .vjs-volume-control.vjs-volume-vertical{left:-3.5em;transition:left 0s}.video-js .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-hover,.video-js .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-slider-active,.video-js .vjs-volume-panel.vjs-volume-panel-horizontal:active{width:9em;transition:width .1s}.video-js .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-mute-toggle-only{width:4em}.video-js .vjs-volume-panel .vjs-volume-control.vjs-volume-vertical{height:8em;width:3em;left:-3000em;transition:visibility 1s,opacity 1s,height 1s 1s,width 1s 1s,left 1s 1s,top 1s 1s}.video-js .vjs-volume-panel .vjs-volume-control.vjs-volume-horizontal{transition:visibility 1s,opacity 1s,height 1s 1s,width 1s,left 1s 1s,top 1s 1s}.video-js.vjs-no-flex .vjs-volume-panel .vjs-volume-control.vjs-volume-horizontal{width:5em;height:3em;visibility:visible;opacity:1;position:relative;transition:none}.video-js.vjs-no-flex .vjs-volume-control.vjs-volume-vertical,.video-js.vjs-no-flex .vjs-volume-panel .vjs-volume-control.vjs-volume-vertical{position:absolute;bottom:3em;left:.5em}.video-js .vjs-volume-panel{display:flex}.video-js .vjs-volume-bar{margin:1.35em .45em}.vjs-volume-bar.vjs-slider-horizontal{width:5em;height:.3em}.vjs-volume-bar.vjs-slider-vertical{width:.3em;height:5em;margin:1.35em auto}.video-js .vjs-volume-level{position:absolute;bottom:0;left:0;background-color:#fff}.video-js .vjs-volume-level:before{position:absolute;font-size:.9em}.vjs-slider-vertical .vjs-volume-level{width:.3em}.vjs-slider-vertical .vjs-volume-level:before{top:-.5em;left:-.3em}.vjs-slider-horizontal .vjs-volume-level{height:.3em}.vjs-slider-horizontal .vjs-volume-level:before{top:-.3em;right:-.5em}.video-js .vjs-volume-panel.vjs-volume-panel-vertical{width:4em}.vjs-volume-bar.vjs-slider-vertical .vjs-volume-level{height:100%}.vjs-volume-bar.vjs-slider-horizontal .vjs-volume-level{width:100%}.video-js .vjs-volume-vertical{width:3em;height:8em;bottom:8em;background-color:#2b333f;background-color:rgba(43,51,63,.7)}.video-js .vjs-volume-horizontal .vjs-menu{left:-2em}.vjs-poster{display:inline-block;vertical-align:middle;background-repeat:no-repeat;background-position:50% 50%;background-size:contain;background-color:#000;cursor:pointer;margin:0;padding:0;position:absolute;top:0;right:0;bottom:0;left:0;height:100%}.vjs-has-started .vjs-poster{display:none}.vjs-audio.vjs-has-started .vjs-poster{display:block}.vjs-using-native-controls .vjs-poster{display:none}.video-js .vjs-live-control{display:flex;align-items:flex-start;flex:auto;font-size:1em;line-height:3em}.vjs-no-flex .vjs-live-control{display:table-cell;width:auto;text-align:left}.video-js.vjs-liveui .vjs-live-control,.video-js:not(.vjs-live) .vjs-live-control{display:none}.video-js .vjs-seek-to-live-control{cursor:pointer;flex:none;display:inline-flex;height:100%;padding-left:.5em;padding-right:.5em;font-size:1em;line-height:3em;width:auto;min-width:4em}.vjs-no-flex .vjs-seek-to-live-control{display:table-cell;width:auto;text-align:left}.video-js.vjs-live:not(.vjs-liveui) .vjs-seek-to-live-control,.video-js:not(.vjs-live) .vjs-seek-to-live-control{display:none}.vjs-seek-to-live-control.vjs-control.vjs-at-live-edge{cursor:auto}.vjs-seek-to-live-control .vjs-icon-placeholder{margin-right:.5em;color:#888}.vjs-seek-to-live-control.vjs-control.vjs-at-live-edge .vjs-icon-placeholder{color:red}.video-js .vjs-time-control{flex:none;font-size:1em;line-height:3em;min-width:2em;width:auto;padding-left:1em;padding-right:1em}.video-js .vjs-current-time,.video-js .vjs-duration,.vjs-live .vjs-time-control,.vjs-no-flex .vjs-current-time,.vjs-no-flex .vjs-duration{display:none}.vjs-time-divider{display:none;line-height:3em}.vjs-live .vjs-time-divider{display:none}.video-js .vjs-play-control{cursor:pointer}.video-js .vjs-play-control .vjs-icon-placeholder{flex:none}.vjs-text-track-display{position:absolute;bottom:3em;left:0;right:0;top:0;pointer-events:none}.video-js.vjs-user-inactive.vjs-playing .vjs-text-track-display{bottom:1em}.video-js .vjs-text-track{font-size:1.4em;text-align:center;margin-bottom:.1em}.vjs-subtitles{color:#fff}.vjs-captions{color:#fc6}.vjs-tt-cue{display:block}video::-webkit-media-text-track-display{transform:translateY(-3em)}.video-js.vjs-user-inactive.vjs-playing video::-webkit-media-text-track-display{transform:translateY(-1.5em)}.video-js .vjs-fullscreen-control,.video-js .vjs-picture-in-picture-control{cursor:pointer;flex:none}.vjs-playback-rate .vjs-playback-rate-value,.vjs-playback-rate>.vjs-menu-button{position:absolute;top:0;left:0;width:100%;height:100%}.vjs-playback-rate .vjs-playback-rate-value{pointer-events:none;font-size:1.5em;line-height:2;text-align:center}.vjs-playback-rate .vjs-menu{width:4em;left:0}.vjs-error .vjs-error-display .vjs-modal-dialog-content{font-size:1.4em;text-align:center}.vjs-error .vjs-error-display:before{color:#fff;content:"X";font-family:Arial,Helvetica,sans-serif;font-size:4em;left:0;line-height:1;margin-top:-.5em;position:absolute;text-shadow:.05em .05em .1em #000;text-align:center;top:50%;vertical-align:middle;width:100%}.vjs-loading-spinner{display:none;position:absolute;top:50%;left:50%;margin:-25px 0 0 -25px;opacity:.85;text-align:left;border:6px solid rgba(43,51,63,.7);box-sizing:border-box;background-clip:padding-box;width:50px;height:50px;border-radius:25px;visibility:hidden}.vjs-seeking .vjs-loading-spinner,.vjs-waiting .vjs-loading-spinner{display:block;-webkit-animation:vjs-spinner-show 0s linear .3s forwards;animation:vjs-spinner-show 0s linear .3s forwards}.vjs-loading-spinner:after,.vjs-loading-spinner:before{content:"";position:absolute;margin:-6px;box-sizing:inherit;width:inherit;height:inherit;border-radius:inherit;opacity:1;border:inherit;border-color:transparent;border-top-color:#fff}.vjs-seeking .vjs-loading-spinner:after,.vjs-seeking .vjs-loading-spinner:before,.vjs-waiting .vjs-loading-spinner:after,.vjs-waiting .vjs-loading-spinner:before{-webkit-animation:vjs-spinner-spin 1.1s cubic-bezier(.6,.2,0,.8) infinite,vjs-spinner-fade 1.1s linear infinite;animation:vjs-spinner-spin 1.1s cubic-bezier(.6,.2,0,.8) infinite,vjs-spinner-fade 1.1s linear infinite}.vjs-seeking .vjs-loading-spinner:before,.vjs-waiting .vjs-loading-spinner:before{border-top-color:#fff}.vjs-seeking .vjs-loading-spinner:after,.vjs-waiting .vjs-loading-spinner:after{border-top-color:#fff;-webkit-animation-delay:.44s;animation-delay:.44s}@keyframes vjs-spinner-show{to{visibility:visible}}@-webkit-keyframes vjs-spinner-show{to{visibility:visible}}@keyframes vjs-spinner-spin{to{transform:rotate(1turn)}}@-webkit-keyframes vjs-spinner-spin{to{-webkit-transform:rotate(1turn)}}@keyframes vjs-spinner-fade{0%{border-top-color:#73859f}20%{border-top-color:#73859f}35%{border-top-color:#fff}60%{border-top-color:#73859f}to{border-top-color:#73859f}}@-webkit-keyframes vjs-spinner-fade{0%{border-top-color:#73859f}20%{border-top-color:#73859f}35%{border-top-color:#fff}60%{border-top-color:#73859f}to{border-top-color:#73859f}}.vjs-chapters-button .vjs-menu ul{width:24em}.video-js .vjs-subs-caps-button+.vjs-menu .vjs-captions-menu-item .vjs-menu-item-text .vjs-icon-placeholder{vertical-align:middle;display:inline-block;margin-bottom:-.1em}.video-js .vjs-subs-caps-button+.vjs-menu .vjs-captions-menu-item .vjs-menu-item-text .vjs-icon-placeholder:before{font-family:VideoJS;content:"\\F10D";font-size:1.5em;line-height:inherit}.video-js .vjs-audio-button+.vjs-menu .vjs-main-desc-menu-item .vjs-menu-item-text .vjs-icon-placeholder{vertical-align:middle;display:inline-block;margin-bottom:-.1em}.video-js .vjs-audio-button+.vjs-menu .vjs-main-desc-menu-item .vjs-menu-item-text .vjs-icon-placeholder:before{font-family:VideoJS;content:" \\F11D";font-size:1.5em;line-height:inherit}.video-js:not(.vjs-fullscreen).vjs-layout-small .vjs-audio-button,.video-js:not(.vjs-fullscreen).vjs-layout-small .vjs-captions-button,.video-js:not(.vjs-fullscreen).vjs-layout-small .vjs-chapters-button,.video-js:not(.vjs-fullscreen).vjs-layout-small .vjs-current-time,.video-js:not(.vjs-fullscreen).vjs-layout-small .vjs-descriptions-button,.video-js:not(.vjs-fullscreen).vjs-layout-small .vjs-duration,.video-js:not(.vjs-fullscreen).vjs-layout-small .vjs-playback-rate,.video-js:not(.vjs-fullscreen).vjs-layout-small .vjs-remaining-time,.video-js:not(.vjs-fullscreen).vjs-layout-small .vjs-subtitles-button,.video-js:not(.vjs-fullscreen).vjs-layout-small .vjs-time-divider,.video-js:not(.vjs-fullscreen).vjs-layout-small .vjs-volume-control,.video-js:not(.vjs-fullscreen).vjs-layout-tiny .vjs-audio-button,.video-js:not(.vjs-fullscreen).vjs-layout-tiny .vjs-captions-button,.video-js:not(.vjs-fullscreen).vjs-layout-tiny .vjs-chapters-button,.video-js:not(.vjs-fullscreen).vjs-layout-tiny .vjs-current-time,.video-js:not(.vjs-fullscreen).vjs-layout-tiny .vjs-descriptions-button,.video-js:not(.vjs-fullscreen).vjs-layout-tiny .vjs-duration,.video-js:not(.vjs-fullscreen).vjs-layout-tiny .vjs-playback-rate,.video-js:not(.vjs-fullscreen).vjs-layout-tiny .vjs-remaining-time,.video-js:not(.vjs-fullscreen).vjs-layout-tiny .vjs-subtitles-button,.video-js:not(.vjs-fullscreen).vjs-layout-tiny .vjs-time-divider,.video-js:not(.vjs-fullscreen).vjs-layout-tiny .vjs-volume-control,.video-js:not(.vjs-fullscreen).vjs-layout-x-small .vjs-audio-button,.video-js:not(.vjs-fullscreen).vjs-layout-x-small .vjs-captions-button,.video-js:not(.vjs-fullscreen).vjs-layout-x-small .vjs-chapters-button,.video-js:not(.vjs-fullscreen).vjs-layout-x-small .vjs-current-time,.video-js:not(.vjs-fullscreen).vjs-layout-x-small .vjs-descriptions-button,.video-js:not(.vjs-fullscreen).vjs-layout-x-small .vjs-duration,.video-js:not(.vjs-fullscreen).vjs-layout-x-small .vjs-playback-rate,.video-js:not(.vjs-fullscreen).vjs-layout-x-small .vjs-remaining-time,.video-js:not(.vjs-fullscreen).vjs-layout-x-small .vjs-subtitles-button,.video-js:not(.vjs-fullscreen).vjs-layout-x-small .vjs-time-divider,.video-js:not(.vjs-fullscreen).vjs-layout-x-small .vjs-volume-control{display:none}.video-js:not(.vjs-fullscreen).vjs-layout-small .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-slider-active,.video-js:not(.vjs-fullscreen).vjs-layout-small .vjs-volume-panel.vjs-volume-panel-horizontal:active,.video-js:not(.vjs-fullscreen).vjs-layout-small .vjs-volume-panel.vjs-volume-panel-horizontal:hover,.video-js:not(.vjs-fullscreen).vjs-layout-tiny .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-slider-active,.video-js:not(.vjs-fullscreen).vjs-layout-tiny .vjs-volume-panel.vjs-volume-panel-horizontal:active,.video-js:not(.vjs-fullscreen).vjs-layout-tiny .vjs-volume-panel.vjs-volume-panel-horizontal:hover,.video-js:not(.vjs-fullscreen).vjs-layout-x-small .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-slider-active,.video-js:not(.vjs-fullscreen).vjs-layout-x-small .vjs-volume-panel.vjs-volume-panel-horizontal:active,.video-js:not(.vjs-fullscreen).vjs-layout-x-small .vjs-volume-panel.vjs-volume-panel-horizontal:hover{width:auto}.video-js:not(.vjs-fullscreen).vjs-layout-tiny .vjs-subs-caps-button,.video-js:not(.vjs-fullscreen).vjs-layout-x-small:not(.vjs-live) .vjs-subs-caps-button,.video-js:not(.vjs-fullscreen).vjs-layout-x-small:not(.vjs-liveui) .vjs-subs-caps-button{display:none}.video-js:not(.vjs-fullscreen).vjs-layout-tiny .vjs-custom-control-spacer,.video-js:not(.vjs-fullscreen).vjs-layout-x-small.vjs-liveui .vjs-custom-control-spacer{flex:auto;display:block}.video-js:not(.vjs-fullscreen).vjs-layout-tiny.vjs-no-flex .vjs-custom-control-spacer,.video-js:not(.vjs-fullscreen).vjs-layout-x-small.vjs-liveui.vjs-no-flex .vjs-custom-control-spacer{width:auto}.video-js:not(.vjs-fullscreen).vjs-layout-tiny .vjs-progress-control,.video-js:not(.vjs-fullscreen).vjs-layout-x-small.vjs-liveui .vjs-progress-control{display:none}.vjs-modal-dialog.vjs-text-track-settings{background-color:#2b333f;background-color:rgba(43,51,63,.75);color:#fff;height:70%}.vjs-text-track-settings .vjs-modal-dialog-content{display:table}.vjs-text-track-settings .vjs-track-settings-colors,.vjs-text-track-settings .vjs-track-settings-controls,.vjs-text-track-settings .vjs-track-settings-font{display:table-cell}.vjs-text-track-settings .vjs-track-settings-controls{text-align:right;vertical-align:bottom}@supports (display:grid){.vjs-text-track-settings .vjs-modal-dialog-content{display:grid;grid-template-columns:1fr 1fr;grid-template-rows:1fr;padding:20px 24px 0}.vjs-track-settings-controls .vjs-default-button{margin-bottom:20px}.vjs-text-track-settings .vjs-track-settings-controls{grid-column:1/-1}.vjs-layout-small .vjs-text-track-settings .vjs-modal-dialog-content,.vjs-layout-tiny .vjs-text-track-settings .vjs-modal-dialog-content,.vjs-layout-x-small .vjs-text-track-settings .vjs-modal-dialog-content{grid-template-columns:1fr}}.vjs-track-setting>select{margin-right:1em;margin-bottom:.5em}.vjs-text-track-settings fieldset{margin:5px;padding:3px;border:none}.vjs-text-track-settings fieldset span{display:inline-block}.vjs-text-track-settings fieldset span>select{max-width:7.3em}.vjs-text-track-settings legend{color:#fff;margin:0 0 5px}.vjs-text-track-settings .vjs-label{position:absolute;clip:rect(1px 1px 1px 1px);clip:rect(1px,1px,1px,1px);display:block;margin:0 0 5px;padding:0;border:0;height:1px;width:1px;overflow:hidden}.vjs-track-settings-controls button:active,.vjs-track-settings-controls button:focus{outline-style:solid;outline-width:medium;background-image:linear-gradient(0deg,#fff 88%,#73859f)}.vjs-track-settings-controls button:hover{color:rgba(43,51,63,.75)}.vjs-track-settings-controls button{background-color:#fff;background-image:linear-gradient(-180deg,#fff 88%,#73859f);color:#2b333f;cursor:pointer;border-radius:2px}.vjs-track-settings-controls .vjs-default-button{margin-right:1em}@media print{.video-js>:not(.vjs-tech):not(.vjs-poster){visibility:hidden}}.vjs-resize-manager{position:absolute;top:0;left:0;width:100%;height:100%;border:none;z-index:-1000}.js-focus-visible .video-js :focus:not(.focus-visible),.video-js .vjs-menu :focus:not(:focus-visible),.video-js :focus:not(:focus-visible){outline:none;background:none}',""])},"gvu/":function(t,e,i){"use strict";function n(){this.handlers=[]}var r=i("gvuQ");n.prototype.use=function(t,e){return this.handlers.push({fulfilled:t,rejected:e}),this.handlers.length-1},n.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)},n.prototype.forEach=function(t){r.forEach(this.handlers,function(e){null!==e&&t(e)})},t.exports=n},gvuQ:function(t,e,i){"use strict";function n(t){return"[object Array]"===u.call(t)}function r(t){return null!==t&&"object"==typeof t}function o(t){return"[object Function]"===u.call(t)}function s(t,e){if(null!==t&&void 0!==t)if("object"!=typeof t&&(t=[t]),n(t))for(var i=0,r=t.length;i<r;i++)e.call(null,t[i],i,t);else for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.call(null,t[o],o,t)}var a=i("IKeO"),l=i("5SCX"),u=Object.prototype.toString;t.exports={isArray:n,isArrayBuffer:function(t){return"[object ArrayBuffer]"===u.call(t)},isBuffer:l,isFormData:function(t){return"undefined"!=typeof FormData&&t instanceof FormData},isArrayBufferView:function(t){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&t.buffer instanceof ArrayBuffer},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isObject:r,isUndefined:function(t){return void 0===t},isDate:function(t){return"[object Date]"===u.call(t)},isFile:function(t){return"[object File]"===u.call(t)},isBlob:function(t){return"[object Blob]"===u.call(t)},isFunction:o,isStream:function(t){return r(t)&&o(t.pipe)},isURLSearchParams:function(t){return"undefined"!=typeof URLSearchParams&&t instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:s,merge:function t(){function e(e,n){"object"==typeof i[n]&&"object"==typeof e?i[n]=t(i[n],e):i[n]=e}for(var i={},n=0,r=arguments.length;n<r;n++)s(arguments[n],e);return i},extend:function(t,e,i){return s(e,function(e,n){t[n]=i&&"function"==typeof e?a(e,i):e}),t},trim:function(t){return t.replace(/^\s*/,"").replace(/\s*$/,"")}}},h1nK:function(t,e,i){"use strict";var n=i("gvuQ");t.exports=n.isStandardBrowserEnv()?{write:function(t,e,i,r,o,s){var a=[];a.push(t+"="+encodeURIComponent(e)),n.isNumber(i)&&a.push("expires="+new Date(i).toGMTString()),n.isString(r)&&a.push("path="+r),n.isString(o)&&a.push("domain="+o),!0===s&&a.push("secure"),document.cookie=a.join("; ")},read:function(t){var e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},ifc8:function(t,e,i){(t.exports=i("BkJT")(void 0)).push([t.i,'.video-wrapper .live .vjs-progress-control{visibility:hidden}.video-wrapper .live .vjs-remaining-time{display:none}.video-wrapper .hide-waiting .vjs-waiting .vjs-loading-spinner{display:none!important}.video-wrapper .alt{position:absolute;left:0;top:0;right:0;bottom:0;background:#000;color:#fff;text-align:center}.video-wrapper .alt>table{width:100%;height:100%}.video-wrapper .alt>table tr>td{vertical-align:middle}.video-wrapper .video-title{position:absolute;top:5px;right:5px;color:#fff;background-color:hsla(0,0%,50%,.5);border-radius:2px;padding:2px 5px;max-width:120px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.video-wrapper .video-js .vjs-control-bar .vjs-button{cursor:pointer}.video-wrapper .video-js .vjs-control-bar .vjs-icon-spinner:before{font-size:1.4em;line-height:1.87}.video-wrapper .vjs-error-display{display:none}@media screen and (min-device-width:1920px) and (-webkit-min-device-pixel-ratio:0){.video-wrapper .video-js .vjs-control-bar{font-size:14px}}.video-wrapper .video-js .vjs-time-control{font-size:1.035em;line-height:2.93em}.video-wrapper .vjs-resolution-button{color:#ccc;font-family:VideoJS}.video-wrapper .vjs-resolution-button .vjs-resolution-button-staticlabel:before{content:"\\F110";font-size:1.8em;line-height:1.7em}.video-wrapper .vjs-resolution-button .vjs-resolution-button-label{width:100%;height:.6em;display:block!important}.video-wrapper .vjs-resolution-button .vjs-resolution-button-label-ie{width:100%;height:.4em;display:block!important}.video-wrapper .vjs-resolution-button ul.vjs-menu-content{width:4em!important}.video-wrapper .vjs-resolution-button .vjs-menu{left:0}.video-wrapper .vjs-resolution-button .vjs-menu li{text-transform:none;font-size:1em;line-height:1.5em;font-family:Arial,Helvetica,sans-serif}.video-wrapper .vjs-audio-button{display:none!important}.video-wrapper .video-js .vjs-big-play-button .vjs-icon-placeholder:before,.video-wrapper .vjs-button>.vjs-icon-placeholder:before{position:relative!important}',""])},izNw:function(t,e,i){"use strict";var n=i("/TTR"),r=(i.n(n),i("psq8")),o=i.n(r),s=i("2sCs"),a=i.n(s),l=i("N3gQ"),u=i.n(l);videojs.options.flash.swf="liveplayer.swf",videojs.options.techOrder=["html5","flash"],videojs.browser.IE_VERSION&&videojs.browser.IE_VERSION<11&&(videojs.options.techOrder=["flash","html5"]),e.a={name:"live-player",data:function(){return{player:null,timer:0,fluentBtnCls:"live-player-fluent-btn",stretchBtnCls:"live-player-stretch-btn",snapFromOutside:!1,_fluent:!0,_stretch:!1,resolutionName:{sd:"标清",hd:"高清",fhd:"超清",yh:"原画"}}},props:{videoUrl:{type:String,default:""},videoTitle:{type:String,default:""},snapUrl:{default:""},poster:{default:""},autoplay:{type:Boolean,default:!0},live:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},currentTime:{type:Number,default:0},timeout:{type:Number,default:20},alt:{type:String,default:"无信号"},muted:{type:Boolean,default:!1},aspect:{type:String,default:"16:9"},videoBufferSize:{type:Number,default:204800},audioBufferSize:{type:Number,default:131072},pauseWhenHidden:{type:Boolean,default:!0},fluent:{type:Boolean,default:!0},stretch:{type:Boolean,default:!1},loop:{type:Boolean,default:!1},controls:{type:Boolean,default:!0},hideWaiting:{type:Boolean,default:!0},showCustomButton:{type:Boolean,default:!0},debug:{type:Boolean,default:!1},hasvideo:{type:Boolean,default:void 0},hasaudio:{type:Boolean,default:void 0},resolution:{type:String,default:""},resolutiondefault:{type:String,default:"hd"},reconnect:{type:Boolean,default:!1}},beforeDestroy:function(){this.destroyVideoJS()},deactivated:function(){this.destroyVideoJS()},watch:{videoUrl:function(t){this.reload()},fluent:function(t){this._fluent=t,this.reload()},stretch:function(t){this._stretch=t,this.reload()},loop:function(t){this.reload()},currentTime:function(t){this.player&&this.player.currentTime(t)}},mounted:function(){flvjs.reconnect=this.reconnect,this._fluent=this.fluent,this._stretch=this.stretch,this.initVideoJS()},computed:{videoType:function(){var t="video/mp4";return this.rtmp?t="rtmp/mp4":(this.http||this.ws)&&this.flv?t="video/x-flv":this.m3u8&&(t="application/x-mpegURL"),t},videoWrapperStyle:function(){if("100%"==this.aspect||"fullscreen"==this.aspect)return{width:"100%",height:"100%"};var t=this.aspect.split(":"),e=parseInt(t[0])||16;return{paddingBottom:(parseInt(t[1])||9)/e*100+"%",position:"relative",margin:"0 auto",overflow:"hidden"}},rtmp:function(){return 0==(this.src||"").indexOf("rtmp")},http:function(){return 0==(this.src||"").indexOf("http")},ws:function(){return 0==(this.src||"").indexOf("ws")},mp4:function(){return/\.mp4.*$/.test(this.src||"")},m3u8:function(){return/\.m3u8.*$/.test(this.src||"")},flv:function(){return/\.flv.*$/.test(this.src||"")},src:function(){return this.videoUrl?0===this.videoUrl.indexOf("/")?location.protocol+"//"+location.host+this.videoUrl:this.videoUrl:""},videoHtml:function(){return this.src?this.rtmp||this.http||this.flv?'\n                        <video class="video-js vjs-default-skin vjs-big-play-centered" style="width: 100%; height: 100%; '+(this._stretch?"object-fit: fill;":"")+'" controls\n                        preload="none" '+(this.mp4&&this.autoplay?"autoplay":"")+' poster="'+(this.poster||this.snapUrl)+'" '+(this.muted?"muted":"")+" "+(this.loop?"loop":"")+'>\n                            <source src="'+this.src+'" type="'+this.videoType+'"></source>\n                            <p class="vjs-no-js">\n                                To view this video please enable JavaScript, and consider upgrading to a web browser that\n                                <a href="http://videojs.com/html5-video-support/" target="_blank">\n                                    supports HTML5 video\n                                </a>\n                            </p>\n                        </video>\n                    ':'\n                        <canvas style="width: 100%; height: 100%;"></canvas>\n                    ':'\n                    <div class="alt">\n                        <table>\n                            <tr>\n                                <td>'+this.alt+"</td>\n                            </tr>\n                        </table>\n                    </div>\n                "}},methods:{isMobile:function(){return videojs.browser.IS_IOS||videojs.browser.IS_ANDROID},hasUsableSWF:function(){return!!(void 0!==window.ActiveXObject?new ActiveXObject("ShockwaveFlash.ShockwaveFlash"):navigator.plugins["Shockwave Flash"])},reload:function(){this.destroyVideoJS(),this.initVideoJS()},loadResolutionlist:function(t){if(""!=this.resolution){for(var e,i=this.resolution.split(","),n=[],r=0;r<i.length;r++)i[r],this.resolutiondefault,e="yh"==i[r]?this.videoUrl:this.videoUrl.replace(".m3u8","_"+i[r]+".m3u8"),n.push({src:e,type:this.videoType,label:this.resolutionName[i[r]],res:i[r]});t.updateSrc(n),t.on("resolutionchange",function(){})}},getCustomBtn:function(t){var e=this.$el.querySelectorAll(".video-js .vjs-control-bar .vjs-button."+t);return e.length>0?e[0]:null},customFlashButton:function(){var t=this;if(!this.getCustomBtn(this.fluentBtnCls)){var e=this.player.controlBar.addChild("button");e.el_.classList.add(this.fluentBtnCls),e.el_.innerText=this._fluent?"流畅":"极速",e.el_.title=this._fluent?"点击切换到极速播放":"点击切换到流畅播放";var i=function(){t._fluent=!t._fluent,e.el_.innerText=t._fluent?"流畅":"极速",e.el_.title=t._fluent?"点击切换到极速播放":"点击切换到流畅播放",t.player.tech_.setFluent(t._fluent)};e.on("click",i),e.on("tap",i)}if(!this.getCustomBtn(this.stretchBtnCls)){var n=this.player.controlBar.addChild("button");n.el_.classList.add(this.stretchBtnCls),n.el_.innerText=this._stretch?"拉伸":"标准",n.el_.title=this._stretch?"点击切换到标准显示":"点击切换到拉伸显示";i=function(){t._stretch=!t._stretch,n.el_.innerText=t._stretch?"拉伸":"标准",n.el_.title=t._stretch?"点击切换到标准显示":"点击切换到拉伸显示",t.player.tech_.setStretch(t._stretch)};n.on("click",i),n.on("tap",i)}},customH5Button:function(){var t=this;if(!this.getCustomBtn(this.stretchBtnCls)&&!videojs.browser.IE_VERSION){var e=this.player.controlBar.addChild("button");e.el_.classList.add(this.stretchBtnCls),e.el_.innerText=this._stretch?"拉伸":"标准",e.el_.title=this._stretch?"点击切换到标准显示":"点击切换到拉伸显示";var i=function(){t._stretch=!t._stretch,e.el_.innerText=t._stretch?"拉伸":"标准",e.el_.title=t._stretch?"点击切换到标准显示":"点击切换到拉伸显示";var i=t.$el.querySelector("video");i?i.style.objectFit=t._stretch?"fill":"":t.player.tech_.setStretch(t._stretch)};e.on("click",i),e.on("tap",i)}},destroyVideoJS:function(){this.player&&this.player.dispose&&(this.player.dispose(),this.player=null),this.player&&this.player.destroy&&(this.player.destroy(),this.player=null),this.timer&&(clearInterval(this.timer),this.timer=0),this.$el.querySelector(".video-inner").innerHTML='\n                <div class="alt">\n                    <table>\n                        <tr>\n                            <td></td>\n                        </tr>\n                    </table>\n                </div>\n            ',this.$emit("update:loading",!1)},getCurrentTime:function(){return this.player&&"function"==typeof this.player.currentTime?this.player.currentTime():-1},snap:function(){this.player&&this.player.cameraButton&&(this.snapFromOutside=!0,this.player.cameraButton.el().click())},play:function(){this.player&&this.player.play()},pause:function(){this.player&&this.player.pause()},paused:function(){return!!this.player&&this.player.paused()},setMuted:function(t){this.player&&this.player.muted(!!t)},getMuted:function(){return!!this.player&&this.player.muted()},convertDataURIToBinary:function(t){for(var e=t.indexOf(";base64,")+";base64,".length,i=t.substring(e),n=window.atob(i),r=n.length,o=new Uint8Array(r),s=0;s<r;s++)o[s]=n.charCodeAt(s);return o},convertDataURIToMIME:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=t.indexOf("data:");0==e&&(e+="data:".length);var i=t.indexOf(";base64,");return e>=0&&i>e?t.substring(e,i):""},saveFile:function(t){if(this.snapFromOutside)return this.$emit("snapOutside",t),void(this.snapFromOutside=!1);this.$emit("snapInside",t);var e=this.convertDataURIToBinary(t),i=this.convertDataURIToMIME(t),n=".jpg",r=i.indexOf("/");r>0&&(n="."+i.substring(r+1)),u.a.saveAs(new Blob([e],{type:i}),(this.videoTitle||"snap")+n)},debounceInitVideoJS:o.a.debounce(function(){this.initVideoJS()},500),initVideoJS:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(this.$el.querySelector(".video-inner").innerHTML=this.videoHtml,this.src)if(this.rtmp||videojs.browser.IE_VERSION&&this.http&&this.flv){var i=document.title;this.player=videojs(this.$el.querySelector("video"),{notSupportedMessage:"您的浏览器没有安装或开启Flash",tech:["flash"],autoplay:this.autoplay,stretch:this.stretch,fluent:this.fluent,controls:this.controls}),this.player.snapshot(),this.player.one("ready",function(){videojs.browser.IE_VERSION&&t.player.tech_.off("fullscreentoggle"),t.$emit("update:loading",!1),document.title=i,t.player.hotkeys({volumeStep:.1,seekStep:5,enableModifiersForNumbers:!1,enableVolumeScroll:!1}),t.player.muted(t.muted),t.player.on("ended",function(){t.$emit("ended")}),t.player.on("error",function(e){t.$emit("error",e)}),t.player.on("timeupdate",function(){t.$emit("timeupdate",t.player.currentTime())}),t.player.on("pause",function(){t.$emit("pause",t.player.currentTime())}),t.player.on("playing",function(){t.$emit("play",t.player.currentTime())}),t.player.on("snap",function(e,i){t.saveFile(i)}),t.showCustomButton&&t.customFlashButton();var e=t.$el.querySelectorAll(".video-js .vjs-control-bar .vjs-button"),n=!0,r=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(n=(s=a.next()).done);n=!0)s.value.addEventListener("mouseup",function(){t.player.focus()})}catch(t){r=!0,o=t}finally{try{!n&&a.return&&a.return()}finally{if(r)throw o}}if(!t.hasUsableSWF()){var l=t.$el.querySelector(".vjs-poster");l&&(l.style.display="none")}document.getElementsByClassName("vjs-picture-in-picture-control")[0].style.display="none"}),document.title=i,this.player.on("error",function(e){(e=t.$el.querySelector(".vjs-error .vjs-error-display .vjs-modal-dialog-content")).innerHTML="<a href='http://www.adobe.com/go/getflashplayer' target='_blank'>"+e.textContent+"</a>"})}else if((this.http||this.ws)&&this.flv){this.debug||(flvjs.LoggingControl.enableWarn=!1,flvjs.LoggingControl.enableInfo=!1,flvjs.LoggingControl.enableVerbose=!1,flvjs.LoggingControl.enableDebug=!1);var n={isLive:this.live,cors:!0,withCredentials:!1};void 0!=this.hasaudio&&(n.hasAudio=this.hasaudio),void 0!=this.hasvideo&&(n.hasVideo=this.hasvideo),this.player=videojs(this.$el.querySelector("video"),{techOrder:["flvjs","html5"],controls:this.controls,flvjs:{mediaDataSource:n,config:{enableWorker:!1,enableStashBuffer:!1,accurateSeek:!0}}}),this.player.snapshot(),this.player.one("ready",function(){t.$emit("update:loading",!1),t._stretch&&(t.player.tech_.el_.style.objectFit="fill"),t.player.hotkeys({volumeStep:.1,seekStep:5,enableModifiersForNumbers:!1,enableVolumeScroll:!1}),t.player.muted(t.muted),t.player.one("canplay",function(){t.autoplay&&t.player.tech_.flvPlayer.play().catch(function(){})}),t.player.on("timeupdate",function(){t.$emit("timeupdate",t.player.currentTime())}),t.player.on("error",function(e){t.$emit("error",e)}),t.player.on("ended",function(){t.live&&t.reload(),t.$emit("ended")}),t.player.on("pause",function(){t.$emit("pause",t.player.currentTime())}),t.player.on("playing",function(){t.$emit("play",t.player.currentTime())}),t.player.on("snap",function(e,i){t.saveFile(i)}),t.showCustomButton&&t.customH5Button();var e=t.$el.querySelectorAll(".video-js .vjs-control-bar .vjs-button"),i=!0,n=!1,r=void 0;try{for(var o,s=e[Symbol.iterator]();!(i=(o=s.next()).done);i=!0)o.value.addEventListener("mouseup",function(){t.player.focus()})}catch(t){n=!0,r=t}finally{try{!i&&s.return&&s.return()}finally{if(n)throw r}}})}else if(this.http&&this.m3u8){var r=(new Date).getTime();this.$emit("update:loading",!0),this.timer=setInterval(function(){var i=(new Date).getTime();if(t.timeout>0&&i-r>1e3*t.timeout)return clearInterval(t.timer),t.timer=0,t.$emit("update:loading",!1),void t.$emit("message",{type:"error",message:"加载播放资源失败"});a.a.head(t.src).then(function(i){clearInterval(t.timer),t.timer=0;var n=document.title;""!=t.resolution?(-1==t.resolution.indexOf(t.resolutiondefault)&&(t.resolutiondefault="yh"),t.player=videojs(t.$el.querySelector("video"),{autoplay:t.autoplay,stretch:t.stretch,controls:t.controls,plugins:{videoJsResolutionSwitcher:{default:t.resolutiondefault,dynamicLabel:!0}}})):t.player=videojs(t.$el.querySelector("video"),{autoplay:t.autoplay,stretch:t.stretch,controls:t.controls}),t.loadResolutionlist(t.player),t.player.snapshot(),t.player.one("ready",function(){0==e||t.live||(t.player.currentTime(e),t.player.handleTechSeeked_()),t.$emit("update:loading",!1),document.title=n,t.player.hotkeys({volumeStep:.1,seekStep:5,enableModifiersForNumbers:!1,enableVolumeScroll:!1}),t.player.muted(t.muted),t.player.on("ended",function(){t.$emit("ended")}),t.player.on("timeupdate",function(){t.$emit("timeupdate",t.player.currentTime())}),t.player.on("pause",function(){t.$emit("pause",t.player.currentTime())}),t.player.on("playing",function(){t.$emit("play",t.player.currentTime())}),t.player.on("snap",function(e,i){t.saveFile(i)}),t.player.on("error",function(i,n){t.$emit("error",i),t.destroyVideoJS(),t.live?t.initVideoJS():(e+=3,t.initVideoJS(e))}),t.showCustomButton&&t.customH5Button();var i=t.$el.querySelectorAll(".video-js .vjs-control-bar .vjs-button"),r=!0,o=!1,s=void 0;try{for(var a,l=i[Symbol.iterator]();!(r=(a=l.next()).done);r=!0)a.value.addEventListener("mouseup",function(){t.player.focus()})}catch(t){o=!0,s=t}finally{try{!r&&l.return&&l.return()}finally{if(o)throw s}}}),document.title=n,t.player&&t.player.reloadSourceOnError(),t.player&&t.currentTime>0&&(videojs.browser.IE_VERSION?t.player.on("loadeddata",function(){setTimeout(function(){t.player.currentTime(t.currentTime)},500)}):t.player.currentTime(t.currentTime)),t.autoplay&&setTimeout(function(){var e=t.$el.querySelector(".vjs-big-play-button");if(e){var i=window.getComputedStyle(e);i&&"block"===i.display&&e.click()}},1e3)}).catch(function(t){})},500)}else this.ws?(this.player=new EPlayer.Player(this.src,{canvas:this.$el.querySelector(".video-inner canvas"),pauseWhenHidden:this.pauseWhenHidden,audio:!this.muted,videoBufferSize:this.videoBufferSize,audioBufferSize:this.audioBufferSize}),this.muted||document.body.addEventListener("touchstart",function(){t.player.audioOut.unlock(function(){})})):videojs(this.$el.querySelector("video"),{})}}}},mFPK:function(t,e){var i;i=function(){return this}();try{i=i||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(i=window)}t.exports=i},psq8:function(t,e,i){(function(t,n){var r;(function(){function o(t,e,i){switch(i.length){case 0:return t.call(e);case 1:return t.call(e,i[0]);case 2:return t.call(e,i[0],i[1]);case 3:return t.call(e,i[0],i[1],i[2])}return t.apply(e,i)}function s(t,e,i,n){for(var r=-1,o=null==t?0:t.length;++r<o;){var s=t[r];e(n,s,i(s),t)}return n}function a(t,e){for(var i=-1,n=null==t?0:t.length;++i<n&&!1!==e(t[i],i,t););return t}function l(t,e){for(var i=-1,n=null==t?0:t.length;++i<n;)if(!e(t[i],i,t))return!1;return!0}function u(t,e){for(var i=-1,n=null==t?0:t.length,r=0,o=[];++i<n;){var s=t[i];e(s,i,t)&&(o[r++]=s)}return o}function h(t,e){return!(null==t||!t.length)&&x(t,e,0)>-1}function c(t,e,i){for(var n=-1,r=null==t?0:t.length;++n<r;)if(i(e,t[n]))return!0;return!1}function p(t,e){for(var i=-1,n=null==t?0:t.length,r=Array(n);++i<n;)r[i]=e(t[i],i,t);return r}function f(t,e){for(var i=-1,n=e.length,r=t.length;++i<n;)t[r+i]=e[i];return t}function d(t,e,i,n){var r=-1,o=null==t?0:t.length;for(n&&o&&(i=t[++r]);++r<o;)i=e(i,t[r],r,t);return i}function v(t,e,i,n){var r=null==t?0:t.length;for(n&&r&&(i=t[--r]);r--;)i=e(i,t[r],r,t);return i}function g(t,e){for(var i=-1,n=null==t?0:t.length;++i<n;)if(e(t[i],i,t))return!0;return!1}function m(t){return t.match(je)||[]}function y(t,e,i){var n;return i(t,function(t,i,r){if(e(t,i,r))return n=i,!1}),n}function _(t,e,i,n){for(var r=t.length,o=i+(n?1:-1);n?o--:++o<r;)if(e(t[o],o,t))return o;return-1}function x(t,e,i){return e==e?function(t,e,i){for(var n=i-1,r=t.length;++n<r;)if(t[n]===e)return n;return-1}(t,e,i):_(t,E,i)}function b(t,e,i,n){for(var r=i-1,o=t.length;++r<o;)if(n(t[r],e))return r;return-1}function E(t){return t!=t}function w(t,e){var i=null==t?0:t.length;return i?T(t,e)/i:xt}function j(t){return function(e){return null==e?U:e[t]}}function C(t){return function(e){return null==t?U:t[e]}}function S(t,e,i,n,r){return r(t,function(t,r,o){i=n?(n=!1,t):e(i,t,r,o)}),i}function T(t,e){for(var i,n=-1,r=t.length;++n<r;){var o=e(t[n]);o!==U&&(i=i===U?o:i+o)}return i}function R(t,e){for(var i=-1,n=Array(t);++i<t;)n[i]=e(i);return n}function I(t){return function(e){return t(e)}}function O(t,e){return p(e,function(e){return t[e]})}function A(t,e){return t.has(e)}function L(t,e){for(var i=-1,n=t.length;++i<n&&x(e,t[i],0)>-1;);return i}function M(t,e){for(var i=t.length;i--&&x(e,t[i],0)>-1;);return i}function k(t){return"\\"+si[t]}function P(t){return ti.test(t)}function D(t){return ei.test(t)}function F(t){var e=-1,i=Array(t.size);return t.forEach(function(t,n){i[++e]=[n,t]}),i}function N(t,e){return function(i){return t(e(i))}}function G(t,e){for(var i=-1,n=t.length,r=0,o=[];++i<n;){var s=t[i];s!==e&&s!==K||(t[i]=K,o[r++]=i)}return o}function W(t){var e=-1,i=Array(t.size);return t.forEach(function(t){i[++e]=t}),i}function z(t){return P(t)?function(t){for(var e=Qe.lastIndex=0;Qe.test(t);)++e;return e}(t):wi(t)}function B(t){return P(t)?function(t){return t.match(Qe)||[]}(t):function(t){return t.split("")}(t)}function Y(t){return t.match($e)||[]}var U,V=200,X="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",H="Expected a function",Z="__lodash_hash_undefined__",K="__lodash_placeholder__",J=1,q=2,Q=4,$=1,tt=2,et=1,it=2,nt=4,rt=8,ot=16,st=32,at=64,lt=128,ut=256,ht=512,ct=30,pt="...",ft=800,dt=16,vt=1,gt=2,mt=1/0,yt=9007199254740991,_t=1.7976931348623157e308,xt=NaN,bt=4294967295,Et=bt-1,wt=bt>>>1,jt=[["ary",lt],["bind",et],["bindKey",it],["curry",rt],["curryRight",ot],["flip",ht],["partial",st],["partialRight",at],["rearg",ut]],Ct="[object Arguments]",St="[object Array]",Tt="[object AsyncFunction]",Rt="[object Boolean]",It="[object Date]",Ot="[object DOMException]",At="[object Error]",Lt="[object Function]",Mt="[object GeneratorFunction]",kt="[object Map]",Pt="[object Number]",Dt="[object Null]",Ft="[object Object]",Nt="[object Proxy]",Gt="[object RegExp]",Wt="[object Set]",zt="[object String]",Bt="[object Symbol]",Yt="[object Undefined]",Ut="[object WeakMap]",Vt="[object WeakSet]",Xt="[object ArrayBuffer]",Ht="[object DataView]",Zt="[object Float32Array]",Kt="[object Float64Array]",Jt="[object Int8Array]",qt="[object Int16Array]",Qt="[object Int32Array]",$t="[object Uint8Array]",te="[object Uint8ClampedArray]",ee="[object Uint16Array]",ie="[object Uint32Array]",ne=/\b__p \+= '';/g,re=/\b(__p \+=) '' \+/g,oe=/(__e\(.*?\)|\b__t\)) \+\n'';/g,se=/&(?:amp|lt|gt|quot|#39);/g,ae=/[&<>"']/g,le=RegExp(se.source),ue=RegExp(ae.source),he=/<%-([\s\S]+?)%>/g,ce=/<%([\s\S]+?)%>/g,pe=/<%=([\s\S]+?)%>/g,fe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,de=/^\w*$/,ve=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ge=/[\\^$.*+?()[\]{}|]/g,me=RegExp(ge.source),ye=/^\s+|\s+$/g,_e=/^\s+/,xe=/\s+$/,be=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ee=/\{\n\/\* \[wrapped with (.+)\] \*/,we=/,? & /,je=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Ce=/\\(\\)?/g,Se=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Te=/\w*$/,Re=/^[-+]0x[0-9a-f]+$/i,Ie=/^0b[01]+$/i,Oe=/^\[object .+?Constructor\]$/,Ae=/^0o[0-7]+$/i,Le=/^(?:0|[1-9]\d*)$/,Me=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ke=/($^)/,Pe=/['\n\r\u2028\u2029\\]/g,De="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Fe="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ne="["+Fe+"]",Ge="["+De+"]",We="[a-z\\xdf-\\xf6\\xf8-\\xff]",ze="\\ud83c[\\udffb-\\udfff]",Be="(?:\\ud83c[\\udde6-\\uddff]){2}",Ye="[\\ud800-\\udbff][\\udc00-\\udfff]",Ue="[A-Z\\xc0-\\xd6\\xd8-\\xde]",Ve="(?:"+We+"|[^\\ud800-\\udfff\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde])",Xe="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",He="[\\ufe0e\\ufe0f]?"+Xe+("(?:\\u200d(?:"+["[^\\ud800-\\udfff]",Be,Ye].join("|")+")[\\ufe0e\\ufe0f]?"+Xe+")*"),Ze="(?:"+["[\\u2700-\\u27bf]",Be,Ye].join("|")+")"+He,Ke="(?:"+["[^\\ud800-\\udfff]"+Ge+"?",Ge,Be,Ye,"[\\ud800-\\udfff]"].join("|")+")",Je=RegExp("['’]","g"),qe=RegExp(Ge,"g"),Qe=RegExp(ze+"(?="+ze+")|"+Ke+He,"g"),$e=RegExp([Ue+"?"+We+"+(?:['’](?:d|ll|m|re|s|t|ve))?(?="+[Ne,Ue,"$"].join("|")+")","(?:[A-Z\\xc0-\\xd6\\xd8-\\xde]|[^\\ud800-\\udfff\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde])+(?:['’](?:D|LL|M|RE|S|T|VE))?(?="+[Ne,Ue+Ve,"$"].join("|")+")",Ue+"?"+Ve+"+(?:['’](?:d|ll|m|re|s|t|ve))?",Ue+"+(?:['’](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])","\\d+",Ze].join("|"),"g"),ti=RegExp("[\\u200d\\ud800-\\udfff"+De+"\\ufe0e\\ufe0f]"),ei=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,ii=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],ni=-1,ri={};ri[Zt]=ri[Kt]=ri[Jt]=ri[qt]=ri[Qt]=ri[$t]=ri[te]=ri[ee]=ri[ie]=!0,ri[Ct]=ri[St]=ri[Xt]=ri[Rt]=ri[Ht]=ri[It]=ri[At]=ri[Lt]=ri[kt]=ri[Pt]=ri[Ft]=ri[Gt]=ri[Wt]=ri[zt]=ri[Ut]=!1;var oi={};oi[Ct]=oi[St]=oi[Xt]=oi[Ht]=oi[Rt]=oi[It]=oi[Zt]=oi[Kt]=oi[Jt]=oi[qt]=oi[Qt]=oi[kt]=oi[Pt]=oi[Ft]=oi[Gt]=oi[Wt]=oi[zt]=oi[Bt]=oi[$t]=oi[te]=oi[ee]=oi[ie]=!0,oi[At]=oi[Lt]=oi[Ut]=!1;var si={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ai=parseFloat,li=parseInt,ui="object"==typeof t&&t&&t.Object===Object&&t,hi="object"==typeof self&&self&&self.Object===Object&&self,ci=ui||hi||Function("return this")(),pi="object"==typeof e&&e&&!e.nodeType&&e,fi=pi&&"object"==typeof n&&n&&!n.nodeType&&n,di=fi&&fi.exports===pi,vi=di&&ui.process,gi=function(){try{return fi&&fi.require&&fi.require("util").types||vi&&vi.binding&&vi.binding("util")}catch(t){}}(),mi=gi&&gi.isArrayBuffer,yi=gi&&gi.isDate,_i=gi&&gi.isMap,xi=gi&&gi.isRegExp,bi=gi&&gi.isSet,Ei=gi&&gi.isTypedArray,wi=j("length"),ji=C({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),Ci=C({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"}),Si=C({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),Ti=function t(e){function i(t){if(io(t)&&!Xa(t)&&!(t instanceof C)){if(t instanceof r)return t;if(Xo.call(t,"__wrapped__"))return Rr(t)}return new r(t)}function n(){}function r(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=U}function C(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=bt,this.__views__=[]}function je(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var n=t[e];this.set(n[0],n[1])}}function De(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var n=t[e];this.set(n[0],n[1])}}function Fe(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var n=t[e];this.set(n[0],n[1])}}function Ne(t){var e=-1,i=null==t?0:t.length;for(this.__data__=new Fe;++e<i;)this.add(t[e])}function Ge(t){var e=this.__data__=new De(t);this.size=e.size}function We(t,e){var i=Xa(t),n=!i&&Va(t),r=!i&&!n&&Za(t),o=!i&&!n&&!r&&$a(t),s=i||n||r||o,a=s?R(t.length,Go):[],l=a.length;for(var u in t)!e&&!Xo.call(t,u)||s&&("length"==u||r&&("offset"==u||"parent"==u)||o&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||fr(u,l))||a.push(u);return a}function ze(t){var e=t.length;return e?t[Qi(0,e-1)]:U}function Be(t,e,i){(i===U||Zr(t[e],i))&&(i!==U||e in t)||He(t,e,i)}function Ye(t,e,i){var n=t[e];Xo.call(t,e)&&Zr(n,i)&&(i!==U||e in t)||He(t,e,i)}function Ue(t,e){for(var i=t.length;i--;)if(Zr(t[i][0],e))return i;return-1}function Ve(t,e,i,n){return Us(t,function(t,r,o){e(n,t,i(t),o)}),n}function Xe(t,e){return t&&Rn(e,mo(e),t)}function He(t,e,i){"__proto__"==e&&hs?hs(t,e,{configurable:!0,enumerable:!0,value:i,writable:!0}):t[e]=i}function Ze(t,e){for(var i=-1,n=e.length,r=Lo(n),o=null==t;++i<n;)r[i]=o?U:vo(t,e[i]);return r}function Ke(t,e,i){return t==t&&(i!==U&&(t=t<=i?t:i),e!==U&&(t=t>=e?t:e)),t}function Qe(t,e,i,n,r,o){var s,l=e&J,u=e&q,h=e&Q;if(i&&(s=r?i(t,n,r,o):i(t)),s!==U)return s;if(!eo(t))return t;var c=Xa(t);if(c){if(s=function(t){var e=t.length,i=new t.constructor(e);return e&&"string"==typeof t[0]&&Xo.call(t,"index")&&(i.index=t.index,i.input=t.input),i}(t),!l)return Tn(t,s)}else{var p=ia(t),f=p==Lt||p==Mt;if(Za(t))return bn(t,l);if(p==Ft||p==Ct||f&&!r){if(s=u||f?{}:cr(t),!l)return u?function(t,e){return Rn(t,ea(t),e)}(t,function(t,e){return t&&Rn(e,yo(e),t)}(s,t)):function(t,e){return Rn(t,ta(t),e)}(t,Xe(s,t))}else{if(!oi[p])return r?t:{};s=function(t,e,i){var n=t.constructor;switch(e){case Xt:return En(t);case Rt:case It:return new n(+t);case Ht:return function(t,e){var i=e?En(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.byteLength)}(t,i);case Zt:case Kt:case Jt:case qt:case Qt:case $t:case te:case ee:case ie:return wn(t,i);case kt:return new n;case Pt:case zt:return new n(t);case Gt:return function(t){var e=new t.constructor(t.source,Te.exec(t));return e.lastIndex=t.lastIndex,e}(t);case Wt:return new n;case Bt:return function(t){return zs?Fo(zs.call(t)):{}}(t)}}(t,p,l)}}o||(o=new Ge);var d=o.get(t);if(d)return d;if(o.set(t,s),Qa(t))return t.forEach(function(n){s.add(Qe(n,e,i,n,t,o))}),s;if(Ja(t))return t.forEach(function(n,r){s.set(r,Qe(n,e,i,r,t,o))}),s;var v=c?U:(h?u?nr:ir:u?yo:mo)(t);return a(v||t,function(n,r){v&&(n=t[r=n]),Ye(s,r,Qe(n,e,i,r,t,o))}),s}function $e(t,e,i){var n=i.length;if(null==t)return!n;for(t=Fo(t);n--;){var r=i[n],o=e[r],s=t[r];if(s===U&&!(r in t)||!o(s))return!1}return!0}function ti(t,e,i){if("function"!=typeof t)throw new Wo(H);return oa(function(){t.apply(U,i)},e)}function ei(t,e,i,n){var r=-1,o=h,s=!0,a=t.length,l=[],u=e.length;if(!a)return l;i&&(e=p(e,I(i))),n?(o=c,s=!1):e.length>=V&&(o=A,s=!1,e=new Ne(e));t:for(;++r<a;){var f=t[r],d=null==i?f:i(f);if(f=n||0!==f?f:0,s&&d==d){for(var v=u;v--;)if(e[v]===d)continue t;l.push(f)}else o(e,d,n)||l.push(f)}return l}function si(t,e){var i=!0;return Us(t,function(t,n,r){return i=!!e(t,n,r)}),i}function ui(t,e,i){for(var n=-1,r=t.length;++n<r;){var o=t[n],s=e(o);if(null!=s&&(a===U?s==s&&!so(s):i(s,a)))var a=s,l=o}return l}function hi(t,e){var i=[];return Us(t,function(t,n,r){e(t,n,r)&&i.push(t)}),i}function pi(t,e,i,n,r){var o=-1,s=t.length;for(i||(i=pr),r||(r=[]);++o<s;){var a=t[o];e>0&&i(a)?e>1?pi(a,e-1,i,n,r):f(r,a):n||(r[r.length]=a)}return r}function fi(t,e){return t&&Xs(t,e,mo)}function vi(t,e){return t&&Hs(t,e,mo)}function gi(t,e){return u(e,function(e){return Qr(t[e])})}function wi(t,e){for(var i=0,n=(e=_n(e,t)).length;null!=t&&i<n;)t=t[Sr(e[i++])];return i&&i==n?t:U}function Ri(t,e,i){var n=e(t);return Xa(t)?n:f(n,i(t))}function Ii(t){return null==t?t===U?Yt:Dt:us&&us in Fo(t)?function(t){var e=Xo.call(t,us),i=t[us];try{t[us]=U;var n=!0}catch(t){}var r=Ko.call(t);return n&&(e?t[us]=i:delete t[us]),r}(t):function(t){return Ko.call(t)}(t)}function Oi(t,e){return t>e}function Ai(t,e){return null!=t&&Xo.call(t,e)}function Li(t,e){return null!=t&&e in Fo(t)}function Mi(t,e,i){for(var n=i?c:h,r=t[0].length,o=t.length,s=o,a=Lo(o),l=1/0,u=[];s--;){var f=t[s];s&&e&&(f=p(f,I(e))),l=Es(f.length,l),a[s]=!i&&(e||r>=120&&f.length>=120)?new Ne(s&&f):U}f=t[0];var d=-1,v=a[0];t:for(;++d<r&&u.length<l;){var g=f[d],m=e?e(g):g;if(g=i||0!==g?g:0,!(v?A(v,m):n(u,m,i))){for(s=o;--s;){var y=a[s];if(!(y?A(y,m):n(t[s],m,i)))continue t}v&&v.push(m),u.push(g)}}return u}function ki(t,e,i){var n=null==(t=br(t,e=_n(e,t)))?t:t[Sr(Mr(e))];return null==n?U:o(n,t,i)}function Pi(t){return io(t)&&Ii(t)==Ct}function Di(t,e,i,n,r){return t===e||(null==t||null==e||!io(t)&&!io(e)?t!=t&&e!=e:function(t,e,i,n,r,o){var s=Xa(t),a=Xa(e),l=s?St:ia(t),u=a?St:ia(e),h=(l=l==Ct?Ft:l)==Ft,c=(u=u==Ct?Ft:u)==Ft,p=l==u;if(p&&Za(t)){if(!Za(e))return!1;s=!0,h=!1}if(p&&!h)return o||(o=new Ge),s||$a(t)?tr(t,e,i,n,r,o):function(t,e,i,n,r,o,s){switch(i){case Ht:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case Xt:return!(t.byteLength!=e.byteLength||!o(new es(t),new es(e)));case Rt:case It:case Pt:return Zr(+t,+e);case At:return t.name==e.name&&t.message==e.message;case Gt:case zt:return t==e+"";case kt:var a=F;case Wt:var l=n&$;if(a||(a=W),t.size!=e.size&&!l)return!1;var u=s.get(t);if(u)return u==e;n|=tt,s.set(t,e);var h=tr(a(t),a(e),n,r,o,s);return s.delete(t),h;case Bt:if(zs)return zs.call(t)==zs.call(e)}return!1}(t,e,l,i,n,r,o);if(!(i&$)){var f=h&&Xo.call(t,"__wrapped__"),d=c&&Xo.call(e,"__wrapped__");if(f||d){var v=f?t.value():t,g=d?e.value():e;return o||(o=new Ge),r(v,g,i,n,o)}}return!!p&&(o||(o=new Ge),function(t,e,i,n,r,o){var s=i&$,a=ir(t),l=a.length;if(l!=ir(e).length&&!s)return!1;for(var u=l;u--;){var h=a[u];if(!(s?h in e:Xo.call(e,h)))return!1}var c=o.get(t);if(c&&o.get(e))return c==e;var p=!0;o.set(t,e),o.set(e,t);for(var f=s;++u<l;){h=a[u];var d=t[h],v=e[h];if(n)var g=s?n(v,d,h,e,t,o):n(d,v,h,t,e,o);if(!(g===U?d===v||r(d,v,i,n,o):g)){p=!1;break}f||(f="constructor"==h)}if(p&&!f){var m=t.constructor,y=e.constructor;m!=y&&"constructor"in t&&"constructor"in e&&!("function"==typeof m&&m instanceof m&&"function"==typeof y&&y instanceof y)&&(p=!1)}return o.delete(t),o.delete(e),p}(t,e,i,n,r,o))}(t,e,i,n,Di,r))}function Fi(t,e,i,n){var r=i.length,o=r,s=!n;if(null==t)return!o;for(t=Fo(t);r--;){var a=i[r];if(s&&a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}for(;++r<o;){var l=(a=i[r])[0],u=t[l],h=a[1];if(s&&a[2]){if(u===U&&!(l in t))return!1}else{var c=new Ge;if(n)var p=n(u,h,l,t,e,c);if(!(p===U?Di(h,u,$|tt,n,c):p))return!1}}return!0}function Ni(t){return!(!eo(t)||function(t){return!!Zo&&Zo in t}(t))&&(Qr(t)?Qo:Oe).test(Tr(t))}function Gi(t){return"function"==typeof t?t:null==t?Co:"object"==typeof t?Xa(t)?Vi(t[0],t[1]):Ui(t):Io(t)}function Wi(t){if(!mr(t))return xs(t);var e=[];for(var i in Fo(t))Xo.call(t,i)&&"constructor"!=i&&e.push(i);return e}function zi(t){if(!eo(t))return function(t){var e=[];if(null!=t)for(var i in Fo(t))e.push(i);return e}(t);var e=mr(t),i=[];for(var n in t)("constructor"!=n||!e&&Xo.call(t,n))&&i.push(n);return i}function Bi(t,e){return t<e}function Yi(t,e){var i=-1,n=Kr(t)?Lo(t.length):[];return Us(t,function(t,r,o){n[++i]=e(t,r,o)}),n}function Ui(t){var e=lr(t);return 1==e.length&&e[0][2]?_r(e[0][0],e[0][1]):function(i){return i===t||Fi(i,t,e)}}function Vi(t,e){return vr(t)&&yr(e)?_r(Sr(t),e):function(i){var n=vo(i,t);return n===U&&n===e?go(i,t):Di(e,n,$|tt)}}function Xi(t,e,i,n,r){t!==e&&Xs(e,function(o,s){if(eo(o))r||(r=new Ge),function(t,e,i,n,r,o,s){var a=Er(t,i),l=Er(e,i),u=s.get(l);if(u)return void Be(t,i,u);var h=o?o(a,l,i+"",t,e,s):U,c=h===U;if(c){var p=Xa(l),f=!p&&Za(l),d=!p&&!f&&$a(l);h=l,p||f||d?Xa(a)?h=a:Jr(a)?h=Tn(a):f?(c=!1,h=bn(l,!0)):d?(c=!1,h=wn(l,!0)):h=[]:ro(l)||Va(l)?(h=a,Va(a)?h=po(a):eo(a)&&!Qr(a)||(h=cr(l))):c=!1}c&&(s.set(l,h),r(h,l,n,o,s),s.delete(l)),Be(t,i,h)}(t,e,s,i,Xi,n,r);else{var a=n?n(Er(t,s),o,s+"",t,e,r):U;a===U&&(a=o),Be(t,s,a)}},yo)}function Hi(t,e){var i=t.length;if(i)return fr(e+=e<0?i:0,i)?t[e]:U}function Zi(t,e,i){var n=-1;return e=p(e.length?e:[Co],I(sr())),function(t,e){var i=t.length;for(t.sort(e);i--;)t[i]=t[i].value;return t}(Yi(t,function(t,i,r){return{criteria:p(e,function(e){return e(t)}),index:++n,value:t}}),function(t,e){return function(t,e,i){for(var n=-1,r=t.criteria,o=e.criteria,s=r.length,a=i.length;++n<s;){var l=jn(r[n],o[n]);if(l)return n>=a?l:l*("desc"==i[n]?-1:1)}return t.index-e.index}(t,e,i)})}function Ki(t,e,i){for(var n=-1,r=e.length,o={};++n<r;){var s=e[n],a=wi(t,s);i(a,s)&&en(o,_n(s,t),a)}return o}function Ji(t,e,i,n){var r=n?b:x,o=-1,s=e.length,a=t;for(t===e&&(e=Tn(e)),i&&(a=p(t,I(i)));++o<s;)for(var l=0,u=e[o],h=i?i(u):u;(l=r(a,h,l,n))>-1;)a!==t&&ss.call(a,l,1),ss.call(t,l,1);return t}function qi(t,e){for(var i=t?e.length:0,n=i-1;i--;){var r=e[i];if(i==n||r!==o){var o=r;fr(r)?ss.call(t,r,1):cn(t,r)}}return t}function Qi(t,e){return t+vs(Cs()*(e-t+1))}function $i(t,e){var i="";if(!t||e<1||e>yt)return i;do{e%2&&(i+=t),(e=vs(e/2))&&(t+=t)}while(e);return i}function tn(t,e){return sa(xr(t,e,Co),t+"")}function en(t,e,i,n){if(!eo(t))return t;for(var r=-1,o=(e=_n(e,t)).length,s=o-1,a=t;null!=a&&++r<o;){var l=Sr(e[r]),u=i;if(r!=s){var h=a[l];(u=n?n(h,l,a):U)===U&&(u=eo(h)?h:fr(e[r+1])?[]:{})}Ye(a,l,u),a=a[l]}return t}function nn(t,e,i){var n=-1,r=t.length;e<0&&(e=-e>r?0:r+e),(i=i>r?r:i)<0&&(i+=r),r=e>i?0:i-e>>>0,e>>>=0;for(var o=Lo(r);++n<r;)o[n]=t[n+e];return o}function rn(t,e){var i;return Us(t,function(t,n,r){return!(i=e(t,n,r))}),!!i}function on(t,e,i){var n=0,r=null==t?n:t.length;if("number"==typeof e&&e==e&&r<=wt){for(;n<r;){var o=n+r>>>1,s=t[o];null!==s&&!so(s)&&(i?s<=e:s<e)?n=o+1:r=o}return r}return sn(t,e,Co,i)}function sn(t,e,i,n){e=i(e);for(var r=0,o=null==t?0:t.length,s=e!=e,a=null===e,l=so(e),u=e===U;r<o;){var h=vs((r+o)/2),c=i(t[h]),p=c!==U,f=null===c,d=c==c,v=so(c);if(s)var g=n||d;else g=u?d&&(n||p):a?d&&p&&(n||!f):l?d&&p&&!f&&(n||!v):!f&&!v&&(n?c<=e:c<e);g?r=h+1:o=h}return Es(o,Et)}function an(t,e){for(var i=-1,n=t.length,r=0,o=[];++i<n;){var s=t[i],a=e?e(s):s;if(!i||!Zr(a,l)){var l=a;o[r++]=0===s?0:s}}return o}function ln(t){return"number"==typeof t?t:so(t)?xt:+t}function un(t){if("string"==typeof t)return t;if(Xa(t))return p(t,un)+"";if(so(t))return Bs?Bs.call(t):"";var e=t+"";return"0"==e&&1/t==-mt?"-0":e}function hn(t,e,i){var n=-1,r=h,o=t.length,s=!0,a=[],l=a;if(i)s=!1,r=c;else if(o>=V){var u=e?null:Qs(t);if(u)return W(u);s=!1,r=A,l=new Ne}else l=e?[]:a;t:for(;++n<o;){var p=t[n],f=e?e(p):p;if(p=i||0!==p?p:0,s&&f==f){for(var d=l.length;d--;)if(l[d]===f)continue t;e&&l.push(f),a.push(p)}else r(l,f,i)||(l!==a&&l.push(f),a.push(p))}return a}function cn(t,e){return null==(t=br(t,e=_n(e,t)))||delete t[Sr(Mr(e))]}function pn(t,e,i,n){return en(t,e,i(wi(t,e)),n)}function fn(t,e,i,n){for(var r=t.length,o=n?r:-1;(n?o--:++o<r)&&e(t[o],o,t););return i?nn(t,n?0:o,n?o+1:r):nn(t,n?o+1:0,n?r:o)}function dn(t,e){var i=t;return i instanceof C&&(i=i.value()),d(e,function(t,e){return e.func.apply(e.thisArg,f([t],e.args))},i)}function vn(t,e,i){var n=t.length;if(n<2)return n?hn(t[0]):[];for(var r=-1,o=Lo(n);++r<n;)for(var s=t[r],a=-1;++a<n;)a!=r&&(o[r]=ei(o[r]||s,t[a],e,i));return hn(pi(o,1),e,i)}function gn(t,e,i){for(var n=-1,r=t.length,o=e.length,s={};++n<r;){var a=n<o?e[n]:U;i(s,t[n],a)}return s}function mn(t){return Jr(t)?t:[]}function yn(t){return"function"==typeof t?t:Co}function _n(t,e){return Xa(t)?t:vr(t,e)?[t]:aa(fo(t))}function xn(t,e,i){var n=t.length;return i=i===U?n:i,!e&&i>=n?t:nn(t,e,i)}function bn(t,e){if(e)return t.slice();var i=t.length,n=is?is(i):new t.constructor(i);return t.copy(n),n}function En(t){var e=new t.constructor(t.byteLength);return new es(e).set(new es(t)),e}function wn(t,e){var i=e?En(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.length)}function jn(t,e){if(t!==e){var i=t!==U,n=null===t,r=t==t,o=so(t),s=e!==U,a=null===e,l=e==e,u=so(e);if(!a&&!u&&!o&&t>e||o&&s&&l&&!a&&!u||n&&s&&l||!i&&l||!r)return 1;if(!n&&!o&&!u&&t<e||u&&i&&r&&!n&&!o||a&&i&&r||!s&&r||!l)return-1}return 0}function Cn(t,e,i,n){for(var r=-1,o=t.length,s=i.length,a=-1,l=e.length,u=bs(o-s,0),h=Lo(l+u),c=!n;++a<l;)h[a]=e[a];for(;++r<s;)(c||r<o)&&(h[i[r]]=t[r]);for(;u--;)h[a++]=t[r++];return h}function Sn(t,e,i,n){for(var r=-1,o=t.length,s=-1,a=i.length,l=-1,u=e.length,h=bs(o-a,0),c=Lo(h+u),p=!n;++r<h;)c[r]=t[r];for(var f=r;++l<u;)c[f+l]=e[l];for(;++s<a;)(p||r<o)&&(c[f+i[s]]=t[r++]);return c}function Tn(t,e){var i=-1,n=t.length;for(e||(e=Lo(n));++i<n;)e[i]=t[i];return e}function Rn(t,e,i,n){var r=!i;i||(i={});for(var o=-1,s=e.length;++o<s;){var a=e[o],l=n?n(i[a],t[a],a,i,t):U;l===U&&(l=t[a]),r?He(i,a,l):Ye(i,a,l)}return i}function In(t,e){return function(i,n){var r=Xa(i)?s:Ve,o=e?e():{};return r(i,t,sr(n,2),o)}}function On(t){return tn(function(e,i){var n=-1,r=i.length,o=r>1?i[r-1]:U,s=r>2?i[2]:U;for(o=t.length>3&&"function"==typeof o?(r--,o):U,s&&dr(i[0],i[1],s)&&(o=r<3?U:o,r=1),e=Fo(e);++n<r;){var a=i[n];a&&t(e,a,n,o)}return e})}function An(t,e){return function(i,n){if(null==i)return i;if(!Kr(i))return t(i,n);for(var r=i.length,o=e?r:-1,s=Fo(i);(e?o--:++o<r)&&!1!==n(s[o],o,s););return i}}function Ln(t){return function(e,i,n){for(var r=-1,o=Fo(e),s=n(e),a=s.length;a--;){var l=s[t?a:++r];if(!1===i(o[l],l,o))break}return e}}function Mn(t){return function(e){var i=P(e=fo(e))?B(e):U,n=i?i[0]:e.charAt(0),r=i?xn(i,1).join(""):e.slice(1);return n[t]()+r}}function kn(t){return function(e){return d(wo(Eo(e).replace(Je,"")),t,"")}}function Pn(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var i=Ys(t.prototype),n=t.apply(i,e);return eo(n)?n:i}}function Dn(t,e,i){var n=Pn(t);return function r(){for(var s=arguments.length,a=Lo(s),l=s,u=or(r);l--;)a[l]=arguments[l];var h=s<3&&a[0]!==u&&a[s-1]!==u?[]:G(a,u);return(s-=h.length)<i?Hn(t,e,Gn,r.placeholder,U,a,h,U,U,i-s):o(this&&this!==ci&&this instanceof r?n:t,this,a)}}function Fn(t){return function(e,i,n){var r=Fo(e);if(!Kr(e)){var o=sr(i,3);e=mo(e),i=function(t){return o(r[t],t,r)}}var s=t(e,i,n);return s>-1?r[o?e[s]:s]:U}}function Nn(t){return er(function(e){var i=e.length,n=i,o=r.prototype.thru;for(t&&e.reverse();n--;){var s=e[n];if("function"!=typeof s)throw new Wo(H);if(o&&!a&&"wrapper"==rr(s))var a=new r([],!0)}for(n=a?n:i;++n<i;){var l=rr(s=e[n]),u="wrapper"==l?$s(s):U;a=u&&gr(u[0])&&u[1]==(lt|rt|st|ut)&&!u[4].length&&1==u[9]?a[rr(u[0])].apply(a,u[3]):1==s.length&&gr(s)?a[l]():a.thru(s)}return function(){var t=arguments,n=t[0];if(a&&1==t.length&&Xa(n))return a.plant(n).value();for(var r=0,o=i?e[r].apply(this,t):n;++r<i;)o=e[r].call(this,o);return o}})}function Gn(t,e,i,n,r,o,s,a,l,u){var h=e&lt,c=e&et,p=e&it,f=e&(rt|ot),d=e&ht,v=p?U:Pn(t);return function g(){for(var m=arguments.length,y=Lo(m),_=m;_--;)y[_]=arguments[_];if(f)var x=or(g),b=function(t,e){for(var i=t.length,n=0;i--;)t[i]===e&&++n;return n}(y,x);if(n&&(y=Cn(y,n,r,f)),o&&(y=Sn(y,o,s,f)),m-=b,f&&m<u){var E=G(y,x);return Hn(t,e,Gn,g.placeholder,i,y,E,a,l,u-m)}var w=c?i:this,j=p?w[t]:t;return m=y.length,a?y=function(t,e){for(var i=t.length,n=Es(e.length,i),r=Tn(t);n--;){var o=e[n];t[n]=fr(o,i)?r[o]:U}return t}(y,a):d&&m>1&&y.reverse(),h&&l<m&&(y.length=l),this&&this!==ci&&this instanceof g&&(j=v||Pn(j)),j.apply(w,y)}}function Wn(t,e){return function(i,n){return function(t,e,i,n){return fi(t,function(t,r,o){e(n,i(t),r,o)}),n}(i,t,e(n),{})}}function zn(t,e){return function(i,n){var r;if(i===U&&n===U)return e;if(i!==U&&(r=i),n!==U){if(r===U)return n;"string"==typeof i||"string"==typeof n?(i=un(i),n=un(n)):(i=ln(i),n=ln(n)),r=t(i,n)}return r}}function Bn(t){return er(function(e){return e=p(e,I(sr())),tn(function(i){var n=this;return t(e,function(t){return o(t,n,i)})})})}function Yn(t,e){var i=(e=e===U?" ":un(e)).length;if(i<2)return i?$i(e,t):e;var n=$i(e,ds(t/z(e)));return P(e)?xn(B(n),0,t).join(""):n.slice(0,t)}function Un(t,e,i,n){var r=e&et,s=Pn(t);return function e(){for(var a=-1,l=arguments.length,u=-1,h=n.length,c=Lo(h+l),p=this&&this!==ci&&this instanceof e?s:t;++u<h;)c[u]=n[u];for(;l--;)c[u++]=arguments[++a];return o(p,r?i:this,c)}}function Vn(t){return function(e,i,n){return n&&"number"!=typeof n&&dr(e,i,n)&&(i=n=U),e=lo(e),i===U?(i=e,e=0):i=lo(i),function(t,e,i,n){for(var r=-1,o=bs(ds((e-t)/(i||1)),0),s=Lo(o);o--;)s[n?o:++r]=t,t+=i;return s}(e,i,n=n===U?e<i?1:-1:lo(n),t)}}function Xn(t){return function(e,i){return"string"==typeof e&&"string"==typeof i||(e=co(e),i=co(i)),t(e,i)}}function Hn(t,e,i,n,r,o,s,a,l,u){var h=e&rt;e|=h?st:at,(e&=~(h?at:st))&nt||(e&=~(et|it));var c=[t,e,r,h?o:U,h?s:U,h?U:o,h?U:s,a,l,u],p=i.apply(U,c);return gr(t)&&ra(p,c),p.placeholder=n,wr(p,t,e)}function Zn(t){var e=Do[t];return function(t,i){if(t=co(t),i=null==i?0:Es(uo(i),292)){var n=(fo(t)+"e").split("e");return+((n=(fo(e(n[0]+"e"+(+n[1]+i)))+"e").split("e"))[0]+"e"+(+n[1]-i))}return e(t)}}function Kn(t){return function(e){var i=ia(e);return i==kt?F(e):i==Wt?function(t){var e=-1,i=Array(t.size);return t.forEach(function(t){i[++e]=[t,t]}),i}(e):function(t,e){return p(e,function(e){return[e,t[e]]})}(e,t(e))}}function Jn(t,e,i,n,r,o,s,a){var l=e&it;if(!l&&"function"!=typeof t)throw new Wo(H);var u=n?n.length:0;if(u||(e&=~(st|at),n=r=U),s=s===U?s:bs(uo(s),0),a=a===U?a:uo(a),u-=r?r.length:0,e&at){var h=n,c=r;n=r=U}var p=l?U:$s(t),f=[t,e,i,n,r,h,c,o,s,a];if(p&&function(t,e){var i=t[1],n=e[1],r=i|n,o=r<(et|it|lt),s=n==lt&&i==rt||n==lt&&i==ut&&t[7].length<=e[8]||n==(lt|ut)&&e[7].length<=e[8]&&i==rt;if(!o&&!s)return t;n&et&&(t[2]=e[2],r|=i&et?0:nt);var a=e[3];if(a){var l=t[3];t[3]=l?Cn(l,a,e[4]):a,t[4]=l?G(t[3],K):e[4]}(a=e[5])&&(l=t[5],t[5]=l?Sn(l,a,e[6]):a,t[6]=l?G(t[5],K):e[6]),(a=e[7])&&(t[7]=a),n&lt&&(t[8]=null==t[8]?e[8]:Es(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=r}(f,p),t=f[0],e=f[1],i=f[2],n=f[3],r=f[4],!(a=f[9]=f[9]===U?l?0:t.length:bs(f[9]-u,0))&&e&(rt|ot)&&(e&=~(rt|ot)),e&&e!=et)d=e==rt||e==ot?Dn(t,e,a):e!=st&&e!=(et|st)||r.length?Gn.apply(U,f):Un(t,e,i,n);else var d=function(t,e,i){var n=e&et,r=Pn(t);return function e(){return(this&&this!==ci&&this instanceof e?r:t).apply(n?i:this,arguments)}}(t,e,i);return wr((p?Zs:ra)(d,f),t,e)}function qn(t,e,i,n){return t===U||Zr(t,Yo[i])&&!Xo.call(n,i)?e:t}function Qn(t,e,i,n,r,o){return eo(t)&&eo(e)&&(o.set(e,t),Xi(t,e,U,Qn,o),o.delete(e)),t}function $n(t){return ro(t)?U:t}function tr(t,e,i,n,r,o){var s=i&$,a=t.length,l=e.length;if(a!=l&&!(s&&l>a))return!1;var u=o.get(t);if(u&&o.get(e))return u==e;var h=-1,c=!0,p=i&tt?new Ne:U;for(o.set(t,e),o.set(e,t);++h<a;){var f=t[h],d=e[h];if(n)var v=s?n(d,f,h,e,t,o):n(f,d,h,t,e,o);if(v!==U){if(v)continue;c=!1;break}if(p){if(!g(e,function(t,e){if(!A(p,e)&&(f===t||r(f,t,i,n,o)))return p.push(e)})){c=!1;break}}else if(f!==d&&!r(f,d,i,n,o)){c=!1;break}}return o.delete(t),o.delete(e),c}function er(t){return sa(xr(t,U,Ar),t+"")}function ir(t){return Ri(t,mo,ta)}function nr(t){return Ri(t,yo,ea)}function rr(t){for(var e=t.name+"",i=ks[e],n=Xo.call(ks,e)?i.length:0;n--;){var r=i[n],o=r.func;if(null==o||o==t)return r.name}return e}function or(t){return(Xo.call(i,"placeholder")?i:t).placeholder}function sr(){var t=i.iteratee||So;return t=t===So?Gi:t,arguments.length?t(arguments[0],arguments[1]):t}function ar(t,e){var i=t.__data__;return function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}(e)?i["string"==typeof e?"string":"hash"]:i.map}function lr(t){for(var e=mo(t),i=e.length;i--;){var n=e[i],r=t[n];e[i]=[n,r,yr(r)]}return e}function ur(t,e){var i=function(t,e){return null==t?U:t[e]}(t,e);return Ni(i)?i:U}function hr(t,e,i){for(var n=-1,r=(e=_n(e,t)).length,o=!1;++n<r;){var s=Sr(e[n]);if(!(o=null!=t&&i(t,s)))break;t=t[s]}return o||++n!=r?o:!!(r=null==t?0:t.length)&&to(r)&&fr(s,r)&&(Xa(t)||Va(t))}function cr(t){return"function"!=typeof t.constructor||mr(t)?{}:Ys(ns(t))}function pr(t){return Xa(t)||Va(t)||!!(as&&t&&t[as])}function fr(t,e){var i=typeof t;return!!(e=null==e?yt:e)&&("number"==i||"symbol"!=i&&Le.test(t))&&t>-1&&t%1==0&&t<e}function dr(t,e,i){if(!eo(i))return!1;var n=typeof e;return!!("number"==n?Kr(i)&&fr(e,i.length):"string"==n&&e in i)&&Zr(i[e],t)}function vr(t,e){if(Xa(t))return!1;var i=typeof t;return!("number"!=i&&"symbol"!=i&&"boolean"!=i&&null!=t&&!so(t))||de.test(t)||!fe.test(t)||null!=e&&t in Fo(e)}function gr(t){var e=rr(t),n=i[e];if("function"!=typeof n||!(e in C.prototype))return!1;if(t===n)return!0;var r=$s(n);return!!r&&t===r[0]}function mr(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Yo)}function yr(t){return t==t&&!eo(t)}function _r(t,e){return function(i){return null!=i&&i[t]===e&&(e!==U||t in Fo(i))}}function xr(t,e,i){return e=bs(e===U?t.length-1:e,0),function(){for(var n=arguments,r=-1,s=bs(n.length-e,0),a=Lo(s);++r<s;)a[r]=n[e+r];r=-1;for(var l=Lo(e+1);++r<e;)l[r]=n[r];return l[e]=i(a),o(t,this,l)}}function br(t,e){return e.length<2?t:wi(t,nn(e,0,-1))}function Er(t,e){if("__proto__"!=e)return t[e]}function wr(t,e,i){var n=e+"";return sa(t,function(t,e){var i=e.length;if(!i)return t;var n=i-1;return e[n]=(i>1?"& ":"")+e[n],e=e.join(i>2?", ":" "),t.replace(be,"{\n/* [wrapped with "+e+"] */\n")}(n,function(t,e){return a(jt,function(i){var n="_."+i[0];e&i[1]&&!h(t,n)&&t.push(n)}),t.sort()}(function(t){var e=t.match(Ee);return e?e[1].split(we):[]}(n),i)))}function jr(t){var e=0,i=0;return function(){var n=ws(),r=dt-(n-i);if(i=n,r>0){if(++e>=ft)return arguments[0]}else e=0;return t.apply(U,arguments)}}function Cr(t,e){var i=-1,n=t.length,r=n-1;for(e=e===U?n:e;++i<e;){var o=Qi(i,r),s=t[o];t[o]=t[i],t[i]=s}return t.length=e,t}function Sr(t){if("string"==typeof t||so(t))return t;var e=t+"";return"0"==e&&1/t==-mt?"-0":e}function Tr(t){if(null!=t){try{return Vo.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Rr(t){if(t instanceof C)return t.clone();var e=new r(t.__wrapped__,t.__chain__);return e.__actions__=Tn(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}function Ir(t,e,i){var n=null==t?0:t.length;if(!n)return-1;var r=null==i?0:uo(i);return r<0&&(r=bs(n+r,0)),_(t,sr(e,3),r)}function Or(t,e,i){var n=null==t?0:t.length;if(!n)return-1;var r=n-1;return i!==U&&(r=uo(i),r=i<0?bs(n+r,0):Es(r,n-1)),_(t,sr(e,3),r,!0)}function Ar(t){return null!=t&&t.length?pi(t,1):[]}function Lr(t){return t&&t.length?t[0]:U}function Mr(t){var e=null==t?0:t.length;return e?t[e-1]:U}function kr(t,e){return t&&t.length&&e&&e.length?Ji(t,e):t}function Pr(t){return null==t?t:Ss.call(t)}function Dr(t){if(!t||!t.length)return[];var e=0;return t=u(t,function(t){if(Jr(t))return e=bs(t.length,e),!0}),R(e,function(e){return p(t,j(e))})}function Fr(t,e){if(!t||!t.length)return[];var i=Dr(t);return null==e?i:p(i,function(t){return o(e,U,t)})}function Nr(t){var e=i(t);return e.__chain__=!0,e}function Gr(t,e){return e(t)}function Wr(t,e){return(Xa(t)?a:Us)(t,sr(e,3))}function zr(t,e){return(Xa(t)?function(t,e){for(var i=null==t?0:t.length;i--&&!1!==e(t[i],i,t););return t}:Vs)(t,sr(e,3))}function Br(t,e){return(Xa(t)?p:Yi)(t,sr(e,3))}function Yr(t,e,i){return e=i?U:e,e=t&&null==e?t.length:e,Jn(t,lt,U,U,U,U,e)}function Ur(t,e){var i;if("function"!=typeof e)throw new Wo(H);return t=uo(t),function(){return--t>0&&(i=e.apply(this,arguments)),t<=1&&(e=U),i}}function Vr(t,e,i){function n(e){var i=l,n=u;return l=u=U,d=e,c=t.apply(n,i)}function r(t){var i=t-f;return f===U||i>=e||i<0||g&&t-d>=h}function o(){var t=ka();if(r(t))return s(t);p=oa(o,function(t){var i=e-(t-f);return g?Es(i,h-(t-d)):i}(t))}function s(t){return p=U,m&&l?n(t):(l=u=U,c)}function a(){var t=ka(),i=r(t);if(l=arguments,u=this,f=t,i){if(p===U)return function(t){return d=t,p=oa(o,e),v?n(t):c}(f);if(g)return p=oa(o,e),n(f)}return p===U&&(p=oa(o,e)),c}var l,u,h,c,p,f,d=0,v=!1,g=!1,m=!0;if("function"!=typeof t)throw new Wo(H);return e=co(e)||0,eo(i)&&(v=!!i.leading,h=(g="maxWait"in i)?bs(co(i.maxWait)||0,e):h,m="trailing"in i?!!i.trailing:m),a.cancel=function(){p!==U&&qs(p),d=0,l=f=u=p=U},a.flush=function(){return p===U?c:s(ka())},a}function Xr(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new Wo(H);var i=function(){var n=arguments,r=e?e.apply(this,n):n[0],o=i.cache;if(o.has(r))return o.get(r);var s=t.apply(this,n);return i.cache=o.set(r,s)||o,s};return i.cache=new(Xr.Cache||Fe),i}function Hr(t){if("function"!=typeof t)throw new Wo(H);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}function Zr(t,e){return t===e||t!=t&&e!=e}function Kr(t){return null!=t&&to(t.length)&&!Qr(t)}function Jr(t){return io(t)&&Kr(t)}function qr(t){if(!io(t))return!1;var e=Ii(t);return e==At||e==Ot||"string"==typeof t.message&&"string"==typeof t.name&&!ro(t)}function Qr(t){if(!eo(t))return!1;var e=Ii(t);return e==Lt||e==Mt||e==Tt||e==Nt}function $r(t){return"number"==typeof t&&t==uo(t)}function to(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=yt}function eo(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function io(t){return null!=t&&"object"==typeof t}function no(t){return"number"==typeof t||io(t)&&Ii(t)==Pt}function ro(t){if(!io(t)||Ii(t)!=Ft)return!1;var e=ns(t);if(null===e)return!0;var i=Xo.call(e,"constructor")&&e.constructor;return"function"==typeof i&&i instanceof i&&Vo.call(i)==Jo}function oo(t){return"string"==typeof t||!Xa(t)&&io(t)&&Ii(t)==zt}function so(t){return"symbol"==typeof t||io(t)&&Ii(t)==Bt}function ao(t){if(!t)return[];if(Kr(t))return oo(t)?B(t):Tn(t);if(ls&&t[ls])return function(t){for(var e,i=[];!(e=t.next()).done;)i.push(e.value);return i}(t[ls]());var e=ia(t);return(e==kt?F:e==Wt?W:xo)(t)}function lo(t){return t?(t=co(t))===mt||t===-mt?(t<0?-1:1)*_t:t==t?t:0:0===t?t:0}function uo(t){var e=lo(t),i=e%1;return e==e?i?e-i:e:0}function ho(t){return t?Ke(uo(t),0,bt):0}function co(t){if("number"==typeof t)return t;if(so(t))return xt;if(eo(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=eo(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(ye,"");var i=Ie.test(t);return i||Ae.test(t)?li(t.slice(2),i?2:8):Re.test(t)?xt:+t}function po(t){return Rn(t,yo(t))}function fo(t){return null==t?"":un(t)}function vo(t,e,i){var n=null==t?U:wi(t,e);return n===U?i:n}function go(t,e){return null!=t&&hr(t,e,Li)}function mo(t){return Kr(t)?We(t):Wi(t)}function yo(t){return Kr(t)?We(t,!0):zi(t)}function _o(t,e){if(null==t)return{};var i=p(nr(t),function(t){return[t]});return e=sr(e),Ki(t,i,function(t,i){return e(t,i[0])})}function xo(t){return null==t?[]:O(t,mo(t))}function bo(t){return Cl(fo(t).toLowerCase())}function Eo(t){return(t=fo(t))&&t.replace(Me,ji).replace(qe,"")}function wo(t,e,i){return t=fo(t),(e=i?U:e)===U?D(t)?Y(t):m(t):t.match(e)||[]}function jo(t){return function(){return t}}function Co(t){return t}function So(t){return Gi("function"==typeof t?t:Qe(t,J))}function To(t,e,i){var n=mo(e),r=gi(e,n);null!=i||eo(e)&&(r.length||!n.length)||(i=e,e=t,t=this,r=gi(e,mo(e)));var o=!(eo(i)&&"chain"in i&&!i.chain),s=Qr(t);return a(r,function(i){var n=e[i];t[i]=n,s&&(t.prototype[i]=function(){var e=this.__chain__;if(o||e){var i=t(this.__wrapped__);return(i.__actions__=Tn(this.__actions__)).push({func:n,args:arguments,thisArg:t}),i.__chain__=e,i}return n.apply(t,f([this.value()],arguments))})}),t}function Ro(){}function Io(t){return vr(t)?j(Sr(t)):function(t){return function(e){return wi(e,t)}}(t)}function Oo(){return[]}function Ao(){return!1}var Lo=(e=null==e?ci:Ti.defaults(ci.Object(),e,Ti.pick(ci,ii))).Array,Mo=e.Date,ko=e.Error,Po=e.Function,Do=e.Math,Fo=e.Object,No=e.RegExp,Go=e.String,Wo=e.TypeError,zo=Lo.prototype,Bo=Po.prototype,Yo=Fo.prototype,Uo=e["__core-js_shared__"],Vo=Bo.toString,Xo=Yo.hasOwnProperty,Ho=0,Zo=function(){var t=/[^.]+$/.exec(Uo&&Uo.keys&&Uo.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),Ko=Yo.toString,Jo=Vo.call(Fo),qo=ci._,Qo=No("^"+Vo.call(Xo).replace(ge,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),$o=di?e.Buffer:U,ts=e.Symbol,es=e.Uint8Array,is=$o?$o.allocUnsafe:U,ns=N(Fo.getPrototypeOf,Fo),rs=Fo.create,os=Yo.propertyIsEnumerable,ss=zo.splice,as=ts?ts.isConcatSpreadable:U,ls=ts?ts.iterator:U,us=ts?ts.toStringTag:U,hs=function(){try{var t=ur(Fo,"defineProperty");return t({},"",{}),t}catch(t){}}(),cs=e.clearTimeout!==ci.clearTimeout&&e.clearTimeout,ps=Mo&&Mo.now!==ci.Date.now&&Mo.now,fs=e.setTimeout!==ci.setTimeout&&e.setTimeout,ds=Do.ceil,vs=Do.floor,gs=Fo.getOwnPropertySymbols,ms=$o?$o.isBuffer:U,ys=e.isFinite,_s=zo.join,xs=N(Fo.keys,Fo),bs=Do.max,Es=Do.min,ws=Mo.now,js=e.parseInt,Cs=Do.random,Ss=zo.reverse,Ts=ur(e,"DataView"),Rs=ur(e,"Map"),Is=ur(e,"Promise"),Os=ur(e,"Set"),As=ur(e,"WeakMap"),Ls=ur(Fo,"create"),Ms=As&&new As,ks={},Ps=Tr(Ts),Ds=Tr(Rs),Fs=Tr(Is),Ns=Tr(Os),Gs=Tr(As),Ws=ts?ts.prototype:U,zs=Ws?Ws.valueOf:U,Bs=Ws?Ws.toString:U,Ys=function(){function t(){}return function(e){if(!eo(e))return{};if(rs)return rs(e);t.prototype=e;var i=new t;return t.prototype=U,i}}();i.templateSettings={escape:he,evaluate:ce,interpolate:pe,variable:"",imports:{_:i}},i.prototype=n.prototype,i.prototype.constructor=i,r.prototype=Ys(n.prototype),r.prototype.constructor=r,C.prototype=Ys(n.prototype),C.prototype.constructor=C,je.prototype.clear=function(){this.__data__=Ls?Ls(null):{},this.size=0},je.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},je.prototype.get=function(t){var e=this.__data__;if(Ls){var i=e[t];return i===Z?U:i}return Xo.call(e,t)?e[t]:U},je.prototype.has=function(t){var e=this.__data__;return Ls?e[t]!==U:Xo.call(e,t)},je.prototype.set=function(t,e){var i=this.__data__;return this.size+=this.has(t)?0:1,i[t]=Ls&&e===U?Z:e,this},De.prototype.clear=function(){this.__data__=[],this.size=0},De.prototype.delete=function(t){var e=this.__data__,i=Ue(e,t);return!(i<0||(i==e.length-1?e.pop():ss.call(e,i,1),--this.size,0))},De.prototype.get=function(t){var e=this.__data__,i=Ue(e,t);return i<0?U:e[i][1]},De.prototype.has=function(t){return Ue(this.__data__,t)>-1},De.prototype.set=function(t,e){var i=this.__data__,n=Ue(i,t);return n<0?(++this.size,i.push([t,e])):i[n][1]=e,this},Fe.prototype.clear=function(){this.size=0,this.__data__={hash:new je,map:new(Rs||De),string:new je}},Fe.prototype.delete=function(t){var e=ar(this,t).delete(t);return this.size-=e?1:0,e},Fe.prototype.get=function(t){return ar(this,t).get(t)},Fe.prototype.has=function(t){return ar(this,t).has(t)},Fe.prototype.set=function(t,e){var i=ar(this,t),n=i.size;return i.set(t,e),this.size+=i.size==n?0:1,this},Ne.prototype.add=Ne.prototype.push=function(t){return this.__data__.set(t,Z),this},Ne.prototype.has=function(t){return this.__data__.has(t)},Ge.prototype.clear=function(){this.__data__=new De,this.size=0},Ge.prototype.delete=function(t){var e=this.__data__,i=e.delete(t);return this.size=e.size,i},Ge.prototype.get=function(t){return this.__data__.get(t)},Ge.prototype.has=function(t){return this.__data__.has(t)},Ge.prototype.set=function(t,e){var i=this.__data__;if(i instanceof De){var n=i.__data__;if(!Rs||n.length<V-1)return n.push([t,e]),this.size=++i.size,this;i=this.__data__=new Fe(n)}return i.set(t,e),this.size=i.size,this};var Us=An(fi),Vs=An(vi,!0),Xs=Ln(),Hs=Ln(!0),Zs=Ms?function(t,e){return Ms.set(t,e),t}:Co,Ks=hs?function(t,e){return hs(t,"toString",{configurable:!0,enumerable:!1,value:jo(e),writable:!0})}:Co,Js=tn,qs=cs||function(t){return ci.clearTimeout(t)},Qs=Os&&1/W(new Os([,-0]))[1]==mt?function(t){return new Os(t)}:Ro,$s=Ms?function(t){return Ms.get(t)}:Ro,ta=gs?function(t){return null==t?[]:(t=Fo(t),u(gs(t),function(e){return os.call(t,e)}))}:Oo,ea=gs?function(t){for(var e=[];t;)f(e,ta(t)),t=ns(t);return e}:Oo,ia=Ii;(Ts&&ia(new Ts(new ArrayBuffer(1)))!=Ht||Rs&&ia(new Rs)!=kt||Is&&"[object Promise]"!=ia(Is.resolve())||Os&&ia(new Os)!=Wt||As&&ia(new As)!=Ut)&&(ia=function(t){var e=Ii(t),i=e==Ft?t.constructor:U,n=i?Tr(i):"";if(n)switch(n){case Ps:return Ht;case Ds:return kt;case Fs:return"[object Promise]";case Ns:return Wt;case Gs:return Ut}return e});var na=Uo?Qr:Ao,ra=jr(Zs),oa=fs||function(t,e){return ci.setTimeout(t,e)},sa=jr(Ks),aa=function(t){var e=Xr(function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(ve,function(t,i,n,r){e.push(n?r.replace(Ce,"$1"):i||t)}),e},function(t){return 500===i.size&&i.clear(),t}),i=e.cache;return e}(),la=tn(function(t,e){return Jr(t)?ei(t,pi(e,1,Jr,!0)):[]}),ua=tn(function(t,e){var i=Mr(e);return Jr(i)&&(i=U),Jr(t)?ei(t,pi(e,1,Jr,!0),sr(i,2)):[]}),ha=tn(function(t,e){var i=Mr(e);return Jr(i)&&(i=U),Jr(t)?ei(t,pi(e,1,Jr,!0),U,i):[]}),ca=tn(function(t){var e=p(t,mn);return e.length&&e[0]===t[0]?Mi(e):[]}),pa=tn(function(t){var e=Mr(t),i=p(t,mn);return e===Mr(i)?e=U:i.pop(),i.length&&i[0]===t[0]?Mi(i,sr(e,2)):[]}),fa=tn(function(t){var e=Mr(t),i=p(t,mn);return(e="function"==typeof e?e:U)&&i.pop(),i.length&&i[0]===t[0]?Mi(i,U,e):[]}),da=tn(kr),va=er(function(t,e){var i=null==t?0:t.length,n=Ze(t,e);return qi(t,p(e,function(t){return fr(t,i)?+t:t}).sort(jn)),n}),ga=tn(function(t){return hn(pi(t,1,Jr,!0))}),ma=tn(function(t){var e=Mr(t);return Jr(e)&&(e=U),hn(pi(t,1,Jr,!0),sr(e,2))}),ya=tn(function(t){var e=Mr(t);return e="function"==typeof e?e:U,hn(pi(t,1,Jr,!0),U,e)}),_a=tn(function(t,e){return Jr(t)?ei(t,e):[]}),xa=tn(function(t){return vn(u(t,Jr))}),ba=tn(function(t){var e=Mr(t);return Jr(e)&&(e=U),vn(u(t,Jr),sr(e,2))}),Ea=tn(function(t){var e=Mr(t);return e="function"==typeof e?e:U,vn(u(t,Jr),U,e)}),wa=tn(Dr),ja=tn(function(t){var e=t.length,i=e>1?t[e-1]:U;return Fr(t,i="function"==typeof i?(t.pop(),i):U)}),Ca=er(function(t){var e=t.length,i=e?t[0]:0,n=this.__wrapped__,o=function(e){return Ze(e,t)};return!(e>1||this.__actions__.length)&&n instanceof C&&fr(i)?((n=n.slice(i,+i+(e?1:0))).__actions__.push({func:Gr,args:[o],thisArg:U}),new r(n,this.__chain__).thru(function(t){return e&&!t.length&&t.push(U),t})):this.thru(o)}),Sa=In(function(t,e,i){Xo.call(t,i)?++t[i]:He(t,i,1)}),Ta=Fn(Ir),Ra=Fn(Or),Ia=In(function(t,e,i){Xo.call(t,i)?t[i].push(e):He(t,i,[e])}),Oa=tn(function(t,e,i){var n=-1,r="function"==typeof e,s=Kr(t)?Lo(t.length):[];return Us(t,function(t){s[++n]=r?o(e,t,i):ki(t,e,i)}),s}),Aa=In(function(t,e,i){He(t,i,e)}),La=In(function(t,e,i){t[i?0:1].push(e)},function(){return[[],[]]}),Ma=tn(function(t,e){if(null==t)return[];var i=e.length;return i>1&&dr(t,e[0],e[1])?e=[]:i>2&&dr(e[0],e[1],e[2])&&(e=[e[0]]),Zi(t,pi(e,1),[])}),ka=ps||function(){return ci.Date.now()},Pa=tn(function(t,e,i){var n=et;if(i.length){var r=G(i,or(Pa));n|=st}return Jn(t,n,e,i,r)}),Da=tn(function(t,e,i){var n=et|it;if(i.length){var r=G(i,or(Da));n|=st}return Jn(e,n,t,i,r)}),Fa=tn(function(t,e){return ti(t,1,e)}),Na=tn(function(t,e,i){return ti(t,co(e)||0,i)});Xr.Cache=Fe;var Ga=Js(function(t,e){var i=(e=1==e.length&&Xa(e[0])?p(e[0],I(sr())):p(pi(e,1),I(sr()))).length;return tn(function(n){for(var r=-1,s=Es(n.length,i);++r<s;)n[r]=e[r].call(this,n[r]);return o(t,this,n)})}),Wa=tn(function(t,e){var i=G(e,or(Wa));return Jn(t,st,U,e,i)}),za=tn(function(t,e){var i=G(e,or(za));return Jn(t,at,U,e,i)}),Ba=er(function(t,e){return Jn(t,ut,U,U,U,e)}),Ya=Xn(Oi),Ua=Xn(function(t,e){return t>=e}),Va=Pi(function(){return arguments}())?Pi:function(t){return io(t)&&Xo.call(t,"callee")&&!os.call(t,"callee")},Xa=Lo.isArray,Ha=mi?I(mi):function(t){return io(t)&&Ii(t)==Xt},Za=ms||Ao,Ka=yi?I(yi):function(t){return io(t)&&Ii(t)==It},Ja=_i?I(_i):function(t){return io(t)&&ia(t)==kt},qa=xi?I(xi):function(t){return io(t)&&Ii(t)==Gt},Qa=bi?I(bi):function(t){return io(t)&&ia(t)==Wt},$a=Ei?I(Ei):function(t){return io(t)&&to(t.length)&&!!ri[Ii(t)]},tl=Xn(Bi),el=Xn(function(t,e){return t<=e}),il=On(function(t,e){if(mr(e)||Kr(e))Rn(e,mo(e),t);else for(var i in e)Xo.call(e,i)&&Ye(t,i,e[i])}),nl=On(function(t,e){Rn(e,yo(e),t)}),rl=On(function(t,e,i,n){Rn(e,yo(e),t,n)}),ol=On(function(t,e,i,n){Rn(e,mo(e),t,n)}),sl=er(Ze),al=tn(function(t,e){t=Fo(t);var i=-1,n=e.length,r=n>2?e[2]:U;for(r&&dr(e[0],e[1],r)&&(n=1);++i<n;)for(var o=e[i],s=yo(o),a=-1,l=s.length;++a<l;){var u=s[a],h=t[u];(h===U||Zr(h,Yo[u])&&!Xo.call(t,u))&&(t[u]=o[u])}return t}),ll=tn(function(t){return t.push(U,Qn),o(fl,U,t)}),ul=Wn(function(t,e,i){null!=e&&"function"!=typeof e.toString&&(e=Ko.call(e)),t[e]=i},jo(Co)),hl=Wn(function(t,e,i){null!=e&&"function"!=typeof e.toString&&(e=Ko.call(e)),Xo.call(t,e)?t[e].push(i):t[e]=[i]},sr),cl=tn(ki),pl=On(function(t,e,i){Xi(t,e,i)}),fl=On(function(t,e,i,n){Xi(t,e,i,n)}),dl=er(function(t,e){var i={};if(null==t)return i;var n=!1;e=p(e,function(e){return e=_n(e,t),n||(n=e.length>1),e}),Rn(t,nr(t),i),n&&(i=Qe(i,J|q|Q,$n));for(var r=e.length;r--;)cn(i,e[r]);return i}),vl=er(function(t,e){return null==t?{}:function(t,e){return Ki(t,e,function(e,i){return go(t,i)})}(t,e)}),gl=Kn(mo),ml=Kn(yo),yl=kn(function(t,e,i){return e=e.toLowerCase(),t+(i?bo(e):e)}),_l=kn(function(t,e,i){return t+(i?"-":"")+e.toLowerCase()}),xl=kn(function(t,e,i){return t+(i?" ":"")+e.toLowerCase()}),bl=Mn("toLowerCase"),El=kn(function(t,e,i){return t+(i?"_":"")+e.toLowerCase()}),wl=kn(function(t,e,i){return t+(i?" ":"")+Cl(e)}),jl=kn(function(t,e,i){return t+(i?" ":"")+e.toUpperCase()}),Cl=Mn("toUpperCase"),Sl=tn(function(t,e){try{return o(t,U,e)}catch(t){return qr(t)?t:new ko(t)}}),Tl=er(function(t,e){return a(e,function(e){e=Sr(e),He(t,e,Pa(t[e],t))}),t}),Rl=Nn(),Il=Nn(!0),Ol=tn(function(t,e){return function(i){return ki(i,t,e)}}),Al=tn(function(t,e){return function(i){return ki(t,i,e)}}),Ll=Bn(p),Ml=Bn(l),kl=Bn(g),Pl=Vn(),Dl=Vn(!0),Fl=zn(function(t,e){return t+e},0),Nl=Zn("ceil"),Gl=zn(function(t,e){return t/e},1),Wl=Zn("floor"),zl=zn(function(t,e){return t*e},1),Bl=Zn("round"),Yl=zn(function(t,e){return t-e},0);return i.after=function(t,e){if("function"!=typeof e)throw new Wo(H);return t=uo(t),function(){if(--t<1)return e.apply(this,arguments)}},i.ary=Yr,i.assign=il,i.assignIn=nl,i.assignInWith=rl,i.assignWith=ol,i.at=sl,i.before=Ur,i.bind=Pa,i.bindAll=Tl,i.bindKey=Da,i.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return Xa(t)?t:[t]},i.chain=Nr,i.chunk=function(t,e,i){e=(i?dr(t,e,i):e===U)?1:bs(uo(e),0);var n=null==t?0:t.length;if(!n||e<1)return[];for(var r=0,o=0,s=Lo(ds(n/e));r<n;)s[o++]=nn(t,r,r+=e);return s},i.compact=function(t){for(var e=-1,i=null==t?0:t.length,n=0,r=[];++e<i;){var o=t[e];o&&(r[n++]=o)}return r},i.concat=function(){var t=arguments.length;if(!t)return[];for(var e=Lo(t-1),i=arguments[0],n=t;n--;)e[n-1]=arguments[n];return f(Xa(i)?Tn(i):[i],pi(e,1))},i.cond=function(t){var e=null==t?0:t.length,i=sr();return t=e?p(t,function(t){if("function"!=typeof t[1])throw new Wo(H);return[i(t[0]),t[1]]}):[],tn(function(i){for(var n=-1;++n<e;){var r=t[n];if(o(r[0],this,i))return o(r[1],this,i)}})},i.conforms=function(t){return function(t){var e=mo(t);return function(i){return $e(i,t,e)}}(Qe(t,J))},i.constant=jo,i.countBy=Sa,i.create=function(t,e){var i=Ys(t);return null==e?i:Xe(i,e)},i.curry=function t(e,i,n){var r=Jn(e,rt,U,U,U,U,U,i=n?U:i);return r.placeholder=t.placeholder,r},i.curryRight=function t(e,i,n){var r=Jn(e,ot,U,U,U,U,U,i=n?U:i);return r.placeholder=t.placeholder,r},i.debounce=Vr,i.defaults=al,i.defaultsDeep=ll,i.defer=Fa,i.delay=Na,i.difference=la,i.differenceBy=ua,i.differenceWith=ha,i.drop=function(t,e,i){var n=null==t?0:t.length;return n?nn(t,(e=i||e===U?1:uo(e))<0?0:e,n):[]},i.dropRight=function(t,e,i){var n=null==t?0:t.length;return n?nn(t,0,(e=n-(e=i||e===U?1:uo(e)))<0?0:e):[]},i.dropRightWhile=function(t,e){return t&&t.length?fn(t,sr(e,3),!0,!0):[]},i.dropWhile=function(t,e){return t&&t.length?fn(t,sr(e,3),!0):[]},i.fill=function(t,e,i,n){var r=null==t?0:t.length;return r?(i&&"number"!=typeof i&&dr(t,e,i)&&(i=0,n=r),function(t,e,i,n){var r=t.length;for((i=uo(i))<0&&(i=-i>r?0:r+i),(n=n===U||n>r?r:uo(n))<0&&(n+=r),n=i>n?0:ho(n);i<n;)t[i++]=e;return t}(t,e,i,n)):[]},i.filter=function(t,e){return(Xa(t)?u:hi)(t,sr(e,3))},i.flatMap=function(t,e){return pi(Br(t,e),1)},i.flatMapDeep=function(t,e){return pi(Br(t,e),mt)},i.flatMapDepth=function(t,e,i){return i=i===U?1:uo(i),pi(Br(t,e),i)},i.flatten=Ar,i.flattenDeep=function(t){return null!=t&&t.length?pi(t,mt):[]},i.flattenDepth=function(t,e){return null!=t&&t.length?pi(t,e=e===U?1:uo(e)):[]},i.flip=function(t){return Jn(t,ht)},i.flow=Rl,i.flowRight=Il,i.fromPairs=function(t){for(var e=-1,i=null==t?0:t.length,n={};++e<i;){var r=t[e];n[r[0]]=r[1]}return n},i.functions=function(t){return null==t?[]:gi(t,mo(t))},i.functionsIn=function(t){return null==t?[]:gi(t,yo(t))},i.groupBy=Ia,i.initial=function(t){return null!=t&&t.length?nn(t,0,-1):[]},i.intersection=ca,i.intersectionBy=pa,i.intersectionWith=fa,i.invert=ul,i.invertBy=hl,i.invokeMap=Oa,i.iteratee=So,i.keyBy=Aa,i.keys=mo,i.keysIn=yo,i.map=Br,i.mapKeys=function(t,e){var i={};return e=sr(e,3),fi(t,function(t,n,r){He(i,e(t,n,r),t)}),i},i.mapValues=function(t,e){var i={};return e=sr(e,3),fi(t,function(t,n,r){He(i,n,e(t,n,r))}),i},i.matches=function(t){return Ui(Qe(t,J))},i.matchesProperty=function(t,e){return Vi(t,Qe(e,J))},i.memoize=Xr,i.merge=pl,i.mergeWith=fl,i.method=Ol,i.methodOf=Al,i.mixin=To,i.negate=Hr,i.nthArg=function(t){return t=uo(t),tn(function(e){return Hi(e,t)})},i.omit=dl,i.omitBy=function(t,e){return _o(t,Hr(sr(e)))},i.once=function(t){return Ur(2,t)},i.orderBy=function(t,e,i,n){return null==t?[]:(Xa(e)||(e=null==e?[]:[e]),Xa(i=n?U:i)||(i=null==i?[]:[i]),Zi(t,e,i))},i.over=Ll,i.overArgs=Ga,i.overEvery=Ml,i.overSome=kl,i.partial=Wa,i.partialRight=za,i.partition=La,i.pick=vl,i.pickBy=_o,i.property=Io,i.propertyOf=function(t){return function(e){return null==t?U:wi(t,e)}},i.pull=da,i.pullAll=kr,i.pullAllBy=function(t,e,i){return t&&t.length&&e&&e.length?Ji(t,e,sr(i,2)):t},i.pullAllWith=function(t,e,i){return t&&t.length&&e&&e.length?Ji(t,e,U,i):t},i.pullAt=va,i.range=Pl,i.rangeRight=Dl,i.rearg=Ba,i.reject=function(t,e){return(Xa(t)?u:hi)(t,Hr(sr(e,3)))},i.remove=function(t,e){var i=[];if(!t||!t.length)return i;var n=-1,r=[],o=t.length;for(e=sr(e,3);++n<o;){var s=t[n];e(s,n,t)&&(i.push(s),r.push(n))}return qi(t,r),i},i.rest=function(t,e){if("function"!=typeof t)throw new Wo(H);return tn(t,e=e===U?e:uo(e))},i.reverse=Pr,i.sampleSize=function(t,e,i){return e=(i?dr(t,e,i):e===U)?1:uo(e),(Xa(t)?function(t,e){return Cr(Tn(t),Ke(e,0,t.length))}:function(t,e){var i=xo(t);return Cr(i,Ke(e,0,i.length))})(t,e)},i.set=function(t,e,i){return null==t?t:en(t,e,i)},i.setWith=function(t,e,i,n){return n="function"==typeof n?n:U,null==t?t:en(t,e,i,n)},i.shuffle=function(t){return(Xa(t)?function(t){return Cr(Tn(t))}:function(t){return Cr(xo(t))})(t)},i.slice=function(t,e,i){var n=null==t?0:t.length;return n?(i&&"number"!=typeof i&&dr(t,e,i)?(e=0,i=n):(e=null==e?0:uo(e),i=i===U?n:uo(i)),nn(t,e,i)):[]},i.sortBy=Ma,i.sortedUniq=function(t){return t&&t.length?an(t):[]},i.sortedUniqBy=function(t,e){return t&&t.length?an(t,sr(e,2)):[]},i.split=function(t,e,i){return i&&"number"!=typeof i&&dr(t,e,i)&&(e=i=U),(i=i===U?bt:i>>>0)?(t=fo(t))&&("string"==typeof e||null!=e&&!qa(e))&&!(e=un(e))&&P(t)?xn(B(t),0,i):t.split(e,i):[]},i.spread=function(t,e){if("function"!=typeof t)throw new Wo(H);return e=null==e?0:bs(uo(e),0),tn(function(i){var n=i[e],r=xn(i,0,e);return n&&f(r,n),o(t,this,r)})},i.tail=function(t){var e=null==t?0:t.length;return e?nn(t,1,e):[]},i.take=function(t,e,i){return t&&t.length?nn(t,0,(e=i||e===U?1:uo(e))<0?0:e):[]},i.takeRight=function(t,e,i){var n=null==t?0:t.length;return n?nn(t,(e=n-(e=i||e===U?1:uo(e)))<0?0:e,n):[]},i.takeRightWhile=function(t,e){return t&&t.length?fn(t,sr(e,3),!1,!0):[]},i.takeWhile=function(t,e){return t&&t.length?fn(t,sr(e,3)):[]},i.tap=function(t,e){return e(t),t},i.throttle=function(t,e,i){var n=!0,r=!0;if("function"!=typeof t)throw new Wo(H);return eo(i)&&(n="leading"in i?!!i.leading:n,r="trailing"in i?!!i.trailing:r),Vr(t,e,{leading:n,maxWait:e,trailing:r})},i.thru=Gr,i.toArray=ao,i.toPairs=gl,i.toPairsIn=ml,i.toPath=function(t){return Xa(t)?p(t,Sr):so(t)?[t]:Tn(aa(fo(t)))},i.toPlainObject=po,i.transform=function(t,e,i){var n=Xa(t),r=n||Za(t)||$a(t);if(e=sr(e,4),null==i){var o=t&&t.constructor;i=r?n?new o:[]:eo(t)&&Qr(o)?Ys(ns(t)):{}}return(r?a:fi)(t,function(t,n,r){return e(i,t,n,r)}),i},i.unary=function(t){return Yr(t,1)},i.union=ga,i.unionBy=ma,i.unionWith=ya,i.uniq=function(t){return t&&t.length?hn(t):[]},i.uniqBy=function(t,e){return t&&t.length?hn(t,sr(e,2)):[]},i.uniqWith=function(t,e){return e="function"==typeof e?e:U,t&&t.length?hn(t,U,e):[]},i.unset=function(t,e){return null==t||cn(t,e)},i.unzip=Dr,i.unzipWith=Fr,i.update=function(t,e,i){return null==t?t:pn(t,e,yn(i))},i.updateWith=function(t,e,i,n){return n="function"==typeof n?n:U,null==t?t:pn(t,e,yn(i),n)},i.values=xo,i.valuesIn=function(t){return null==t?[]:O(t,yo(t))},i.without=_a,i.words=wo,i.wrap=function(t,e){return Wa(yn(e),t)},i.xor=xa,i.xorBy=ba,i.xorWith=Ea,i.zip=wa,i.zipObject=function(t,e){return gn(t||[],e||[],Ye)},i.zipObjectDeep=function(t,e){return gn(t||[],e||[],en)},i.zipWith=ja,i.entries=gl,i.entriesIn=ml,i.extend=nl,i.extendWith=rl,To(i,i),i.add=Fl,i.attempt=Sl,i.camelCase=yl,i.capitalize=bo,i.ceil=Nl,i.clamp=function(t,e,i){return i===U&&(i=e,e=U),i!==U&&(i=(i=co(i))==i?i:0),e!==U&&(e=(e=co(e))==e?e:0),Ke(co(t),e,i)},i.clone=function(t){return Qe(t,Q)},i.cloneDeep=function(t){return Qe(t,J|Q)},i.cloneDeepWith=function(t,e){return Qe(t,J|Q,e="function"==typeof e?e:U)},i.cloneWith=function(t,e){return Qe(t,Q,e="function"==typeof e?e:U)},i.conformsTo=function(t,e){return null==e||$e(t,e,mo(e))},i.deburr=Eo,i.defaultTo=function(t,e){return null==t||t!=t?e:t},i.divide=Gl,i.endsWith=function(t,e,i){t=fo(t),e=un(e);var n=t.length,r=i=i===U?n:Ke(uo(i),0,n);return(i-=e.length)>=0&&t.slice(i,r)==e},i.eq=Zr,i.escape=function(t){return(t=fo(t))&&ue.test(t)?t.replace(ae,Ci):t},i.escapeRegExp=function(t){return(t=fo(t))&&me.test(t)?t.replace(ge,"\\$&"):t},i.every=function(t,e,i){var n=Xa(t)?l:si;return i&&dr(t,e,i)&&(e=U),n(t,sr(e,3))},i.find=Ta,i.findIndex=Ir,i.findKey=function(t,e){return y(t,sr(e,3),fi)},i.findLast=Ra,i.findLastIndex=Or,i.findLastKey=function(t,e){return y(t,sr(e,3),vi)},i.floor=Wl,i.forEach=Wr,i.forEachRight=zr,i.forIn=function(t,e){return null==t?t:Xs(t,sr(e,3),yo)},i.forInRight=function(t,e){return null==t?t:Hs(t,sr(e,3),yo)},i.forOwn=function(t,e){return t&&fi(t,sr(e,3))},i.forOwnRight=function(t,e){return t&&vi(t,sr(e,3))},i.get=vo,i.gt=Ya,i.gte=Ua,i.has=function(t,e){return null!=t&&hr(t,e,Ai)},i.hasIn=go,i.head=Lr,i.identity=Co,i.includes=function(t,e,i,n){t=Kr(t)?t:xo(t),i=i&&!n?uo(i):0;var r=t.length;return i<0&&(i=bs(r+i,0)),oo(t)?i<=r&&t.indexOf(e,i)>-1:!!r&&x(t,e,i)>-1},i.indexOf=function(t,e,i){var n=null==t?0:t.length;if(!n)return-1;var r=null==i?0:uo(i);return r<0&&(r=bs(n+r,0)),x(t,e,r)},i.inRange=function(t,e,i){return e=lo(e),i===U?(i=e,e=0):i=lo(i),function(t,e,i){return t>=Es(e,i)&&t<bs(e,i)}(t=co(t),e,i)},i.invoke=cl,i.isArguments=Va,i.isArray=Xa,i.isArrayBuffer=Ha,i.isArrayLike=Kr,i.isArrayLikeObject=Jr,i.isBoolean=function(t){return!0===t||!1===t||io(t)&&Ii(t)==Rt},i.isBuffer=Za,i.isDate=Ka,i.isElement=function(t){return io(t)&&1===t.nodeType&&!ro(t)},i.isEmpty=function(t){if(null==t)return!0;if(Kr(t)&&(Xa(t)||"string"==typeof t||"function"==typeof t.splice||Za(t)||$a(t)||Va(t)))return!t.length;var e=ia(t);if(e==kt||e==Wt)return!t.size;if(mr(t))return!Wi(t).length;for(var i in t)if(Xo.call(t,i))return!1;return!0},i.isEqual=function(t,e){return Di(t,e)},i.isEqualWith=function(t,e,i){var n=(i="function"==typeof i?i:U)?i(t,e):U;return n===U?Di(t,e,U,i):!!n},i.isError=qr,i.isFinite=function(t){return"number"==typeof t&&ys(t)},i.isFunction=Qr,i.isInteger=$r,i.isLength=to,i.isMap=Ja,i.isMatch=function(t,e){return t===e||Fi(t,e,lr(e))},i.isMatchWith=function(t,e,i){return i="function"==typeof i?i:U,Fi(t,e,lr(e),i)},i.isNaN=function(t){return no(t)&&t!=+t},i.isNative=function(t){if(na(t))throw new ko(X);return Ni(t)},i.isNil=function(t){return null==t},i.isNull=function(t){return null===t},i.isNumber=no,i.isObject=eo,i.isObjectLike=io,i.isPlainObject=ro,i.isRegExp=qa,i.isSafeInteger=function(t){return $r(t)&&t>=-yt&&t<=yt},i.isSet=Qa,i.isString=oo,i.isSymbol=so,i.isTypedArray=$a,i.isUndefined=function(t){return t===U},i.isWeakMap=function(t){return io(t)&&ia(t)==Ut},i.isWeakSet=function(t){return io(t)&&Ii(t)==Vt},i.join=function(t,e){return null==t?"":_s.call(t,e)},i.kebabCase=_l,i.last=Mr,i.lastIndexOf=function(t,e,i){var n=null==t?0:t.length;if(!n)return-1;var r=n;return i!==U&&(r=(r=uo(i))<0?bs(n+r,0):Es(r,n-1)),e==e?function(t,e,i){for(var n=i+1;n--;)if(t[n]===e)return n;return n}(t,e,r):_(t,E,r,!0)},i.lowerCase=xl,i.lowerFirst=bl,i.lt=tl,i.lte=el,i.max=function(t){return t&&t.length?ui(t,Co,Oi):U},i.maxBy=function(t,e){return t&&t.length?ui(t,sr(e,2),Oi):U},i.mean=function(t){return w(t,Co)},i.meanBy=function(t,e){return w(t,sr(e,2))},i.min=function(t){return t&&t.length?ui(t,Co,Bi):U},i.minBy=function(t,e){return t&&t.length?ui(t,sr(e,2),Bi):U},i.stubArray=Oo,i.stubFalse=Ao,i.stubObject=function(){return{}},i.stubString=function(){return""},i.stubTrue=function(){return!0},i.multiply=zl,i.nth=function(t,e){return t&&t.length?Hi(t,uo(e)):U},i.noConflict=function(){return ci._===this&&(ci._=qo),this},i.noop=Ro,i.now=ka,i.pad=function(t,e,i){t=fo(t);var n=(e=uo(e))?z(t):0;if(!e||n>=e)return t;var r=(e-n)/2;return Yn(vs(r),i)+t+Yn(ds(r),i)},i.padEnd=function(t,e,i){t=fo(t);var n=(e=uo(e))?z(t):0;return e&&n<e?t+Yn(e-n,i):t},i.padStart=function(t,e,i){t=fo(t);var n=(e=uo(e))?z(t):0;return e&&n<e?Yn(e-n,i)+t:t},i.parseInt=function(t,e,i){return i||null==e?e=0:e&&(e=+e),js(fo(t).replace(_e,""),e||0)},i.random=function(t,e,i){if(i&&"boolean"!=typeof i&&dr(t,e,i)&&(e=i=U),i===U&&("boolean"==typeof e?(i=e,e=U):"boolean"==typeof t&&(i=t,t=U)),t===U&&e===U?(t=0,e=1):(t=lo(t),e===U?(e=t,t=0):e=lo(e)),t>e){var n=t;t=e,e=n}if(i||t%1||e%1){var r=Cs();return Es(t+r*(e-t+ai("1e-"+((r+"").length-1))),e)}return Qi(t,e)},i.reduce=function(t,e,i){var n=Xa(t)?d:S,r=arguments.length<3;return n(t,sr(e,4),i,r,Us)},i.reduceRight=function(t,e,i){var n=Xa(t)?v:S,r=arguments.length<3;return n(t,sr(e,4),i,r,Vs)},i.repeat=function(t,e,i){return e=(i?dr(t,e,i):e===U)?1:uo(e),$i(fo(t),e)},i.replace=function(){var t=arguments,e=fo(t[0]);return t.length<3?e:e.replace(t[1],t[2])},i.result=function(t,e,i){var n=-1,r=(e=_n(e,t)).length;for(r||(r=1,t=U);++n<r;){var o=null==t?U:t[Sr(e[n])];o===U&&(n=r,o=i),t=Qr(o)?o.call(t):o}return t},i.round=Bl,i.runInContext=t,i.sample=function(t){return(Xa(t)?ze:function(t){return ze(xo(t))})(t)},i.size=function(t){if(null==t)return 0;if(Kr(t))return oo(t)?z(t):t.length;var e=ia(t);return e==kt||e==Wt?t.size:Wi(t).length},i.snakeCase=El,i.some=function(t,e,i){var n=Xa(t)?g:rn;return i&&dr(t,e,i)&&(e=U),n(t,sr(e,3))},i.sortedIndex=function(t,e){return on(t,e)},i.sortedIndexBy=function(t,e,i){return sn(t,e,sr(i,2))},i.sortedIndexOf=function(t,e){var i=null==t?0:t.length;if(i){var n=on(t,e);if(n<i&&Zr(t[n],e))return n}return-1},i.sortedLastIndex=function(t,e){return on(t,e,!0)},i.sortedLastIndexBy=function(t,e,i){return sn(t,e,sr(i,2),!0)},i.sortedLastIndexOf=function(t,e){if(null!=t&&t.length){var i=on(t,e,!0)-1;if(Zr(t[i],e))return i}return-1},i.startCase=wl,i.startsWith=function(t,e,i){return t=fo(t),i=null==i?0:Ke(uo(i),0,t.length),e=un(e),t.slice(i,i+e.length)==e},i.subtract=Yl,i.sum=function(t){return t&&t.length?T(t,Co):0},i.sumBy=function(t,e){return t&&t.length?T(t,sr(e,2)):0},i.template=function(t,e,n){var r=i.templateSettings;n&&dr(t,e,n)&&(e=U),t=fo(t),e=rl({},e,r,qn);var o,s,a=rl({},e.imports,r.imports,qn),l=mo(a),u=O(a,l),h=0,c=e.interpolate||ke,p="__p += '",f=No((e.escape||ke).source+"|"+c.source+"|"+(c===pe?Se:ke).source+"|"+(e.evaluate||ke).source+"|$","g"),d="//# sourceURL="+("sourceURL"in e?e.sourceURL:"lodash.templateSources["+ ++ni+"]")+"\n";t.replace(f,function(e,i,n,r,a,l){return n||(n=r),p+=t.slice(h,l).replace(Pe,k),i&&(o=!0,p+="' +\n__e("+i+") +\n'"),a&&(s=!0,p+="';\n"+a+";\n__p += '"),n&&(p+="' +\n((__t = ("+n+")) == null ? '' : __t) +\n'"),h=l+e.length,e}),p+="';\n";var v=e.variable;v||(p="with (obj) {\n"+p+"\n}\n"),p=(s?p.replace(ne,""):p).replace(re,"$1").replace(oe,"$1;"),p="function("+(v||"obj")+") {\n"+(v?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(s?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+p+"return __p\n}";var g=Sl(function(){return Po(l,d+"return "+p).apply(U,u)});if(g.source=p,qr(g))throw g;return g},i.times=function(t,e){if((t=uo(t))<1||t>yt)return[];var i=bt,n=Es(t,bt);e=sr(e),t-=bt;for(var r=R(n,e);++i<t;)e(i);return r},i.toFinite=lo,i.toInteger=uo,i.toLength=ho,i.toLower=function(t){return fo(t).toLowerCase()},i.toNumber=co,i.toSafeInteger=function(t){return t?Ke(uo(t),-yt,yt):0===t?t:0},i.toString=fo,i.toUpper=function(t){return fo(t).toUpperCase()},i.trim=function(t,e,i){if((t=fo(t))&&(i||e===U))return t.replace(ye,"");if(!t||!(e=un(e)))return t;var n=B(t),r=B(e);return xn(n,L(n,r),M(n,r)+1).join("")},i.trimEnd=function(t,e,i){if((t=fo(t))&&(i||e===U))return t.replace(xe,"");if(!t||!(e=un(e)))return t;var n=B(t);return xn(n,0,M(n,B(e))+1).join("")},i.trimStart=function(t,e,i){if((t=fo(t))&&(i||e===U))return t.replace(_e,"");if(!t||!(e=un(e)))return t;var n=B(t);return xn(n,L(n,B(e))).join("")},i.truncate=function(t,e){var i=ct,n=pt;if(eo(e)){var r="separator"in e?e.separator:r;i="length"in e?uo(e.length):i,n="omission"in e?un(e.omission):n}var o=(t=fo(t)).length;if(P(t)){var s=B(t);o=s.length}if(i>=o)return t;var a=i-z(n);if(a<1)return n;var l=s?xn(s,0,a).join(""):t.slice(0,a);if(r===U)return l+n;if(s&&(a+=l.length-a),qa(r)){if(t.slice(a).search(r)){var u,h=l;for(r.global||(r=No(r.source,fo(Te.exec(r))+"g")),r.lastIndex=0;u=r.exec(h);)var c=u.index;l=l.slice(0,c===U?a:c)}}else if(t.indexOf(un(r),a)!=a){var p=l.lastIndexOf(r);p>-1&&(l=l.slice(0,p))}return l+n},i.unescape=function(t){return(t=fo(t))&&le.test(t)?t.replace(se,Si):t},i.uniqueId=function(t){var e=++Ho;return fo(t)+e},i.upperCase=jl,i.upperFirst=Cl,i.each=Wr,i.eachRight=zr,i.first=Lr,To(i,function(){var t={};return fi(i,function(e,n){Xo.call(i.prototype,n)||(t[n]=e)}),t}(),{chain:!1}),i.VERSION="4.17.11",a(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){i[t].placeholder=i}),a(["drop","take"],function(t,e){C.prototype[t]=function(i){i=i===U?1:bs(uo(i),0);var n=this.__filtered__&&!e?new C(this):this.clone();return n.__filtered__?n.__takeCount__=Es(i,n.__takeCount__):n.__views__.push({size:Es(i,bt),type:t+(n.__dir__<0?"Right":"")}),n},C.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}}),a(["filter","map","takeWhile"],function(t,e){var i=e+1,n=i==vt||3==i;C.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:sr(t,3),type:i}),e.__filtered__=e.__filtered__||n,e}}),a(["head","last"],function(t,e){var i="take"+(e?"Right":"");C.prototype[t]=function(){return this[i](1).value()[0]}}),a(["initial","tail"],function(t,e){var i="drop"+(e?"":"Right");C.prototype[t]=function(){return this.__filtered__?new C(this):this[i](1)}}),C.prototype.compact=function(){return this.filter(Co)},C.prototype.find=function(t){return this.filter(t).head()},C.prototype.findLast=function(t){return this.reverse().find(t)},C.prototype.invokeMap=tn(function(t,e){return"function"==typeof t?new C(this):this.map(function(i){return ki(i,t,e)})}),C.prototype.reject=function(t){return this.filter(Hr(sr(t)))},C.prototype.slice=function(t,e){t=uo(t);var i=this;return i.__filtered__&&(t>0||e<0)?new C(i):(t<0?i=i.takeRight(-t):t&&(i=i.drop(t)),e!==U&&(i=(e=uo(e))<0?i.dropRight(-e):i.take(e-t)),i)},C.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},C.prototype.toArray=function(){return this.take(bt)},fi(C.prototype,function(t,e){var n=/^(?:filter|find|map|reject)|While$/.test(e),o=/^(?:head|last)$/.test(e),s=i[o?"take"+("last"==e?"Right":""):e],a=o||/^find/.test(e);s&&(i.prototype[e]=function(){var e=this.__wrapped__,l=o?[1]:arguments,u=e instanceof C,h=l[0],c=u||Xa(e),p=function(t){var e=s.apply(i,f([t],l));return o&&d?e[0]:e};c&&n&&"function"==typeof h&&1!=h.length&&(u=c=!1);var d=this.__chain__,v=!!this.__actions__.length,g=a&&!d,m=u&&!v;if(!a&&c){e=m?e:new C(this);var y=t.apply(e,l);return y.__actions__.push({func:Gr,args:[p],thisArg:U}),new r(y,d)}return g&&m?t.apply(this,l):(y=this.thru(p),g?o?y.value()[0]:y.value():y)})}),a(["pop","push","shift","sort","splice","unshift"],function(t){var e=zo[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",r=/^(?:pop|shift)$/.test(t);i.prototype[t]=function(){var t=arguments;if(r&&!this.__chain__){var i=this.value();return e.apply(Xa(i)?i:[],t)}return this[n](function(i){return e.apply(Xa(i)?i:[],t)})}}),fi(C.prototype,function(t,e){var n=i[e];if(n){var r=n.name+"";(ks[r]||(ks[r]=[])).push({name:e,func:n})}}),ks[Gn(U,it).name]=[{name:"wrapper",func:U}],C.prototype.clone=function(){var t=new C(this.__wrapped__);return t.__actions__=Tn(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=Tn(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=Tn(this.__views__),t},C.prototype.reverse=function(){if(this.__filtered__){var t=new C(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},C.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,i=Xa(t),n=e<0,r=i?t.length:0,o=function(t,e,i){for(var n=-1,r=i.length;++n<r;){var o=i[n],s=o.size;switch(o.type){case"drop":t+=s;break;case"dropRight":e-=s;break;case"take":e=Es(e,t+s);break;case"takeRight":t=bs(t,e-s)}}return{start:t,end:e}}(0,r,this.__views__),s=o.start,a=o.end,l=a-s,u=n?a:s-1,h=this.__iteratees__,c=h.length,p=0,f=Es(l,this.__takeCount__);if(!i||!n&&r==l&&f==l)return dn(t,this.__actions__);var d=[];t:for(;l--&&p<f;){for(var v=-1,g=t[u+=e];++v<c;){var m=h[v],y=m.iteratee,_=m.type,x=y(g);if(_==gt)g=x;else if(!x){if(_==vt)continue t;break t}}d[p++]=g}return d},i.prototype.at=Ca,i.prototype.chain=function(){return Nr(this)},i.prototype.commit=function(){return new r(this.value(),this.__chain__)},i.prototype.next=function(){this.__values__===U&&(this.__values__=ao(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?U:this.__values__[this.__index__++]}},i.prototype.plant=function(t){for(var e,i=this;i instanceof n;){var r=Rr(i);r.__index__=0,r.__values__=U,e?o.__wrapped__=r:e=r;var o=r;i=i.__wrapped__}return o.__wrapped__=t,e},i.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof C){var e=t;return this.__actions__.length&&(e=new C(this)),(e=e.reverse()).__actions__.push({func:Gr,args:[Pr],thisArg:U}),new r(e,this.__chain__)}return this.thru(Pr)},i.prototype.toJSON=i.prototype.valueOf=i.prototype.value=function(){return dn(this.__wrapped__,this.__actions__)},i.prototype.first=i.prototype.head,ls&&(i.prototype[ls]=function(){return this}),i}();ci._=Ti,(r=function(){return Ti}.call(e,i,e,n))!==U&&(n.exports=r)}).call(this)}).call(e,i("mFPK"),i("y5YM")(t))},rBbO:function(t,e,i){"use strict";function n(t){var e=new s(t),i=o(s.prototype.request,e);return r.extend(i,s.prototype,e),r.extend(i,e),i}var r=i("gvuQ"),o=i("IKeO"),s=i("NQr8"),a=i("XL/d"),l=n(a);l.Axios=s,l.create=function(t){return n(r.merge(a,t))},l.Cancel=i("DkjP"),l.CancelToken=i("68ub"),l.isCancel=i("eoZI"),l.all=function(t){return Promise.all(t)},l.spread=i("EZEp"),t.exports=l,t.exports.default=l},uOJK:function(t,e,i){function n(t,e){for(var i=0;i<t.length;i++){var n=t[i],r=p[n.id];if(r){r.refs++;for(var o=0;o<r.parts.length;o++)r.parts[o](n.parts[o]);for(;o<n.parts.length;o++)r.parts.push(h(n.parts[o],e))}else{var s=[];for(o=0;o<n.parts.length;o++)s.push(h(n.parts[o],e));p[n.id]={id:n.id,refs:1,parts:s}}}}function r(t,e){for(var i=[],n={},r=0;r<t.length;r++){var o=t[r],s=e.base?o[0]+e.base:o[0],a={css:o[1],media:o[2],sourceMap:o[3]};n[s]?n[s].parts.push(a):i.push(n[s]={id:s,parts:[a]})}return i}function o(t,e){var i=d(t.insertInto);if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var n=m[m.length-1];if("top"===t.insertAt)n?n.nextSibling?i.insertBefore(e,n.nextSibling):i.appendChild(e):i.insertBefore(e,i.firstChild),m.push(e);else if("bottom"===t.insertAt)i.appendChild(e);else{if("object"!=typeof t.insertAt||!t.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var r=d(t.insertInto+" "+t.insertAt.before);i.insertBefore(e,r)}}function s(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t);var e=m.indexOf(t);e>=0&&m.splice(e,1)}function a(t){var e=document.createElement("style");return t.attrs.type="text/css",u(e,t.attrs),o(t,e),e}function l(t){var e=document.createElement("link");return t.attrs.type="text/css",t.attrs.rel="stylesheet",u(e,t.attrs),o(t,e),e}function u(t,e){Object.keys(e).forEach(function(i){t.setAttribute(i,e[i])})}function h(t,e){var i,n,r,o;if(e.transform&&t.css){if(!(o=e.transform(t.css)))return function(){};t.css=o}if(e.singleton){var u=g++;i=v||(v=a(e)),n=c.bind(null,i,u,!1),r=c.bind(null,i,u,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(i=l(e),n=function(t,e,i){var n=i.css,r=i.sourceMap,o=void 0===e.convertToAbsoluteUrls&&r;(e.convertToAbsoluteUrls||o)&&(n=y(n)),r&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */");var s=new Blob([n],{type:"text/css"}),a=t.href;t.href=URL.createObjectURL(s),a&&URL.revokeObjectURL(a)}.bind(null,i,e),r=function(){s(i),i.href&&URL.revokeObjectURL(i.href)}):(i=a(e),n=function(t,e){var i=e.css,n=e.media;if(n&&t.setAttribute("media",n),t.styleSheet)t.styleSheet.cssText=i;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(i))}}.bind(null,i),r=function(){s(i)});return n(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;n(t=e)}else r()}}function c(t,e,i,n){var r=i?"":n.css;if(t.styleSheet)t.styleSheet.cssText=_(e,r);else{var o=document.createTextNode(r),s=t.childNodes;s[e]&&t.removeChild(s[e]),s.length?t.insertBefore(o,s[e]):t.appendChild(o)}}var p={},f=function(t){var e;return function(){return void 0===e&&(e=function(){return window&&document&&document.all&&!window.atob}.apply(this,arguments)),e}}(),d=function(t){var e={};return function(t){if(void 0===e[t]){var i=function(t){return document.querySelector(t)}.call(this,t);if(i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(t){i=null}e[t]=i}return e[t]}}(),v=null,g=0,m=[],y=i("udGk");t.exports=function(t,e){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(e=e||{}).attrs="object"==typeof e.attrs?e.attrs:{},e.singleton||(e.singleton=f()),e.insertInto||(e.insertInto="head"),e.insertAt||(e.insertAt="bottom");var i=r(t,e);return n(i,e),function(t){for(var o=[],s=0;s<i.length;s++){var a=i[s];(l=p[a.id]).refs--,o.push(l)}t&&n(r(t,e),e);for(s=0;s<o.length;s++){var l;if(0===(l=o[s]).refs){for(var u=0;u<l.parts.length;u++)l.parts[u]();delete p[l.id]}}}};var _=function(){var t=[];return function(e,i){return t[e]=i,t.filter(Boolean).join("\n")}}()},udGk:function(t,e){t.exports=function(t){var e="undefined"!=typeof window&&window.location;if(!e)throw new Error("fixUrls requires window.location");if(!t||"string"!=typeof t)return t;var i=e.protocol+"//"+e.host,n=i+e.pathname.replace(/\/[^\/]*$/,"/");return t.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(t,e){var r,o=e.trim().replace(/^"(.*)"$/,function(t,e){return e}).replace(/^'(.*)'$/,function(t,e){return e});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/)/i.test(o)?t:(r=0===o.indexOf("//")?o:0===o.indexOf("/")?i+o:n+o.replace(/^\.\//,""),"url("+JSON.stringify(r)+")")})}},v7nT:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("yFfH");n.a.install=function(t){"undefined"!=typeof window&&window.Vue&&(t=window.Vue),t.component(n.a.name,n.a)},e.default=n.a},vyL3:function(t,e,i){"use strict";var n=i("gvuQ");t.exports=function(t,e){n.forEach(t,function(i,n){n!==e&&n.toUpperCase()===e.toUpperCase()&&(t[e]=i,delete t[n])})}},xxJ0:function(t,e,i){"use strict";var n=i("OIH2");t.exports=function(t,e,i,r,o){var s=new Error(t);return n(s,e,i,r,o)}},y5YM:function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},yFfH:function(t,e,i){"use strict";var n=i("izNw"),r=i("ZMF+"),o=function(t){i("ME29")},s=i("C7Lr")(n.a,r.a,!1,o,null,null);e.a=s.exports}})},t.exports=n()},emf4:function(t,e,i){"use strict";t.exports=r,t.exports.default=r;var n=i("SpdK");function r(t,e){if(!(this instanceof r))return new r(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&this._initFormat(e),this.clear()}function o(t,e,i){if(!i)return e.indexOf(t);for(var n=0;n<e.length;n++)if(i(t,e[n]))return n;return-1}function s(t,e){a(t,0,t.children.length,e,t)}function a(t,e,i,n,r){r||(r=v(null)),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(var o,s=e;s<i;s++)o=t.children[s],l(r,t.leaf?n(o):o);return r}function l(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function u(t,e){return t.minX-e.minX}function h(t,e){return t.minY-e.minY}function c(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function p(t){return t.maxX-t.minX+(t.maxY-t.minY)}function f(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function d(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function v(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function g(t,e,i,r,o){for(var s,a=[e,i];a.length;)(i=a.pop())-(e=a.pop())<=r||(s=e+Math.ceil((i-e)/r/2)*r,n(t,s,e,i,o),a.push(e,s,s,i))}r.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,i=[],n=this.toBBox;if(!d(t,e))return i;for(var r,o,s,a,l=[];e;){for(r=0,o=e.children.length;r<o;r++)s=e.children[r],d(t,a=e.leaf?n(s):s)&&(e.leaf?i.push(s):f(t,a)?this._all(s,i):l.push(s));e=l.pop()}return i},collides:function(t){var e=this.data,i=this.toBBox;if(!d(t,e))return!1;for(var n,r,o,s,a=[];e;){for(n=0,r=e.children.length;n<r;n++)if(o=e.children[n],d(t,s=e.leaf?i(o):o)){if(e.leaf||f(t,s))return!0;a.push(o)}e=a.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,i=t.length;e<i;e++)this.insert(t[e]);return this}var n=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){var r=this.data;this.data=n,n=r}this._insert(n,this.data.height-n.height-1,!0)}else this.data=n;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=v([]),this},remove:function(t,e){if(!t)return this;for(var i,n,r,s,a=this.data,l=this.toBBox(t),u=[],h=[];a||u.length;){if(a||(a=u.pop(),n=u[u.length-1],i=h.pop(),s=!0),a.leaf&&-1!==(r=o(t,a.children,e)))return a.children.splice(r,1),u.push(a),this._condense(u),this;s||a.leaf||!f(a,l)?n?(i++,a=n.children[i],s=!1):a=null:(u.push(a),h.push(i),i=0,n=a,a=a.children[0])}return this},toBBox:function(t){return t},compareMinX:u,compareMinY:h,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var i=[];t;)t.leaf?e.push.apply(e,t.children):i.push.apply(i,t.children),t=i.pop();return e},_build:function(t,e,i,n){var r,o=i-e+1,a=this._maxEntries;if(o<=a)return s(r=v(t.slice(e,i+1)),this.toBBox),r;n||(n=Math.ceil(Math.log(o)/Math.log(a)),a=Math.ceil(o/Math.pow(a,n-1))),(r=v([])).leaf=!1,r.height=n;var l,u,h,c,p=Math.ceil(o/a),f=p*Math.ceil(Math.sqrt(a));for(g(t,e,i,f,this.compareMinX),l=e;l<=i;l+=f)for(g(t,l,h=Math.min(l+f-1,i),p,this.compareMinY),u=l;u<=h;u+=p)c=Math.min(u+p-1,h),r.children.push(this._build(t,u,c,n-1));return s(r,this.toBBox),r},_chooseSubtree:function(t,e,i,n){for(var r,o,s,a,l,u,h,p,f,d;n.push(e),!e.leaf&&n.length-1!==i;){for(h=p=1/0,r=0,o=e.children.length;r<o;r++)l=c(s=e.children[r]),f=t,d=s,(u=(Math.max(d.maxX,f.maxX)-Math.min(d.minX,f.minX))*(Math.max(d.maxY,f.maxY)-Math.min(d.minY,f.minY))-l)<p?(p=u,h=l<h?l:h,a=s):u===p&&l<h&&(h=l,a=s);e=a||e.children[0]}return e},_insert:function(t,e,i){var n=this.toBBox,r=i?t:n(t),o=[],s=this._chooseSubtree(r,this.data,e,o);for(s.children.push(t),l(s,r);e>=0&&o[e].children.length>this._maxEntries;)this._split(o,e),e--;this._adjustParentBBoxes(r,o,e)},_split:function(t,e){var i=t[e],n=i.children.length,r=this._minEntries;this._chooseSplitAxis(i,r,n);var o=this._chooseSplitIndex(i,r,n),a=v(i.children.splice(o,i.children.length-o));a.height=i.height,a.leaf=i.leaf,s(i,this.toBBox),s(a,this.toBBox),e?t[e-1].children.push(a):this._splitRoot(i,a)},_splitRoot:function(t,e){this.data=v([t,e]),this.data.height=t.height+1,this.data.leaf=!1,s(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,i){var n,r,o,s,l,u,h,p,f,d,v,g,m,y;for(u=h=1/0,n=e;n<=i-e;n++)r=a(t,0,n,this.toBBox),o=a(t,n,i,this.toBBox),f=r,d=o,void 0,void 0,void 0,void 0,v=Math.max(f.minX,d.minX),g=Math.max(f.minY,d.minY),m=Math.min(f.maxX,d.maxX),y=Math.min(f.maxY,d.maxY),s=Math.max(0,m-v)*Math.max(0,y-g),l=c(r)+c(o),s<u?(u=s,p=n,h=l<h?l:h):s===u&&l<h&&(h=l,p=n);return p},_chooseSplitAxis:function(t,e,i){var n=t.leaf?this.compareMinX:u,r=t.leaf?this.compareMinY:h;this._allDistMargin(t,e,i,n)<this._allDistMargin(t,e,i,r)&&t.children.sort(n)},_allDistMargin:function(t,e,i,n){t.children.sort(n);var r,o,s=this.toBBox,u=a(t,0,e,s),h=a(t,i-e,i,s),c=p(u)+p(h);for(r=e;r<i-e;r++)o=t.children[r],l(u,t.leaf?s(o):o),c+=p(u);for(r=i-e-1;r>=e;r--)o=t.children[r],l(h,t.leaf?s(o):o),c+=p(h);return c},_adjustParentBBoxes:function(t,e,i){for(var n=i;n>=0;n--)l(e[n],t)},_condense:function(t){for(var e,i=t.length-1;i>=0;i--)0===t[i].children.length?i>0?(e=t[i-1].children).splice(e.indexOf(t[i]),1):this.clear():s(t[i],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}}},hZ4t:function(t,e,i){"use strict";var n=i("eAMf"),r={name:"LivePlayerLive",props:{requestVideoUrl:[Function,String],params:Object,type:String,refreshFlag:{default:!1,type:Boolean},autoplay:{default:!1,type:Boolean},isBig:{default:!0,type:Boolean}},components:{LivePlayer:i.n(n).a},data:function(){return{videoUrl:"",videoOption:{videoMaskFlag:!0,playFlag:!0,loadingFlag:!1,playError:!1,videoText:"暂无视频数据"},videoLoadingDelay:{timer:null,countTime:10,count:0}}},computed:{player:function(){return this.$refs.livePlayer.player}},watch:{deep:!0,"videoOption.loadingFlag":function(t,e){this.initVideoTimer(),t&&this.videoTimer()},"videoLoadingDelay.count":function(t,e){}},mounted:function(){this.autoplay&&this.requestVideo()},methods:{initVideoTimer:function(){clearInterval(this.videoLoadingDelay.timer),this.videoLoadingDelay.count=0},videoTimer:function(){var t=this;this.videoLoadingDelay.timer=setInterval(function(){t.videoLoadingDelay.count>=t.videoLoadingDelay.countTime?(t.setVideoOptionError("此视频暂无法播放，请稍后再试"),t.videoUrl=""):t.videoLoadingDelay.count++},1e3)},setVideoOptionPause:function(){this.videoOption.videoMaskFlag=!0,this.videoOption.playFlag=!0,this.videoOption.loadingFlag=!1,this.videoOption.playError=!1},setVideoOptionLoading:function(){this.videoOption.videoMaskFlag=!0,this.videoOption.playFlag=!1,this.videoOption.loadingFlag=!0,this.videoOption.playError=!1},setVideoOptionError:function(t){this.videoOption.videoMaskFlag=!0,this.videoOption.playFlag=!1,this.videoOption.loadingFlag=!1,this.videoOption.playError=!0,this.videoOption.videoText=t,this.videoUrl=""},setVideoOptionClose:function(){this.videoOption.videoMaskFlag=!1},onPlayerMessage:function(t){},onPlayerError:function(t){this.$emit("onPlayerError",t)},onPlayerEnded:function(t){},onPlayerTimeupdate:function(t){this.initVideoTimer(),this.setVideoOptionClose()},onPlayerPause:function(){this.setVideoOptionPause()},onPlayerPlay:function(t){},requestVideo:function(){var t=this;this.setVideoOptionLoading(),this.videoUrl?this.player.play():"function"==typeof this.requestVideoUrl?this.requestVideoUrl(this.params).then(function(e){200==e.status?e.data[t.type]?(t.videoUrl=e.data[t.type],t.params.videoUrl=t.videoUrl,t.$emit("videoLoadCompleted",t.params)):(t.videoUrl="",t.setVideoOptionError("暂无视频数据")):t.setVideoOptionError(e.message||"接口响应失败，请稍后再试")}).catch(function(e){t.setVideoOptionError("接口响应失败，请稍后再试")}):this.requestVideoUrl?(this.videoUrl=this.requestVideoUrl,this.params.videoUrl=this.videoUrl,this.$emit("videoLoadCompleted",this.params)):this.setVideoOptionError("暂无视频数据")},refreshVideo:function(){""==this.videoUrl?this.requestVideo():(this.setVideoOptionLoading(),this.videoLoadingDelay.count=0,this.$emit("refreshVideo"))}}},o={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:[t.isBig?"c-video-16-9":"c-video-4-3"]},[i("div",{staticClass:"c-video"},[i("div",{staticClass:"c-video-title"},[t._t("default"),t._v(" "),t.refreshFlag?i("i",{staticClass:"el-icon-refresh",on:{click:t.refreshVideo}}):t._e()],2),t._v(" "),t.videoOption.videoMaskFlag?i("div",{staticClass:"c-video-mask"},[t.videoOption.playFlag?i("i",{staticClass:"el-icon-video-play",on:{click:t.requestVideo}}):t._e(),t._v(" "),t.videoOption.loadingFlag?i("i",{staticClass:"el-icon-loading"}):t._e(),t._v(" "),t.videoOption.playError?i("span",{staticClass:"c-video-tip"},[t._v(t._s(t.videoOption.videoText))]):t._e(),t._v(" "),t.videoOption.playError?i("i",{staticClass:"el-icon-refresh",on:{click:t.refreshVideo}}):t._e()]):t._e(),t._v(" "),i("live-player",{ref:"livePlayer",staticClass:"c-live-player",attrs:{videoUrl:t.videoUrl,autoplay:"",muted:!0,fluent:!0,live:!0},on:{message:t.onPlayerMessage,error:t.onPlayerError,ended:t.onPlayerEnded,timeupdate:t.onPlayerTimeupdate,pause:t.onPlayerPause,play:t.onPlayerPlay}})],1)])},staticRenderFns:[]};var s=i("VU/8")(r,o,!1,function(t){i("z8jk")},null,null);e.a=s.exports},ktr9:function(t,e){},z8jk:function(t,e){}});