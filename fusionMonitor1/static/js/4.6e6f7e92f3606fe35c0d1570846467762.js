webpackJsonp([4],{"/kAg":function(t,e){},Q7XF:function(t,e){},"T+/8":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i("mvHQ"),n=i.n(o),a=i("Dd8w"),r=i.n(a),s=i("SJI6"),l=i("teNi"),g={name:"Login",data:function(){return{visibleFlag:!1,loginForm:{userNo:"",password:"",platform:this.$store.state.admin.platform},loginRules:{userNo:[{validator:function(t,e,i){if(!e)return i(new Error("请填写用户名"));i()},trigger:"blur"}],password:[{validator:function(t,e,i){""===e?i(new Error("请输入密码")):i()},trigger:"blur"}]},loading:!1}},created:function(){var t=localStorage.getItem("yk-token");if(t){var e=JSON.parse(t);if((new Date).getTime()-e.time>864e5)this.removeStorage();else{var i={token:e.data,platform:this.$store.state.admin.platform};this.loginFunc(i)}}else this.removeStorage()},methods:r()({},Object(s.mapActions)(["goLogin"]),{handleLogin:function(){var t=this;this.$refs.loginForm.validate(function(e){if(!e)return t.loading=!1,!1;t.loading=!0,t.loginFunc(t.loginForm)})},loginFunc:function(t){var e=this;this.goLogin(t).then(function(t){e.loading=!1,200==t.status?(e.$router.push({path:"/overview"}),localStorage.setItem("yk-token",n()({data:JSON.parse(t.data).token,time:(new Date).getTime()}))):e.removeStorage()}).catch(function(t){e.loading=!1,e.removeStorage()})},removeStorage:function(){Object(l.c)(),localStorage.removeItem("yk-token"),this.visibleFlag=!0}})},c={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.visibleFlag?i("div",{attrs:{id:"login-warpper"}},[i("img",{staticClass:"login-logo",attrs:{src:"static/images/login-logo.png"}}),t._v(" "),i("div",{staticClass:"login-container"},[i("img",{staticClass:"login-bg",attrs:{src:"static/images/login-bg.jpg"}}),t._v(" "),i("div",{staticClass:"login-content"},[t._m(0),t._v(" "),i("div",{staticClass:"login-card"},[i("div",{staticClass:"login-title"},[t._v("融合感知中心")]),t._v(" "),i("div",{staticClass:"login-item-box"},[i("el-form",{ref:"loginForm",staticClass:"login-form",attrs:{model:t.loginForm,rules:t.loginRules,"label-position":"right","label-width":"105px"}},[i("el-form-item",{staticClass:"login-item",attrs:{prop:"userNo",label:"用户名"}},[i("el-input",{attrs:{type:"text",maxlength:40,placeholder:"请输入用户名"},model:{value:t.loginForm.userNo,callback:function(e){t.$set(t.loginForm,"userNo","string"==typeof e?e.trim():e)},expression:"loginForm.userNo"}})],1),t._v(" "),i("el-form-item",{staticClass:"login-item",attrs:{prop:"password",label:"密码"}},[i("el-input",{attrs:{type:"password",maxlength:20,placeholder:"请输入密码"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleLogin(e)}},model:{value:t.loginForm.password,callback:function(e){t.$set(t.loginForm,"password","string"==typeof e?e.trim():e)},expression:"loginForm.password"}})],1)],1),t._v(" "),i("el-button",{staticClass:"login-button",attrs:{type:"primary",loading:t.loading},nativeOn:{click:function(e){return e.preventDefault(),t.handleLogin(e)}}},[t._v("登 录")])],1)])])]),t._v(" "),t._m(1)]):t._e()},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"login-left"},[e("p",{staticClass:"login-left-title"},[this._v("云控，启迪未来")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"login-bottom"},[e("span",[this._v("建议浏览器：Chrome")]),this._v(" "),e("span",[this._v("建议分辨率：1920x1080")])])}]};var m=i("VU/8")(g,c,!1,function(t){i("/kAg"),i("Q7XF")},"data-v-19eb1f4d",null);e.default=m.exports}});